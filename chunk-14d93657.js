import{a as at,b as ot,d as lt}from"./chunk-96e3562a.js";import{B as st,Ga as k,Pb as nt,Tb as x,Vb as V,W as I,Z as ne,aa as b,da as it,na as B,p as rt}from"./chunk-0b36a61d.js";import{a as W,b as tt}from"./chunk-be8120ea.js";function gr(i){return i.map(c=>c.toString()).map(c=>c+";").join(`

`);}function ve(i,c,e=-1){if(!i)return"0g";let n=(e<0?i/1e3:(i/1e3).toFixed(e)).toString()+"kg",l=(i*1).toString()+"g";return c?c==="kg"?n:l:n.length<=l.length?n:l;}var z=class{condition;questions;items;constructor(c,e=[],n=[]){this.condition=c,this.questions=e,this.items=n;}toString(){let c=[];if(!(this.condition instanceof _)){let n=this.condition.toString();n&&c.push(n," ");}c.push(":-");let e=this.questions.map(n=>n.toString()).concat(this.items.map(n=>n.toString()));if(e.length===1&&c.length===1)c.push(" ",e[0]);else for(let n=0;n<e.length;n++){let l=e[n];n>0&&c.push(","),c.push(`
`,"   ",l);}return c.join("");}},P=class{question;variable;static NEW_QUESTION_NAME="New Question";static NEW_VARIABLE_NAME="new_variable";constructor(c,e){this.question=c,this.variable=e;}toString(){return this.question+" $"+this.variable;}},U=class{category;name;weight;static NEW_ITEM_NAME="New Item";static NEW_CATEGORY_NAME="New";constructor(c,e,n){this.category=c,this.name=e,this.weight=n;}toString(){let c=`[${this.category}] ${this.name}`.trim();return this.weight&&(c+=" "+ve(this.weight)),c;}},N=class{variable;constructor(c){this.variable=c;}evaluate(c){return c[this.variable];}toString(){return this.variable;}},Ar=(()=>{class i extends N{static string="please_select";constructor(){super(i.string);}}return i;})(),_=(()=>{class i extends N{static string="always";constructor(){super(i.string);}evaluate(){return!0;}}return i;})(),L=class{not;constructor(c){this.not=c;}evaluate(c){return!this.not.evaluate(c);}toString(){return"NOT "+this.not.toString();}},q=class{left;right;constructor(c,e){this.left=c,this.right=e;}evaluate(c){return this.left.evaluate(c)&&this.right.evaluate(c);}toString(){return this.left.toString()+" AND "+this.right.toString();}},K=class{left;right;constructor(c,e){this.left=c,this.right=e;}evaluate(c){return this.left.evaluate(c)||this.right.evaluate(c);}toString(){return this.left.toString()+" OR "+this.right.toString();}};function hr(i,c){let e=c.filter(l=>l instanceof P),n=c.filter(l=>l instanceof U);return new z(i??new _(),e,n);}function ct(i){return i.length===1?i[0]:new q(i[0],ct(i.slice(1)));}function ut(i){return i.length===1?i[0]:new K(i[0],ut(i.slice(1)));}function pr(i,c){function e(){this.constructor=i;}e.prototype=c.prototype,i.prototype=new e();}function T(i,c,e,n){var l=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(l,T.prototype),l.expected=c,l.found=e,l.location=n,l.name="SyntaxError",l;}pr(T,Error);function $e(i,c,e){return e=e||" ",i.length>c?i:(c-=i.length,e+=e.repeat(c),i+e.slice(0,c));}T.prototype.format=function(i){var c="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<i.length;n++)if(i[n].source===this.location.source){e=i[n].text.split(/\r\n|\n|\r/g);break;}var l=this.location.start,m=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(l):l,$=this.location.source+":"+m.line+":"+m.column;if(e){var E=this.location.end,O=$e("",m.line.toString().length," "),v=e[l.line-1],d=l.line===E.line?E.column:v.length+1,p=d-l.column||1;c+=`
 --> `+$+`
`+O+` |
`+m.line+" | "+v+`
`+O+" | "+$e("",l.column-1," ")+$e("",p,"^");}else c+=`
 at `+$;}return c;};T.buildMessage=function(i,c){var e={literal:function(v){return'"'+l(v.text)+'"';},class:function(v){var d=v.parts.map(function(p){return Array.isArray(p)?m(p[0])+"-"+m(p[1]):m(p);});return"["+(v.inverted?"^":"")+d.join("")+"]";},any:function(){return"any character";},end:function(){return"end of input";},other:function(v){return v.description;}};function n(v){return v.charCodeAt(0).toString(16).toUpperCase();}function l(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d);}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+n(d);});}function m(v){return v.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d);}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+n(d);});}function $(v){return e[v.type](v);}function E(v){var d=v.map($),p,A;if(d.sort(),d.length>0){for(p=1,A=1;p<d.length;p++)d[p-1]!==d[p]&&(d[A]=d[p],A++);d.length=A;}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1];}}function O(v){return v?'"'+l(v)+'"':"end of input";}return"Expected "+E(i)+" but "+O(c)+" found.";};function M(i,c){c=c!==void 0?c:{};var e={},n=c.grammarSource,l={Rules:qe,Rule:fe,Condition:Ue,Effects:Je,Question:he,Item:de,VariableName:pe,QuestionString:Be,ItemNameAndWeight:Ge,CategoryName:Ye},m=qe,$=";",E=":-",O="OR",v="AND",d="NOT",p=",",A="$",H="[",F="]",Re="kg",wt="g",St=".",Oe=/^[^$,;#]/,bt=/^[a-zA-Z]/,Ce=/^[a-zA-Z0-9\-[\](){}_]/,Me=/^[^\],;#[]/,yt=/^[,;]/,je=/^[^ ,;#]/,te=/^[0-9]/,ke=/^[ \t\n\r]/,xt=R("rule end"),Et=C(";",!1),It=R("rule"),At=C(":-",!1),re=R("condition"),Rt=C("OR",!1),Ot=C("AND",!1),ue=C("NOT",!1),Ct=C(",",!1),We=R("question"),Mt=C("$",!1),Ne=D(["$",",",";","#"],!0,!1),jt=R("variable name"),kt=D([["a","z"],["A","Z"]],!1,!1),Te=D([["a","z"],["A","Z"],["0","9"],"-","[","]","(",")","{","}","_"],!1,!1),Wt=R("item"),Nt=R("category"),Tt=C("[",!1),Pt=C("]",!1),Ft=R("category name"),Pe=D(["]",",",";","#","["],!0,!1),Dt=R("item name"),Vt=R("word"),zt=D([",",";"],!1,!1),Fe=D([" ",",",";","#"],!0,!1),Lt=R("weight"),qt=C("kg",!1),Kt=C("g",!1),Ut=R("number"),se=D([["0","9"]],!1,!1),Qt=C(".",!1),Ht=R("whitespace"),De=D([" ","	",`
`,"\r"],!1,!1),Jt=or(),Bt=function(t,r){return hr(t,r);},Yt=function(t){return ut(t);},Gt=function(t){return ct(t);},Zt=function(t){return new L(t);},_t=function(t){return new N(t);},Xt=function(t,r){return new P(t.trim(),r.trim());},er=function(t,r){let{name:a,weight:o}=r;return new U(t.trim(),a,o);},tr=function(t,r){return c.trackWeight;},rr=function(t,r){let a=t.trim();return a.length||Ve("item name"),{name:a,weight:r};},sr=function(t){let r=t.trim();return r.length||Ve("item name"),{name:r,weight:void 0};},ir=function(t){return t*1e3;},nr=function(){return parseFloat(ar());},s=c.peg$currPos|0,y=s,J=[{line:1,column:1}],j=s,ie=c.peg$maxFailExpected||[],u=c.peg$silentFails|0,Y;if(c.startRule){if(!(c.startRule in l))throw new Error(`Can't start parsing from rule "`+c.startRule+'".');m=l[c.startRule];}function ar(){return i.substring(y,s);}function Sr(){return y;}function br(){return{source:n,start:y,end:s};}function yr(){return G(y,s);}function Ve(t,r){throw r=r!==void 0?r:G(y,s),Le([R(t)],i.substring(y,s),r);}function xr(t,r){throw r=r!==void 0?r:G(y,s),cr(t,r);}function C(t,r){return{type:"literal",text:t,ignoreCase:r};}function D(t,r,a){return{type:"class",parts:t,inverted:r,ignoreCase:a};}function or(){return{type:"any"};}function lr(){return{type:"end"};}function R(t){return{type:"other",description:t};}function ze(t){var r=J[t],a;if(r)return r;if(t>=J.length)a=J.length-1;else for(a=t;!J[--a];);for(r=J[a],r={line:r.line,column:r.column};a<t;)i.charCodeAt(a)===10?(r.line++,r.column=1):r.column++,a++;return J[t]=r,r;}function G(t,r,a){var o=ze(t),f=ze(r),h={source:n,start:{offset:t,line:o.line,column:o.column},end:{offset:r,line:f.line,column:f.column}};return a&&n&&typeof n.offset=="function"&&(h.start=n.offset(h.start),h.end=n.offset(h.end)),h;}function g(t){s<j||(s>j&&(j=s,ie=[]),ie.push(t));}function cr(t,r){return new T(t,null,null,r);}function Le(t,r,a){return new T(T.buildMessage(t,r),t,r,a);}function qe(){var t,r,a,o,f,h;for(t=s,r=w(),a=[],o=fe();o!==e;)a.push(o),o=s,f=Ke(),f!==e?(f=fe(),f===e?(s=o,o=e):o=f):o=f;return o=Ke(),o===e&&(o=null),f=w(),h=et(),h!==e?t=a:(s=t,t=e),t;}function Ke(){var t,r,a,o;return u++,t=s,r=w(),i.charCodeAt(s)===59?(a=$,s++):(a=e,u===0&&g(Et)),a!==e?(o=w(),r=[r,a,o],t=r):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(xt)),t;}function fe(){var t,r,a,o,f,h;return u++,t=s,r=Ue(),r===e&&(r=null),a=w(),i.substr(s,2)===E?(o=E,s+=2):(o=e,u===0&&g(At)),o!==e?(f=w(),h=Je(),y=t,t=Bt(r,h)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(It)),t;}function Ue(){var t,r;return u++,t=ur(),u--,t===e&&(r=e,u===0&&g(re)),t;}function ur(){var t,r,a,o,f,h,S,Z;for(u++,t=s,r=s,a=[],o=Qe();o!==e;)a.push(o),o=s,f=s,h=w(),i.substr(s,2)===O?(S=O,s+=2):(S=e,u===0&&g(Rt)),S!==e?(Z=w(),h=[h,S,Z],f=h):(s=f,f=e),f!==e?(f=Qe(),f===e?(s=o,o=e):o=f):o=f;return a.length<1?(s=r,r=e):r=a,r!==e&&(y=t,r=Yt(r)),t=r,u--,t===e&&(r=e,u===0&&g(re)),t;}function Qe(){var t,r,a,o,f,h,S,Z;for(u++,t=s,r=s,a=[],o=ge();o!==e;)a.push(o),o=s,f=s,h=w(),i.substr(s,3)===v?(S=v,s+=3):(S=e,u===0&&g(Ot)),S!==e?(Z=w(),h=[h,S,Z],f=h):(s=f,f=e),f!==e?(f=ge(),f===e?(s=o,o=e):o=f):o=f;return a.length<1?(s=r,r=e):r=a,r!==e&&(y=t,r=Gt(r)),t=r,u--,t===e&&(r=e,u===0&&g(re)),t;}function ge(){var t,r,a,o,f,h;return u++,t=s,i.substr(s,3)===d?(r=d,s+=3):(r=e,u===0&&g(ue)),r!==e?(a=w(),i.substr(s,3)===d?(o=d,s+=3):(o=e,u===0&&g(ue)),o!==e?(f=w(),h=ge(),h!==e?t=h:(s=t,t=e)):(s=t,t=e)):(s=t,t=e),t===e&&(t=s,i.substr(s,3)===d?(r=d,s+=3):(r=e,u===0&&g(ue)),r!==e?(a=w(),o=He(),o!==e?(y=t,t=Zt(o)):(s=t,t=e)):(s=t,t=e),t===e&&(t=s,r=He(),r!==e?t=r:(s=t,t=e))),u--,t===e&&(r=e,u===0&&g(re)),t;}function He(){var t,r;return t=s,r=pe(),r!==e&&(y=t,r=_t(r)),t=r,t;}function Je(){var t,r,a,o,f,h,S;for(t=s,r=[],a=he(),a===e&&(a=de());a!==e;)r.push(a),a=s,o=s,f=w(),i.charCodeAt(s)===44?(h=p,s++):(h=e,u===0&&g(Ct)),h!==e?(S=w(),f=[f,h,S],o=f):(s=o,o=e),o!==e?(o=he(),o===e&&(o=de()),o===e?(s=a,a=e):a=o):a=o;return t=r,t;}function he(){var t,r,a,o;return u++,t=s,r=Be(),r!==e?(i.charCodeAt(s)===36?(a=A,s++):(a=e,u===0&&g(Mt)),a!==e?(o=pe(),o!==e?(y=t,t=Xt(r,o)):(s=t,t=e)):(s=t,t=e)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(We)),t;}function Be(){var t,r,a;if(u++,t=s,r=[],a=i.charAt(s),Oe.test(a)?s++:(a=e,u===0&&g(Ne)),a!==e)for(;a!==e;)r.push(a),a=i.charAt(s),Oe.test(a)?s++:(a=e,u===0&&g(Ne));else r=e;return r!==e?t=i.substring(t,s):t=r,u--,t===e&&(r=e,u===0&&g(We)),t;}function pe(){var t,r,a,o,f;if(u++,t=s,r=s,a=i.charAt(s),bt.test(a)?s++:(a=e,u===0&&g(kt)),a!==e){for(o=[],f=i.charAt(s),Ce.test(f)?s++:(f=e,u===0&&g(Te));f!==e;)o.push(f),f=i.charAt(s),Ce.test(f)?s++:(f=e,u===0&&g(Te));a=[a,o],r=a;}else s=r,r=e;return r!==e?t=i.substring(t,s):t=r,u--,t===e&&(r=e,u===0&&g(jt)),t;}function de(){var t,r,a,o;return u++,t=s,r=fr(),r!==e?(a=w(),o=Ge(),o!==e?(y=t,t=er(r,o)):(s=t,t=e)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(Wt)),t;}function fr(){var t,r,a,o,f,h;return u++,t=s,i.charCodeAt(s)===91?(r=H,s++):(r=e,u===0&&g(Tt)),r!==e?(a=w(),o=Ye(),o!==e?(f=w(),i.charCodeAt(s)===93?(h=F,s++):(h=e,u===0&&g(Pt)),h!==e?t=o:(s=t,t=e)):(s=t,t=e)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(Nt)),t;}function Ye(){var t,r,a;if(u++,t=s,r=[],a=i.charAt(s),Me.test(a)?s++:(a=e,u===0&&g(Pe)),a!==e)for(;a!==e;)r.push(a),a=i.charAt(s),Me.test(a)?s++:(a=e,u===0&&g(Pe));else r=e;return r!==e?t=i.substring(t,s):t=r,u--,t===e&&(r=e,u===0&&g(Ft)),t;}function Ge(){var t,r,a,o,f;for(u++,t=s,r=s,a=[],o=Ze();o!==e;)a.push(o),o=s,f=w(),f=Ze(),f===e?(s=o,o=e):o=f;if(r=i.substring(r,s),a=w(),o=_e(),o!==e?(y=s,f=tr(r,o),f?f=void 0:f=e,f!==e?(y=t,t=rr(r,o)):(s=t,t=e)):(s=t,t=e),t===e){for(t=s,r=s,a=[],o=me();o!==e;)a.push(o),o=s,f=w(),f=me(),f===e?(s=o,o=e):o=f;r=i.substring(r,s),y=t,r=sr(r),t=r;}return u--,t===e&&(r=e,u===0&&g(Dt)),t;}function Ze(){var t,r,a,o,f,h;return u++,t=s,r=s,u++,a=s,o=_e(),o!==e?(f=w(),h=et(),h===e&&(h=i.charAt(s),yt.test(h)?s++:(h=e,u===0&&g(zt))),h!==e?(o=[o,f,h],a=o):(s=a,a=e)):(s=a,a=e),u--,a===e?r=void 0:(s=r,r=e),r!==e?(a=me(),a!==e?t=a:(s=t,t=e)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(Vt)),t;}function me(){var t,r,a;if(t=s,r=[],a=i.charAt(s),je.test(a)?s++:(a=e,u===0&&g(Fe)),a!==e)for(;a!==e;)r.push(a),a=i.charAt(s),je.test(a)?s++:(a=e,u===0&&g(Fe));else r=e;return r!==e?t=i.substring(t,s):t=r,t;}function _e(){var t,r,a;return u++,t=s,r=Xe(),r!==e?(i.substr(s,2)===Re?(a=Re,s+=2):(a=e,u===0&&g(qt)),a!==e?(y=t,t=ir(r)):(s=t,t=e)):(s=t,t=e),t===e&&(t=s,r=Xe(),r!==e?(i.charCodeAt(s)===103?(a=wt,s++):(a=e,u===0&&g(Kt)),a===e&&(a=null),t=r):(s=t,t=e)),u--,t===e&&(r=e,u===0&&g(Lt)),t;}function Xe(){var t,r,a,o,f,h,S;if(u++,t=s,r=[],a=i.charAt(s),te.test(a)?s++:(a=e,u===0&&g(se)),a!==e)for(;a!==e;)r.push(a),a=i.charAt(s),te.test(a)?s++:(a=e,u===0&&g(se));else r=e;if(r!==e){if(a=s,i.charCodeAt(s)===46?(o=St,s++):(o=e,u===0&&g(Qt)),o!==e){if(f=s,h=[],S=i.charAt(s),te.test(S)?s++:(S=e,u===0&&g(se)),S!==e)for(;S!==e;)h.push(S),S=i.charAt(s),te.test(S)?s++:(S=e,u===0&&g(se));else h=e;h!==e?f=i.substring(f,s):f=h,f!==e?(o=[o,f],a=o):(s=a,a=e);}else s=a,a=e;a===e&&(a=null),y=t,t=nr();}else s=t,t=e;return u--,t===e&&(r=e,u===0&&g(Ut)),t;}function w(){var t,r;for(u++,t=[],r=i.charAt(s),ke.test(r)?s++:(r=e,u===0&&g(De));r!==e;)t.push(r),r=i.charAt(s),ke.test(r)?s++:(r=e,u===0&&g(De));return u--,r=e,u===0&&g(Ht),t;}function et(){var t,r;return t=s,u++,i.length>s?(r=i.charAt(s),s++):(r=e,u===0&&g(Jt)),u--,r===e?t=void 0:(s=t,t=e),t;}if(Y=m(),c.peg$library)return{peg$result:Y,peg$currPos:s,peg$FAILED:e,peg$maxFailExpected:ie,peg$maxFailPos:j};if(Y!==e&&s===i.length)return Y;throw Y!==e&&s<i.length&&g(lr()),Le(ie,j<i.length?i.charAt(j):null,j<i.length?G(j,j+1):G(j,j));}var dr={isTrackWeight:()=>!1},mr=new ne("PARSER_CONFIG_PROVIDER"),ae=(()=>{class i{injector=b(B);isTrackWeight(){return this.injector.get(mr,dr).isTrackWeight();}makeOptions(e,n={}){return{startRule:e,trackWeight:n.forceWeightTracking??this.isTrackWeight()};}parseCondition(e){return M(e,this.makeOptions("Condition"));}parseQuestion(e){return M(e,this.makeOptions("Question"));}parseItem(e){return M(e,this.makeOptions("Item"));}parseEffects(e){return M(e,this.makeOptions("Effects"));}parseRule(e){return M(e,this.makeOptions("Rule"));}parseRules(e){let n=e.split(/\r?\n/g).map(l=>l.replace(/#.*/,"")).join(`
`);try{return M(n,this.makeOptions("Rules"));}catch(l){let m=[];if(m.push("Error parsing rules"),l instanceof T){let $=l.location.start.line.toString(),E=l.location.start.column.toString();m.push(" at line ",$," column ",E),m.push(":",`
`,l.message);}else console.error(l);throw new Error(m.join(""));}}validateVariableName(e){M(e,this.makeOptions("VariableName"));}validateQuestionString(e){M(e,this.makeOptions("QuestionString"));}validateItemNameAndWeight(e){M(e,this.makeOptions("ItemNameAndWeight"));}validateCategoryName(e){M(e,this.makeOptions("CategoryName"));}forceParseWeight(e){return M(e,this.makeOptions("ItemNameAndWeight",{forceWeightTracking:!0})).weight??0;}static ɵfac=function(n){return new(n||i)();};static ɵprov=I({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})();var we=(()=>{class i{parser=b(ae);extractVariables(e){return e.reduce((n,l)=>[...n,...l.questions.map(m=>m.variable)],[]);}extractCategories(e){let n=new Set();for(let l of e)for(let m of l.items)n.add(m.category);return Array.from(n);}renameVariable(e,n,l){if(l instanceof Array)return l.map($=>this.renameVariable(e,n,$));if(l instanceof P)return l.variable===e?new P(l.question,n):l;if(l instanceof z)return new z(this.renameVariable(e,n,l.condition),l.questions.map($=>this.renameVariable(e,n,$)),l.items);if(l instanceof N)return l.variable===e?new N(n):l;if(l instanceof L)return new L(this.renameVariable(e,n,l.not));if(l instanceof q)return new q(this.renameVariable(e,n,l.left),this.renameVariable(e,n,l.right));if(l instanceof K)return new K(this.renameVariable(e,n,l.left),this.renameVariable(e,n,l.right));let m=l;throw new Error("Unknown item type: "+m);}filterActive(e){let n=e.rules.filter(m=>m.condition.evaluate(e.model)),l=this.extractVariables(n).reduce((m,$)=>tt(W({},m),{[$]:e.model[$]}),{[_.string]:!0});return n.length===e.rules.length?{model:l,rules:n}:this.filterActive({model:l,rules:n});}contains(e,n){let l=n.toLowerCase();if(e instanceof z)return this.contains(e.condition,n)||e.questions.some($=>this.contains($,n))||e.items.some($=>this.contains($,n));if(e instanceof P)return e.question.toLowerCase().includes(l)||e.variable.toLowerCase().includes(l);if(e instanceof U)return e.category.toLowerCase().includes(l)||e.name.toLowerCase().includes(l);if(e instanceof N)return e.variable.toLowerCase().includes(l);if(e instanceof L)return this.contains(e.not,n);if(e instanceof q)return this.contains(e.left,n)||this.contains(e.right,n);if(e instanceof K)return this.contains(e.left,n)||this.contains(e.right,n);let m=e;throw new Error("Unknown item type: "+m);}countItemsAndWeights(e){return e.reduce((n,l)=>l.items.reduce((m,$)=>{let E;return this.parser.isTrackWeight()?E=$.weight?1:0:E=this.parser.forceParseWeight($.name)?1:0,{items:m.items+1,weights:m.weights+E};},n),{items:0,weights:0});}static ɵfac=function(n){return new(n||i)();};static ɵprov=I({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})();var ft=`:-
   [Utility] Paper Tissues,
   [Utility] Backpack;

:- Are you traveling longer than 3 days? $longer;

longer :-
   Do you have a washer or laundry service available? $laundry,
   Do you want to work? $work,
   [Electronics] Phone Charger,
   [Electronics] Tablet;

longer AND NOT laundry :-
   [Clothes] enough Shirts,
   [Clothes] enough Underwear,
   [Clothes] spare Pants;

laundry :-
   [Clothes] 3 Shirts,
   [Clothes] 3 sets of Underwear;

work :-
   [Electronics] Laptop;

:-
   Will it be sunny? $sunny,
   Will it be rainy? $rainy,
   Are you traveling abroad? $abroad;

sunny :-
   Do you expect a high UV index? $uv,
   [Utility] Sunglasses,
   [Clothes] Short Pants;

rainy :-
   [Clothes] Rain Jacket;

NOT rainy :-
   [Clothes] Jacket;

NOT sunny :-
   [Clothes] Long Pants;

uv :-
   [Utility] Sunscreen;

abroad :-
   [Documents] Passport,
   [Documents] Visa;
`;var gt=`:-
   [N\xFCtzliches] Papiertaschent\xFCcher,
   [N\xFCtzliches] Rucksack;

:- Reist du l\xE4nger als 3 Tage? $longer;

longer :-
   Hast du eine Waschmaschine oder einen W\xE4scheservice zur Verf\xFCgung? $laundry,
   Willst du arbeiten? $work,
   [Elektronik] Handy-Ladeger\xE4t,
   [Elektronik] Tablet;

longer AND NOT laundry :-
   [Kleidung] genug Hemden,
   [Kleidung] genug Unterw\xE4sche,
   [Kleidung] Ersatzhosen;

laundry :-
   [Kleidung] 3 Hemden,
   [Kleidung] 3 S\xE4tze Unterw\xE4sche;

work :-
   [Elektronik] Laptop;

:-
   Wird es sonnig sein? $sunny,
   Wird es regnerisch sein? $rainy,
   Reist du ins Ausland? $abroad;

sunny :-
   Erwartest du einen hohen UV-Index? $uv,
   [N\xFCtzliches] Sonnenbrille,
   [Kleidung] Kurze Hosen;

rainy :-
   [Kleidung] Regenjacke;

NOT rainy :-
   [Kleidung] Jacke;

NOT sunny :-
   [Kleidung] Lange Hosen;

uv :-
   [N\xFCtzliches] Sonnencreme;

abroad :-
   [Dokumente] Reisepass,
   [Dokumente] Visum;
`;var Se=new ne("RULES_TEMPLATE");function vr(i){return i.startsWith("de")?gt:ft;}function Zr(){return it([{provide:Se,useFactory:vr,deps:[nt]}]);}function oe(i,c){let e=i.getItem("state"),n;if(e){let l=JSON.parse(e);n=W(W({},c),l);}else n=W({},c);return n;}function ht(i,c){if(typeof i!=typeof c)return!1;if(i&&c&&typeof i=="object"){let e=Object.keys(i),n=Object.keys(c);return e.length===n.length&&e.every(l=>ht(i[l],c[l]));}return i===c;}function $r(i,c){let e=Object.keys(c).filter(n=>!ht(i[n],c[n])).map(n=>[n,i[n]]);return e.length===0?null:Object.fromEntries(e);}function le(i,c,e){let n=$r(c,e);n===null?i.removeItem("state"):i.setItem("state",JSON.stringify(n));}var pt=["en","de"],X={answers:{},checkedItems:[],collapsedCategories:[],rules:void 0,fadeOutDisabledRules:!1,highlightVariableStatus:!1,refactorVariables:!0,categorySorting:"alphabetically",trackWeight:!1,answersLocked:!1,theme:"system",fontSize:"normal",language:"auto",exportReminder:!1,lastExportHash:"",lastExportDate:0},be=Object.keys(X),ce=(()=>{class i{state=oe(localStorage,X);injector=b(B);signalMap=new Map();constructor(){this.loadLegacyState(),this.initializeSignals();}initializeSignals(){for(let e of be){let n=k(this.state[e]);V(()=>{let l=n();l!==this.state[e]&&(this.state[e]=l,this.persist());},{manualCleanup:!0,injector:this.injector}),this.signalMap.set(e,n);}}loadLegacyState(){if(localStorage.getItem("answers")&&(this.state.answers=JSON.parse(localStorage.getItem("answers")),localStorage.removeItem("answers")),localStorage.getItem("checkedItems")&&(this.state.checkedItems=JSON.parse(localStorage.getItem("checkedItems")),localStorage.removeItem("checkedItems")),localStorage.getItem("collapsedCategories")&&(this.state.collapsedCategories=JSON.parse(localStorage.getItem("collapsedCategories")),localStorage.removeItem("collapsedCategories")),localStorage.getItem("rules")&&(this.state.rules=localStorage.getItem("rules"),localStorage.removeItem("rules")),localStorage.getItem("config")){let e=JSON.parse(localStorage.getItem("config"));this.state.fadeOutDisabledRules=e.fadeOutDisabledRules,this.state.trackWeight=e.trackWeight,this.state.answersLocked=e.answersLocked,this.state.theme=e.theme,this.state.language=e.language,localStorage.removeItem("config");}this.persist();}persist(){le(localStorage,this.state,X);}handles(e){return be.includes(e);}signal(e){return this.signalMap.get(e);}set(e,n){this.signal(e).set(n);}get(e){return this.signal(e)();}reset(){this.state=W({},X),this.persist(),be.forEach(e=>{this.signal(e).set(X[e]);});}static ɵfac=function(n){return new(n||i)();};static ɵprov=I({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})();var dt=(()=>{class i{state=b(ce);parser=b(ae);refactor=b(we);rulesTemplate=b(Se);signalMap=new Map();constructor(){this.initializeSignals();}initializeSignals(){this.signalMap.set("isMobile",x(()=>{let p=navigator.userAgent;return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(p);}));let e=k(window.scrollY);window.addEventListener("scroll",()=>{e.set(window.scrollY);}),this.signalMap.set("scrollY",e.asReadonly()),this.signalMap.set("preferredLanguage",x(()=>{let p=this.state.signal("language")();return p==="auto"?navigator.languages.map(F=>F.split("-")[0]).find(F=>pt.includes(F))??"en":p;})),this.signalMap.set("rulesContainComments",x(()=>{let p=this.state.signal("rules")();return!!p&&p.includes("#");}));let n=x(()=>{let p=this.state.signal("rules")();return p||this.rulesTemplate;});this.signalMap.set("rulesOrTemplate",n);let l=x(()=>{try{return{parsedRules:this.parser.parseRules(n()),ruleParserError:""};}catch(p){p instanceof Error?console.warn(p.message):console.error(p);let A=p instanceof Error?p.message:"An unknown error occurred";return{parsedRules:[],ruleParserError:A};}}),m=x(()=>{let{ruleParserError:p,parsedRules:A}=l();if(!p){let{items:H,weights:F}=this.refactor.countItemsAndWeights(A);return F/H;}return 0;});this.signalMap.set("percentageOfItemsWithWeights",m);let $=x(()=>l().parsedRules);this.signalMap.set("parsedRules",$),this.signalMap.set("ruleParserError",x(()=>l().ruleParserError)),this.signalMap.set("categories",x(()=>this.refactor.extractCategories($()))),this.signalMap.set("variables",x(()=>this.refactor.extractVariables($())));let E=x(()=>this.refactor.filterActive({rules:$(),model:this.state.signal("answers")()})),O=x(()=>E().rules);this.signalMap.set("activeRules",O),this.signalMap.set("activeAnswers",x(()=>E().model)),this.signalMap.set("activeQuestions",x(()=>O().flatMap(p=>p.questions))),this.signalMap.set("activeItems",x(()=>O().flatMap(p=>p.items)));let v=x(()=>wr(n()).toString(16));this.signalMap.set("rulesHash",v);let d=k(new Date().getTime());this.signalMap.set("lastRulesAction",d.asReadonly()),V(()=>{n(),d.set(new Date().getTime());}),this.signalMap.set("exportFileName",x(()=>{let p=new Date(d()).toISOString().replace(/\..*$/,"").replace(/[T:]/g,"-"),A=v();return`travel-packlist-rules-${p}-${A}.txt`;})),this.signalMap.set("exportNeeded",x(()=>{let p=this.signal("rulesHash")(),A=this.state.signal("lastExportHash")(),H=p!==A;return!!this.state.signal("rules")()&&H;}));}handles(e){return this.signalMap.has(e);}signal(e){return this.signalMap.get(e);}get(e){return this.signal(e)();}static ɵfac=function(n){return new(n||i)();};static ɵprov=I({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})(),wr=function(i,c=0){let e=3735928559^c,n=1103547991^c;for(let l=0,m;l<i.length;l++)m=i.charCodeAt(l),e=Math.imul(e^m,2654435761),n=Math.imul(n^m,1597334677);return e=Math.imul(e^e>>>16,2246822507),e^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(e^e>>>13,3266489909),4294967296*(2097151&n)+(e>>>0);};var xe={rulesMode:"view",filterRulesQuery:void 0},ye=Object.keys(xe),mt=(()=>{class i{route=b(ot);router=b(lt);signalMap=new Map();constructor(){for(let e of ye)this.signalMap.set(e,this.createSignal(e));}createSignal(e){let n=k(void 0);return this.router.events.pipe(st(l=>l instanceof at),rt(()=>this.route.snapshot.queryParams[e]??xe[e])).subscribe(l=>{l!==""&&n.set(l);}),V(()=>{let l=n()||void 0;l===xe[e]&&(l=void 0),this.route.snapshot.queryParams[e]!==l&&this.router.navigate([],{queryParams:{[e]:l},queryParamsHandling:"merge",relativeTo:this.route,replaceUrl:!0});}),n;}handles(e){return ye.includes(e);}signal(e){return this.signalMap.get(e);}get(e){return this.signal(e)();}set(e,n){this.signal(e).set(n);}reset(){for(let e of ye)this.signal(e).set(void 0);}static ɵfac=function(n){return new(n||i)();};static ɵprov=I({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})();var ee={clipboardItems:[],clipboardQuestions:[]},Ee=Object.keys(ee),vt=(()=>{class i{state=oe(sessionStorage,ee);injector=b(B);signalMap=new Map();constructor(){this.initializeSignals();}initializeSignals(){for(let e of Ee){let n=k(this.state[e]);V(()=>{let l=n();l!==this.state[e]&&(this.state[e]=l,this.persist());},{manualCleanup:!0,injector:this.injector}),this.signalMap.set(e,n);}}persist(){le(sessionStorage,this.state,ee);}handles(e){return Ee.includes(e);}signal(e){return this.signalMap.get(e);}set(e,n){this.signal(e).set(n);}get(e){return this.signal(e)();}reset(){this.state=W({},ee),this.persist(),Ee.forEach(e=>{this.signal(e).set(ee[e]);});}static ɵfac=function(n){return new(n||i)();};static ɵprov=I({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})();var Ae={serviceWorkerStatus:"init"},Ie=Object.keys(Ae),$t=(()=>{class i{signalMap=new Map();constructor(){this.initializeSignals();}initializeSignals(){for(let e of Ie){let n=k(Ae[e]);this.signalMap.set(e,n);}}handles(e){return Ie.includes(e);}signal(e){return this.signalMap.get(e);}get(e){return this.signal(e)();}set(e,n){this.signal(e).set(n);}reset(){for(let e of Ie)this.signal(e).set(Ae[e]);}static ɵfac=function(n){return new(n||i)();};static ɵprov=I({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})();var ks=(()=>{class i{persistent=b(ce);router=b(mt);session=b(vt);transient=b($t);derived=b(dt);get(e){if(this.persistent.handles(e))return this.persistent.get(e);if(this.router.handles(e))return this.router.get(e);if(this.session.handles(e))return this.session.get(e);if(this.transient.handles(e))return this.transient.get(e);if(this.derived.handles(e))return this.derived.get(e);throw new Error(`Key ${e} not handled in state`);}signal(e){if(this.persistent.handles(e))return this.persistent.signal(e);if(this.router.handles(e))return this.router.signal(e);if(this.session.handles(e))return this.session.signal(e);if(this.transient.handles(e))return this.transient.signal(e);if(this.derived.handles(e))return this.derived.signal(e);throw new Error(`Key ${e} not handled in state`);}set(e,n){if(this.persistent.handles(e))this.persistent.signal(e).set(n);else if(this.router.handles(e))this.router.set(e,n);else if(this.session.handles(e))this.session.set(e,n);else if(this.transient.handles(e))this.transient.set(e,n);else throw this.derived.handles(e)?new Error("Key is derived and cannot be set"):new Error(`Key ${e} not handled in state`);}reset(){this.persistent.reset(),this.session.reset(),this.router.reset();}static ɵfac=function(n){return new(n||i)();};static ɵprov=I({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})();export{gr as a,ve as b,z as c,P as d,U as e,N as f,Ar as g,_ as h,L as i,q as j,K as k,T as l,mr as m,ae as n,we as o,Zr as p,ks as q};/**i18n:cbcf01d4640d52ad6821130aa8bde718125de417ff622aa7dfac4aa297a95122*/