import{c as L,d as k,e as R,g as l,h as W,i as se,j as F,k as ee,l as te,m as M,n as x,o as ie}from"./chunk-ed13faaa.js";import{b as _e}from"./chunk-dd239dd1.js";import{f as ce,g as le,h as pe,p as q}from"./chunk-42864eeb.js";import"./chunk-d2b0e2d3.js";import{e as E,s as me}from"./chunk-9298e721.js";import{d as re}from"./chunk-5bce0458.js";import"./chunk-250d1157.js";import{Aa as Z,Ac as T,Cb as _,Fb as O,Gb as N,Hb as c,Ib as s,Ja as w,Jb as u,Lb as y,Mb as V,Nb as G,Ob as oe,Rb as ae,Sb as P,Tb as o,_ as ne,_a as r,bc as C,cc as b,dc as B,ea as S,ec as z,fb as $,lb as I,na as g,oa as f,qb as m,xb as v,yb as A,zb as Q}from"./chunk-fac6b1c2.js";import{a as H,b as J}from"./chunk-cb4c040a.js";var de={opacity:0,transform:"scale(0.9)",height:0,padding:0,margin:"-2px"},ue={opacity:1,transform:"scale(1)",height:"*",padding:"*",margin:"*"},U=ee([l(de),ie(50,[k("0.3s ease-in",l(ue))])]),X=ee([l(ue),ie(50,[k("0.3s ease-in",l(de))])]);function Y(t){return`${t.category}-${t.name}`;}var D=(()=>{class t{router=S(re);state=S(me);isAccessibleMode=T(()=>this.state.config.accessibility()==="accessible");numberOfItems=T(()=>this.state.active.items().length);checkedItems=this.state.packlist.checkedItems;collapsedCategories=this.state.packlist.collapsedCategories;numberOfCheckedItems=T(()=>{let e=this.state.active.items().map(Y);return this.checkedItems().filter(i=>e.includes(i)).length;});isCategoryCollapsed(e){return this.collapsedCategories().includes(e);}toggleCheckedItem=e=>{let i=Y(e);this.checkedItems().includes(i)?this.checkedItems.update(n=>n.filter(p=>p!==i)):this.checkedItems.update(n=>[...n,i]);};toggleCategoryCollapse=e=>{this.collapsedCategories().includes(e)?this.collapsedCategories.update(i=>i.filter(n=>n!==e)):this.collapsedCategories.update(i=>[...i,e]);};categoriesOrderBy=T(()=>this.state.config.categorySorting()==="definition"?()=>0:(i,n)=>i.localeCompare(n));packlist=T(()=>{let e=this.state.active.items(),i=this.checkedItems(),n=e.reduce((h,d)=>(h[d.category]||(h[d.category]={name:d.category,items:[],checked:0,collapsed:this.isCategoryCollapsed(d.category),totalWeight:0,checkedWeight:0}),h[d.category].items.push(J(H({},d),{checked:i.includes(Y(d))})),i.includes(Y(d))&&(h[d.category].checked++,h[d.category].checkedWeight+=d.weight??0),h[d.category].totalWeight+=d.weight??0,h),{}),p=Object.entries(n).map(h=>h[1]),Se=this.categoriesOrderBy();return p.sort((h,d)=>Se(h.name,d.name)),p;});totalWeight=T(()=>this.packlist().reduce((e,i)=>e+i.totalWeight,0));checkedWeight=T(()=>this.packlist().reduce((e,i)=>e+i.checkedWeight,0));rulesAvailable=T(()=>this.state.rules.parsed().length>0);isAnswersLockActive=this.state.packlist.answersLocked;model=this.state.packlist.answers;activeQuestions=this.state.active.questions;questions=T(()=>this.activeQuestions().filter(e=>!this.isAnswersLockActive()||this.model()[e.variable]));questionsAvailable=T(()=>this.activeQuestions().length>0);toggleQuestion=e=>{this.isAnswersLockActive()||this.model.update(i=>J(H({},i),{[e.variable]:!i[e.variable]}));};isQuestionActive=e=>this.model()[e.variable];toggleAnswersLock=()=>{this.isAnswersLockActive.update(e=>!e);};trackWeight=this.state.config.trackWeight;goToRulesEdit=()=>{this.router.navigate(["/rules"]).then(()=>{this.state.router.rulesMode.set("edit");});};goToConfigImport=()=>{this.router.navigate(["/config"],{fragment:"import"});};static ɵfac=function(i){return new(i||t)();};static ɵprov=ne({token:t,factory:t.ɵfac,providedIn:"root"});}return t;})();function j(t,a){return E(t,void 0,1)+" / "+E(a,void 0,1);}function Ae(t,a){t&1&&u(0,"app-icon-checkmark");}function ke(t,a){if(t&1&&C(0),t&2){let e=o();z(" ",e.count()," / ",e.total(),`
`);}}var ge=(()=>{class t{count=Z(0);total=Z(0);static ɵfac=function(i){return new(i||t)();};static ɵcmp=I({type:t,selectors:[["app-items-status"]],inputs:{count:[1,"count"],total:[1,"total"]},decls:2,vars:1,template:function(i,n){i&1&&m(0,Ae,1,0,"app-icon-checkmark")(1,ke,1,2),i&2&&_(n.count()===n.total()?0:1);},dependencies:[q],encapsulation:2,changeDetection:0});}return t;})();var fe=(t,a)=>a.name;function xe(t,a){t&1&&(c(0,"div",1)(1,"p",4),oe(2,0),s()());}function Ie(t,a){if(t&1&&C(0),t&2){let e=o(2).$implicit,i=o();B(" (",i.serializeWeight(e.checkedWeight,void 0,1),") ");}}function Pe(t,a){if(t&1&&C(0),t&2){let e=o(2).$implicit,i=o();B(" (",i.serializeWeightPartition(e.checkedWeight,e.totalWeight),") ");}}function ve(t,a){if(t&1&&(c(0,"span",9),m(1,Ie,1,1)(2,Pe,1,1),s()),t&2){let e=o().$implicit;r(),_(e.checkedWeight===e.totalWeight?1:2);}}function ye(t,a){if(t&1&&(c(0,"span",13),C(1),s()),t&2){let e=o().$implicit,i=o(3);r(),b(i.serializeWeight(e.weight));}}function Ee(t,a){if(t&1){let e=y();c(0,"div",11)(1,"div",12),P("click",function(){let n=g(e).$implicit,p=o(3);return f(p.toggleCheckedItem(n));})("keypress",function(){let n=g(e).$implicit,p=o(3);return f(p.toggleCheckedItem(n));}),C(2),m(3,ye,2,1,"span",13),s()();}if(t&2){let e=a.$implicit,i=o(3);r(),Q("text-checked-item",e.checked),A("@animateStrikeThrough",e.checked),v("aria-checked",e.checked),r(),B(" ",e.name," "),r(),_(e.weight&&i.trackWeight()?3:-1);}}function Fe(t,a){if(t&1&&O(0,Ee,4,6,"div",11,fe),t&2){let e=o().$implicit;N(e.items);}}function De(t,a){if(t&1){let e=y();c(0,"div",3)(1,"div",5),P("click",function(){let n=g(e).$implicit,p=o();return f(p.toggleCategoryCollapse(n.name));}),c(2,"div",6),u(3,"app-icon-key-right",7),c(4,"span",8),C(5),s(),m(6,ve,3,1,"span",9),s(),u(7,"app-items-status",10),s(),m(8,Fe,2,0),s();}if(t&2){let e=a.$implicit,i=o();A("@animateItems",e),v("aria-label",e.name),r(3),A("@animateChevron",e.collapsed),r(2),b(e.name),r(),_(i.trackWeight()&&e.totalWeight?6:-1),r(),A("count",e.checked)("total",e.items.length),r(),_(e.collapsed?-1:8);}}var be=L("animateCategory",[F("* <=> *",[R([x('div[role="list"]:enter',M(U),{optional:!0}),x('div[role="list"]:leave',M(X),{optional:!0}),x("@*",[te()],{optional:!0})])])]),Le=L("animateItems",[F("* <=> *",[R([x('div[role="listitem"]:enter',[l({opacity:0,height:0}),k("0.2s ease-in",l({opacity:1,height:"*"}))],{optional:!0}),x('div[role="listitem"]:leave',[l({opacity:1,height:"*"}),k("0.2s ease-in",l({opacity:0,height:0}))],{optional:!0}),x("@*",[te()],{optional:!0})])])]),we=L("animateChevron",[W("true",l({transform:"rotate(0)"})),W("false",l({transform:"rotate(90deg)"})),F("false => true",k("0.5s ease-in-out")),F("true => false",k("0.5s ease-in-out",se([l({transform:"rotate(0)"}),l({transform:"rotate(100deg)"}),l({transform:"rotate(80deg)"})])))]),$e=L("animateStrikeThrough",[W("true",l({textDecorationColor:"inherit"})),W("false",l({textDecorationColor:"transparent"})),F("false => true",k("0.2s ease-in-out"))]),Ce=(()=>{class t{facade=S(D);numberOfItems=this.facade.numberOfItems;packlist=this.facade.packlist;trackWeight=this.facade.trackWeight;toggleCategoryCollapse=this.facade.toggleCategoryCollapse;toggleCheckedItem=this.facade.toggleCheckedItem;serializeWeight=E;serializeWeightPartition=j;animationsDisabled=$(!0);constructor(){w(()=>{this.animationsDisabled.set(this.facade.isAccessibleMode());});}static ɵfac=function(i){return new(i||t)();};static ɵcmp=I({type:t,selectors:[["app-display-items"]],decls:4,vars:3,consts:()=>{let e;return e="No items available.",[e,[1,"flex","flex-col","items-center"],[1,"contents"],["role","list",1,"card","mb-1","overflow-hidden"],[1,"text-center"],["aria-hidden","true",1,"accessible-content","flex","items-center","justify-between",3,"click"],[1,"flex","items-center","gap-1"],[1,"h-6","w-6"],[1,"font-bold","italic"],[1,"text-sm"],[3,"count","total"],["role","listitem"],["role","checkbox","tabindex","0",1,"flex","select-none","items-center","justify-between",3,"click","keypress"],[1,"italic"]];},template:function(i,n){i&1&&(m(0,xe,3,0,"div",1),c(1,"div",2),O(2,De,9,8,"div",3,fe),s()),i&2&&(_(n.numberOfItems()?-1:0),r(),A("@animateCategory",n.packlist())("@.disabled",n.animationsDisabled()),r(),N(n.packlist()));},dependencies:[ge,pe],encapsulation:2,data:{animation:[be,Le,we,$e]},changeDetection:0});}return t;})();var Me=(t,a)=>a.question;function Oe(t,a){if(t&1){let e=y();c(0,"div",1)(1,"p",2),V(2,0),c(3,"button",3),P("click",function(){g(e);let n=o();return f(n.goToRulesEdit());}),s(),G(),s()();}}function Ne(t,a){t&1&&u(0,"app-icon-checkmark");}function Re(t,a){if(t&1){let e=y();c(0,"div",8),P("click",function(){let n=g(e).$implicit,p=o(2);return f(p.toggleQuestion(n));})("keypress",function(){let n=g(e).$implicit,p=o(2);return f(p.toggleQuestion(n));}),c(1,"span",9),C(2),s(),m(3,Ne,1,0,"app-icon-checkmark"),s();}if(t&2){let e=a.$implicit,i=o(2);Q("disabled",i.isAnswersLockActive()),v("aria-checked",i.isQuestionActive(e))("aria-disabled",i.isAnswersLockActive())("aria-label",e.question),r(2),b(e.question),r(),_(i.isQuestionActive(e)?3:-1);}}function We(t,a){t&1&&u(0,"app-icon-lock",7);}function Ke(t,a){t&1&&u(0,"app-icon-lock-open",7);}function Qe(t,a){if(t&1){let e=y();c(0,"div"),O(1,Re,4,7,"div",4,Me),s(),c(3,"div",5)(4,"button",6),P("click",function(){g(e);let n=o();return f(n.toggleAnswersLock());})("keypress",function(){g(e);let n=o();return f(n.toggleAnswersLock());}),m(5,We,1,0,"app-icon-lock",7)(6,Ke,1,0,"app-icon-lock-open",7),s()();}if(t&2){let e=o();A("@.disabled",e.animationsDisabled())("@animateQuestions",e.questions()),r(),N(e.questions()),r(3),v("aria-pressed",e.isAnswersLockActive()),r(),_(e.isAnswersLockActive()?5:6);}}var Ve=L("animateQuestions",[F("* <=> *",[R([x("div.card:enter",M(U),{optional:!0}),x("div.card:leave",M(X),{optional:!0}),x("app-icon-checkmark:enter",[l({transform:"translateX(200%)"}),k("0.3s ease-in",l({transform:"translateX(0)"}))],{optional:!0})])])]),Te=(()=>{class t{facade=S(D);questions=this.facade.questions;questionsAvailable=this.facade.questionsAvailable;isQuestionActive=this.facade.isQuestionActive;isAnswersLockActive=this.facade.isAnswersLockActive;toggleAnswersLock=this.facade.toggleAnswersLock;toggleQuestion=this.facade.toggleQuestion;goToRulesEdit=this.facade.goToRulesEdit;animationsDisabled=$(!0);constructor(){w(()=>{this.animationsDisabled.set(this.facade.isAccessibleMode());});}static ɵfac=function(i){return new(i||t)();};static ɵcmp=I({type:t,selectors:[["app-display-questions"]],decls:2,vars:1,consts:()=>{let e;e=" No questions available, please "+"\uFFFD#3\uFFFD"+" create "+"\uFFFD/#3\uFFFD"+" some. ";let i;return i="Lock answers",[e,[1,"flex","flex-col","items-center"],[1,"text-center"],["type","button",1,"link","inline","p-0","underline",3,"click"],["role","checkbox","tabindex","0",1,"card","mb-1","flex","flex-row","items-center","justify-between","overflow-hidden",3,"disabled"],[1,"flex","justify-center"],["type","button","role","button","aria-label",i,1,"link",3,"click","keypress"],[1,"h-6","w-6"],["role","checkbox","tabindex","0",1,"card","mb-1","flex","flex-row","items-center","justify-between","overflow-hidden",3,"click","keypress"],["aria-hidden","true",1,"select-none","font-bold"]];},template:function(i,n){i&1&&m(0,Oe,4,0,"div",1)(1,Qe,7,4),i&2&&_(n.questionsAvailable()?1:0);},dependencies:[ce,le,q],encapsulation:2,data:{animation:[Ve]},changeDetection:0});}return t;})();function Ge(t,a){if(t&1&&u(0,"cmp-progress",2),t&2){let e=o();A("value",e.facade.checkedWeight())("max",e.facade.totalWeight())("animationDuration",e.animationDuration()),v("aria-label",e.statusLabelText());}}function Be(t,a){if(t&1&&u(0,"cmp-progress",3),t&2){let e=o();A("value",e.facade.numberOfCheckedItems())("max",e.facade.numberOfItems())("animationDuration",e.animationDuration()),v("aria-label",e.statusLabelText());}}function ze(t,a){if(t&1&&(c(0,"span"),C(1),s()),t&2){let e=o();r(),b(e.serializeWeightPartition(e.facade.checkedWeight(),e.facade.totalWeight()));}}var he=(()=>{class t{facade=S(D);serializeWeightPartition=j;statusLabelText=T(()=>{let e=this.facade.totalWeight(),i=this.facade.checkedWeight(),n=this.facade.numberOfCheckedItems().toString(),p=this.facade.numberOfItems().toString();return this.facade.trackWeight()?"You have packed "+E(i,void 0,1)+" out of "+E(e,void 0,1)+" by packing "+n+" out of "+p+" items.":"You have packed "+n+" out of "+p+" items.";});animationDuration=$(0);constructor(){w(()=>{this.animationDuration.set(this.facade.isAccessibleMode()?0:500);});}static ɵfac=function(i){return new(i||t)();};static ɵcmp=I({type:t,selectors:[["app-packlist-status"]],decls:8,vars:4,consts:()=>{let e;e="weight packing progress";let i;return i="item packing progress",[[1,"card","mb-1"],[1,"mb-1","flex"],["title",e,"aria-live","polite",1,"grow",3,"value","max","animationDuration"],["title",i,"aria-live","polite",1,"grow",3,"value","max","animationDuration"],["aria-hidden","true",1,"flex","flex-col","items-center"]];},template:function(i,n){i&1&&(c(0,"div",0)(1,"div",1),m(2,Ge,1,4,"cmp-progress",2)(3,Be,1,4,"cmp-progress",3),s(),c(4,"div",4)(5,"span"),C(6),s(),m(7,ze,2,1,"span"),s()()),i&2&&(r(2),_(n.facade.trackWeight()?2:3),r(4),z("",n.facade.numberOfCheckedItems()," / ",n.facade.numberOfItems(),""),r(),_(n.facade.trackWeight()?7:-1));},dependencies:[_e],encapsulation:2,changeDetection:0});}return t;})();function qe(t,a){t&1&&u(0,"app-display-questions")(1,"app-packlist-status")(2,"app-display-items");}function Ue(t,a){if(t&1){let e=y();c(0,"div",1)(1,"p",2),V(2,0),c(3,"button",3),P("click",function(){g(e);let n=o();return f(n.goToConfigImport());}),s(),c(4,"button",3),P("click",function(){g(e);let n=o();return f(n.goToRulesEdit());}),s(),G(),s()();}}var Wt=(()=>{class t{facade=S(D);rulesAvailable=this.facade.rulesAvailable;goToRulesEdit=this.facade.goToRulesEdit;goToConfigImport=this.facade.goToConfigImport;static ɵfac=function(i){return new(i||t)();};static ɵcmp=I({type:t,selectors:[["app-packlist"]],decls:2,vars:1,consts:()=>{let e;return e=" No rules available, please "+"\uFFFD#3\uFFFD"+" import "+"[\uFFFD/#3\uFFFD|\uFFFD/#4\uFFFD]"+" or "+"\uFFFD#4\uFFFD"+" create "+"[\uFFFD/#3\uFFFD|\uFFFD/#4\uFFFD]"+" some. ",e=ae(e),[e,[1,"flex","flex-col","items-center"],[1,"text-center"],["type","button",1,"link","inline","p-0","underline",3,"click"]];},template:function(i,n){i&1&&m(0,qe,3,0)(1,Ue,5,0,"div",1),i&2&&_(n.rulesAvailable()?0:1);},dependencies:[Ce,Te,he],encapsulation:2,changeDetection:0});}return t;})();export{Wt as PacklistComponent};/**i18n:015bdb808d2848989c3b91cbfc9cad629f58047ff6617f7ac5d9a7ed8c5b6894*/