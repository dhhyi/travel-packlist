import{a as ze}from"./chunk-6b36d1d2.js";import"./chunk-10c1202e.js";import"./chunk-b855f34f.js";import{c as ke,d as se,e as Ie,g as M,j as ae,k as Me,m as le,n as N}from"./chunk-1702a048.js";import{a as O}from"./chunk-c48277f1.js";import{a as He,b as y}from"./chunk-0fcc4e1b.js";import{B as je,o as Fe,t as Ve,y as Ue}from"./chunk-48a2a311.js";import{k as We,m as $e,s as Ge,t as Be,u as c}from"./chunk-71f174f1.js";import{h as Pe,i as Re,l as Ne,m as Q,o as Oe,p as k,q as Le,r as De,s as xe}from"./chunk-9e2f1176.js";import{a as J}from"./chunk-32f3b8a5.js";import{$ as W,A as w,B as h,Fb as Y,Fc as q,G as E,Lb as Ae,Oa as P,Pb as T,Q as f,Ra as we,Rb as Z,T as j,Ua as be,V as g,W as fe,Wa as ve,Y as d,Za as Ce,Zb as Ee,aa as te,ba as s,c as x,ca as $,e as F,ga as G,gb as z,h as V,ha as B,ib as Te,ja as S,ka as H,mb as b,oa as ge,ob as oe,pa as ie,qa as _e,qb as X,r as m,rb as K,tc as Se,wb as ne,wc as R,xb as _,xc as C,y as U,yb as v,z as me,za as ye,zb as re}from"./chunk-9437341d.js";import{a as he}from"./chunk-bdc09bad.js";function pt(t,n){if(t&1){let e=Y();_(0,"button",12),T("click",function(){G(e);let o=Z();return B(o.go("rules-documentation"));}),v();}}function dt(t,n){if(t&1){let e=Y();_(0,"button",13),T("click",function(){G(e);let o=Z();return B(o.go("back"));}),v();}}function ut(t,n){if(t&1){let e=Y();_(0,"button",14),T("click",function(){G(e);let o=Z();return B(o.go("config"));}),v();}}var Xe=Me([N(":enter, :leave",M({position:"fixed",width:`${(Math.min(window.innerWidth,600)-18).toFixed(0)}px`}),{optional:!0}),N(":enter",M({opacity:0,transform:"{{ from }}"}),{optional:!0}),Ie([N(":leave",[se("{{ duration }}",M({opacity:0,transform:"{{ to }}"}))],{optional:!0}),N(":enter",[se("{{ duration }}",M({opacity:1,transform:"translateX(0) translateY(0) scale(1)"}))],{optional:!0})])],{params:{duration:"0.3s ease-in-out"}}),ht=ke("routeTransition",[ae(":decrement",[le(Xe,{params:{from:"translateX(-100%) scale(1)",to:"translateX(100%) scale(0.9)"}})]),ae(":increment",[le(Xe,{params:{from:"translateX(100%) scale(1)",to:"translateX(-100%) scale(0.9)"}})])]),Ke=(()=>{class t{state=s(c);overlayVisible=ie(!1);router=s(k);routeData=Ne(this.router.events.pipe(h(e=>e instanceof Q),m(()=>this.router.routerState.root.snapshot.firstChild?.data)));hierarchy=R(()=>this.routeData()?.hierarchy);scrollTopVisible=R(()=>this.state.browser.scrollY()>100);disableAnimations=ie(!0);displayRuleHelpLink=R(()=>this.routeData()?.ruleHelp);displayConfigLink=R(()=>this.routeData()?.config);displayHistoryBackLink=R(()=>this.routeData()?.historyBack);constructor(){Te({write:()=>{this.disableAnimations.set(!this.state.config.animations());}});}scrollTop(){window.scrollTo({top:0,behavior:"smooth"});}go=this.state.router.go;static ɵfac=function(i){return new(i||t)();};static ɵcmp=Ce({type:t,selectors:[["app-root"]],hostAttrs:[1,"flex","h-full","flex-col"],decls:13,vars:9,consts:()=>{let e;e="Gehe zur TravelPacklist";let i;i="Zur Regelformat Hilfe";let o;o="Zur\xFCck";let r;r="Gehe zu Konfiguration";let a;a="Nach oben scrollen";let l;return l="TravelPacklist",[l,["role","navigation",1,"flex","h-[3rem]","min-h-[3rem]","flex-row","items-center","pb-2",3,"inert"],["type","button","aria-label",e,"role","banner",1,"link","grow","justify-start","pl-0",3,"click"],["aria-hidden","true","src","icon.svg",1,"h-8"],[1,"text-xl","font-bold"],["iconHelp","","iconClass","h-6 w-6","type","button","role","link","aria-label",i,1,"link","pr-2"],["iconArrowBack","","iconClass","h-6 w-6","type","button","role","link","aria-label",o,1,"link","pr-2"],["iconCog","","iconClass","h-6 w-6","type","button","role","link","aria-label",r,1,"link","pr-2"],[1,"flex","grow","flex-col","pb-[3.5rem]",3,"inert"],[1,"e2e-hidden","fixed","bottom-2","left-1/2","-translate-x-1/2"],["iconArrowUpward","","iconClass","h-6 w-6","type","button","aria-label",a,1,"flex","w-full","items-center","justify-center","rounded-3xl","border","border-slate-700","shadow-xl","dark:border-slate-300",3,"click"],[3,"overlayVisible"],["iconHelp","","iconClass","h-6 w-6","type","button","role","link","aria-label",i,1,"link","pr-2",3,"click"],["iconArrowBack","","iconClass","h-6 w-6","type","button","role","link","aria-label",o,1,"link","pr-2",3,"click"],["iconCog","","iconClass","h-6 w-6","type","button","role","link","aria-label",r,1,"link","pr-2",3,"click"]];},template:function(i,o){i&1&&(_(0,"nav",1)(1,"button",2),T("click",function(){return o.go("packlist");}),re(2,"img",3),_(3,"h1",4),Ae(4,0),v()(),X(5,pt,1,0,"button",5),X(6,dt,1,0,"button",6),X(7,ut,1,0,"button",7),v(),_(8,"div",8),re(9,"router-outlet"),_(10,"div",9)(11,"button",10),T("click",function(){return o.scrollTop();}),v()()(),_(12,"app-dialog",11),T("overlayVisible",function(a){return o.overlayVisible.set(a);}),v()),i&2&&(ne("inert",o.overlayVisible()),P(5),K(o.displayRuleHelpLink()?5:-1),P(),K(o.displayHistoryBackLink()?6:-1),P(),K(o.displayConfigLink()?7:-1),P(),ne("@routeTransition",o.hierarchy())("@.disabled",o.disableAnimations())("inert",o.overlayVisible()),P(2),Ee("hidden",!o.scrollTopVisible()));},dependencies:[Oe,Ve,He,Ue,je,Fe],encapsulation:2,data:{animation:[ht]},changeDetection:0});}return t;})();var mt="@",ft=(()=>{class t{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=s(S);loadingSchedulerFn=s(gt,{optional:!0});_engine;constructor(e,i,o,r,a){this.doc=e,this.delegate=i,this.zone=o,this.animationType=r,this.moduleImpl=a;}ngOnDestroy(){this._engine?.flush();}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-5af14437.js").then(o=>o),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(e):i=e(),i.catch(o=>{throw new g(5300,!1);}).then(({ɵcreateEngine:o,ɵAnimationRendererFactory:r})=>{this._engine=o(this.animationType,this.doc);let a=new r(this.delegate,this._engine,this.zone);return this.delegate=a,a;});}createRenderer(e,i){let o=this.delegate.createRenderer(e,i);if(o.ɵtype===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let r=new ce(o);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(e,i);r.use(l),this.scheduler??=this.injector.get(_e,null,{optional:!0}),this.scheduler?.notify(10);}).catch(a=>{r.use(o);}),r;}begin(){this.delegate.begin?.();}end(){this.delegate.end?.();}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve();}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e);}static ɵfac=function(i){be();};static ɵprov=d({token:t,factory:t.ɵfac});}return t;})(),ce=class{delegate;replay=[];ɵtype=1;constructor(n){this.delegate=n;}use(n){if(this.delegate=n,this.replay!==null){for(let e of this.replay)e(n);this.replay=null;}}get data(){return this.delegate.data;}destroy(){this.replay=null,this.delegate.destroy();}createElement(n,e){return this.delegate.createElement(n,e);}createComment(n){return this.delegate.createComment(n);}createText(n){return this.delegate.createText(n);}get destroyNode(){return this.delegate.destroyNode;}appendChild(n,e){this.delegate.appendChild(n,e);}insertBefore(n,e,i,o){this.delegate.insertBefore(n,e,i,o);}removeChild(n,e,i){this.delegate.removeChild(n,e,i);}selectRootElement(n,e){return this.delegate.selectRootElement(n,e);}parentNode(n){return this.delegate.parentNode(n);}nextSibling(n){return this.delegate.nextSibling(n);}setAttribute(n,e,i,o){this.delegate.setAttribute(n,e,i,o);}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i);}addClass(n,e){this.delegate.addClass(n,e);}removeClass(n,e){this.delegate.removeClass(n,e);}setStyle(n,e,i,o){this.delegate.setStyle(n,e,i,o);}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i);}setProperty(n,e,i){this.shouldReplay(e)&&this.replay.push(o=>o.setProperty(n,e,i)),this.delegate.setProperty(n,e,i);}setValue(n,e){this.delegate.setValue(n,e);}listen(n,e,i,o){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(n,e,i,o)),this.delegate.listen(n,e,i,o);}shouldReplay(n){return this.replay!==null&&n.startsWith(mt);}},gt=new W("");function Ye(t="animations"){return ve("NgAsyncAnimations"),$([{provide:we,useFactory:(n,e,i)=>new ft(n,e,i,t),deps:[H,Pe,z]},{provide:ye,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}]);}var pe="Service workers are disabled or not supported by this browser",I=class{serviceWorker;worker;registration;events;constructor(n,e){if(this.serviceWorker=n,!n)this.worker=this.events=this.registration=new F(i=>i.error(new g(5601,!1)));else{let i=null,o=new V();this.worker=new F(u=>(i!==null&&u.next(i),o.subscribe(D=>u.next(D))));let r=()=>{let{controller:u}=n;u!==null&&(i=u,o.next(i));};n.addEventListener("controllerchange",r),r(),this.registration=this.worker.pipe(f(()=>n.getRegistration().then(u=>{if(!u)throw new g(5601,!1);return u;})));let a=new V();this.events=a.asObservable();let l=u=>{let{data:D}=u;D?.type&&a.next(D);};n.addEventListener("message",l),e?.get(oe,null,{optional:!0})?.onDestroy(()=>{n.removeEventListener("controllerchange",r),n.removeEventListener("message",l);});}}postMessage(n,e){return new Promise(i=>{this.worker.pipe(E(1)).subscribe(o=>{o.postMessage(he({action:n},e)),i();});});}postMessageWithOperation(n,e,i){let o=this.waitForOperationCompleted(i),r=this.postMessage(n,e);return Promise.all([r,o]).then(([,a])=>a);}generateNonce(){return Math.round(Math.random()*1e7);}eventsOfType(n){let e;return typeof n=="string"?e=i=>i.type===n:e=i=>n.includes(i.type),this.events.pipe(h(e));}nextEventOfType(n){return this.eventsOfType(n).pipe(E(1));}waitForOperationCompleted(n){return new Promise((e,i)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(h(o=>o.nonce===n),E(1),m(o=>{if(o.result!==void 0)return o.result;throw new Error(o.error);})).subscribe({next:e,error:i});});}get isEnabled(){return!!this.serviceWorker;}},_t=(()=>{class t{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled;}pushManager=null;subscriptionChanges=new V();constructor(e){if(this.sw=e,!e.isEnabled){this.messages=w,this.notificationClicks=w,this.notificationCloses=w,this.pushSubscriptionChanges=w,this.subscription=w;return;}this.messages=this.sw.eventsOfType("PUSH").pipe(m(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(m(o=>o.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(m(o=>o.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(m(o=>o.data)),this.pushManager=this.sw.registration.pipe(m(o=>o.pushManager));let i=this.pushManager.pipe(f(o=>o.getSubscription()));this.subscription=new F(o=>{let r=i.subscribe(o),a=this.subscriptionChanges.subscribe(o);return()=>{r.unsubscribe(),a.unsubscribe();};});}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(pe));let i={userVisibleOnly:!0},o=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(o.length));for(let a=0;a<o.length;a++)r[a]=o.charCodeAt(a);return i.applicationServerKey=r,new Promise((a,l)=>{this.pushManager.pipe(f(p=>p.subscribe(i)),E(1)).subscribe({next:p=>{this.subscriptionChanges.next(p),a(p);},error:l});});}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(pe));let e=i=>{if(i===null)throw new g(5602,!1);return i.unsubscribe().then(o=>{if(!o)throw new g(5603,!1);this.subscriptionChanges.next(null);});};return new Promise((i,o)=>{this.subscription.pipe(E(1),f(e)).subscribe({next:i,error:o});});}decodeBase64(e){return atob(e);}static ɵfac=function(i){return new(i||t)(te(I));};static ɵprov=d({token:t,factory:t.ɵfac});}return t;})(),de=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled;}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=w,this.unrecoverable=w;return;}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE");}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(pe));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null;}),this.ongoingCheckForUpdate;}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new g(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e);}static ɵfac=function(i){return new(i||t)(te(I));};static ɵprov=d({token:t,factory:t.ɵfac});}return t;})();var qe=new W("");function yt(){let t=s(L);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let n=s(qe),e=s(z),i=s(oe);e.runOutsideAngular(()=>{let o=navigator.serviceWorker,r=()=>o.controller?.postMessage({action:"INITIALIZE"});o.addEventListener("controllerchange",r),i.onDestroy(()=>{o.removeEventListener("controllerchange",r);});}),e.runOutsideAngular(()=>{let o,{registrationStrategy:r}=t;if(typeof r=="function")o=new Promise(a=>r().subscribe(()=>a()));else{let[a,...l]=(r||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":o=Promise.resolve();break;case"registerWithDelay":o=Ze(+l[0]||0);break;case"registerWhenStable":o=Promise.race([i.whenStable(),Ze(+l[0])]);break;default:throw new g(5600,!1);}}o.then(()=>{i.destroyed||navigator.serviceWorker.register(n,{scope:t.scope}).catch(a=>console.error(fe(5604,!1)));});});}function Ze(t){return new Promise(n=>setTimeout(n,t));}function wt(t,n){return new I(t.enabled!==!1?navigator.serviceWorker:void 0,n);}var L=class{enabled;scope;registrationStrategy;};function Qe(t,n={}){return $([_t,de,{provide:qe,useValue:t},{provide:L,useValue:n},{provide:I,useFactory:wt,deps:[L,S]},b(yt)]);}var Je=!1,et=async()=>{let t=s(c).rules.parsed.value();if(!Je&&t.rulesContainComments){let n=await y("Die aktuellen Regeln enthalten Kommentare. Wenn du sie mit dem grafischen Editor bearbeitest, werden diese Kommentare verworfen. M\xF6chtest du fortfahren?");return n&&(Je=!0),n;}return!0;};var ue=()=>{if(s(c).rules.hasError()){let n=s(k),e=n.getCurrentNavigation()?.finalUrl;return n.navigate(["/rules-error"],{browserUrl:e});}else return!0;};var bt=[{path:"",redirectTo:"/packlist",pathMatch:"full"},{path:"packlist",loadComponent:()=>import("./chunk-1ca619b8.js").then(t=>t.PacklistComponent),canActivate:[ue],data:{hierarchy:0,config:!0}},{path:"config",loadComponent:()=>import("./chunk-f0d0bb2c.js").then(t=>t.ConfigComponent),data:{hierarchy:1}},{path:"session",loadComponent:()=>import("./chunk-2efda693.js").then(t=>t.SessionComponent),data:{hierarchy:2,historyBack:!0}},{path:"rules",loadComponent:()=>import("./chunk-b289ec44.js").then(t=>t.RulesComponent),canActivate:[ue,et],data:{hierarchy:2,config:!0}},{path:"rules-raw",loadComponent:()=>import("./chunk-d523d197.js").then(t=>t.EditRulesRawComponent),data:{hierarchy:2,config:!0,ruleHelp:!0}},{path:"rules-error",loadComponent:()=>import("./chunk-b4d48ec4.js").then(t=>t.RulesErrorComponent),data:{hierarchy:2,config:!0}},{path:"documentation/:topic",loadComponent:()=>import("./chunk-666bb2bf.js").then(t=>t.DocumentationComponent),data:{hierarchy:3,historyBack:!0}},{path:"**",redirectTo:"/packlist"}],tt=()=>Le(bt,De(),xe());var it=(()=>{class t{state=s(c);document=s(H);init(){C(()=>{this.applyTheme(this.state.config.theme());}),C(()=>{this.applyLanguage(this.state.config.preferredLanguage());}),C(()=>{this.applyFontSize(this.state.config.fontSize());}),C(()=>{this.applyAccessibilityClass(this.state.config.accessibility());}),C(()=>{this.applyAnimationClass(this.state.config.animations());});}applyTheme(e){let i=window.matchMedia("(prefers-color-scheme: dark)").matches;e==="system"&&i||e==="dark"?this.document.documentElement.classList.add("dark"):this.document.documentElement.classList.remove("dark");}applyLanguage(e){if(e&&this.document.documentElement.lang!==e){if(q()){console.warn("Language switching is disabled in dev mode");return;}let i=window.location.href,o=window.location.hash,r=`index${e==="en"?"":`.${e}`}.html`,l=i.substring(0,i.indexOf(o))+r+window.location.hash;setTimeout(()=>{window.location.href=l;},0);}}applyFontSize(e){document.documentElement.style.setProperty("--html-font-size",e==="small"?"16px":e==="normal"?"18px":"20px");}applyAccessibilityClass(e){document.documentElement.classList.remove("accessible","compact"),document.documentElement.classList.add(e);}applyAnimationClass(e){document.documentElement.classList.toggle("animations",e);}static ɵfac=function(i){return new(i||t)();};static ɵprov=d({token:t,factory:t.ɵfac,providedIn:"root"});}return t;})();var ot=(()=>{class t{swUpdate=s(de);status=s(c).serviceWorker.status;init(){me(this.swUpdate.versionUpdates,this.swUpdate.unrecoverable).pipe(j(e=>{if(e.type==="VERSION_INSTALLATION_FAILED")this.status.set("error"),console.error(`Version installation failed
`,e.error);else if(e.type==="NO_NEW_VERSION_DETECTED")this.status.set("ok");else if(e.type==="VERSION_READY"||e.type==="VERSION_DETECTED")this.status.set("update-available");else{let i=e;this.status.set("unrecoverable"),console.error(`Unrecoverable state
`,i.reason);}}),h(e=>e.type==="VERSION_READY"),f(()=>y("Eine neue Version der App ist verf\xFCgbar. M\xF6chtest du neu laden?")),h(x)).subscribe(()=>{window.location.reload();}),this.swUpdate.isEnabled?U(6e4).pipe(f(()=>this.swUpdate.checkForUpdate())).subscribe(e=>{e&&console.log("Update available");}):(this.status.set("disabled"),console.warn("Service worker updates are disabled/unavailable"));}static ɵfac=function(i){return new(i||t)();};static ɵprov=d({token:t,factory:t.ɵfac,providedIn:"root"});}return t;})();function vt(t){t.CapacitorUtils.Synapse=new Proxy({},{get(n,e){return new Proxy({},{get(i,o){return(r,a,l)=>{let p=t.Capacitor.Plugins[e];if(p===void 0){l(new Error(`Capacitor plugin ${e} not found`));return;}if(typeof p[o]!="function"){l(new Error(`Method ${o} not found in Capacitor plugin ${e}`));return;}(async()=>{try{let u=await p[o](r);a(u);}catch(u){l(u);}})();};}});}});}function Ct(t){t.CapacitorUtils.Synapse=new Proxy({},{get(n,e){return t.cordova.plugins[e];}});}function nt(t=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!t?vt(window):window.cordova!==void 0&&Ct(window));}var Tt=J("Filesystem",{web:()=>import("./chunk-af830ba2.js").then(t=>new t.FilesystemWeb())});nt();var At=J("Share",{web:()=>import("./chunk-5859270d.js").then(t=>new t.ShareWeb())});var ee=class extends O{async webShareRules(){if(this.state.rules.raw.hasValue()){let n=this.state.rules.raw.value(),e=this.exportFileName();await navigator.share({title:e,files:[new File([n],e,{type:"text/plain"})]});}}downloadRules(){if(this.state.rules.raw.hasValue()){let n=this.state.rules.raw.value(),e=new Blob([n],{type:"text/plain"}),i=URL.createObjectURL(e),o=document.createElement("a");o.href=i,o.download=this.exportFileName(),o.click();}}async exportRules(){this.state.browser.isMobile()&&"share"in navigator?await this.webShareRules():this.downloadRules();}};var st=(()=>{class t{state=s(c);exportNeeded=this.state.rules.exportNeeded;reminderActive=this.state.config.exportReminder;lastAskedHash=[];init(){U(3e4).pipe(h(()=>this.reminderActive()&&this.exportNeeded()&&this.exportOverdue()&&this.enoughTimeSinceLastEditPassed()),m(()=>this.state.rules.hash()),h(e=>!this.lastAskedHash.includes(e)),j(e=>{this.lastAskedHash.push(e);}),f(()=>y("Die aktuellen Regeln wurden seit einiger Zeit nicht mehr exportiert. M\xF6chtest du sie jetzt exportieren?")),h(x)).subscribe(()=>{this.state.router.go("config#export");});}exportOverdue(){let e=this.state.export.lastDate();return new Date().getTime()-(e??0)>rt(10);}enoughTimeSinceLastEditPassed(){let e=this.state.rules.lastAction();return new Date().getTime()-e>rt(2);}static ɵfac=function(i){return new(i||t)();};static ɵprov=d({token:t,factory:t.ɵfac,providedIn:"root"});}return t;})();function rt(t){return t*60*1e3;}var at=(()=>{class t{state=s(c);router=s(k);init(){this.router.events.pipe(h(e=>e instanceof Q)).subscribe(()=>{let e=this.state.router.fragment();e&&setTimeout(()=>{let i=document.getElementById(e);i&&(i.getBoundingClientRect().top>window.innerHeight&&i.scrollIntoView({behavior:"smooth",block:"center"}),i instanceof HTMLButtonElement&&i.classList.add("highlighted"),i.classList.add("animate-pulse"),setTimeout(()=>{i.classList.remove("highlighted"),i.classList.remove("animate-pulse");},5e3),setTimeout(()=>{this.state.router.fragment.set(void 0);},500));},100);});}static ɵfac=function(i){return new(i||t)();};static ɵprov=d({token:t,factory:t.ɵfac,providedIn:"root"});}return t;})();var lt=(()=>{class t{state=s(c);refactor=s($e);percentageOfItemsWithWeights=()=>{if(this.state.rules.parsed.value().length>0){let{items:e,weights:i}=this.refactor.countItemsAndWeights(this.state.rules.parsed.value());return i/e;}return 0;};askedFor=this.state.packlist.askedWeightTracking;async promptEnableWeightTracking(){!this.state.config.trackWeight()&&this.percentageOfItemsWithWeights()>.1&&this.askedFor()!=="activation"&&(this.askedFor.set("activation"),(await y("Die geladenen Regeln enthalten Gegenst\xE4nde mit Gewichten. M\xF6chtest du die Gewichtserfassung aktivieren?"))&&(this.state.config.trackWeight.set(!0),this.state.config.categorySorting.set("weight")));}async promptDisableWeightTracking(){this.state.config.trackWeight()&&this.percentageOfItemsWithWeights()<=0&&this.askedFor()!=="deactivation"&&(this.askedFor.set("deactivation"),(await y("Die geladenen Regeln enthalten keine Gegenst\xE4nde mit Gewichten. M\xF6chtest du die Gewichtserfassung deaktivieren?"))&&this.state.config.trackWeight.set(!1));}init(){let e;C(()=>{!this.state.rules.raw.isLoading()&&this.state.rules.parsed.hasValue()&&(e&&clearTimeout(e),this.state.router.path().startsWith("/packlist")&&(e=setTimeout(()=>{this.promptEnableWeightTracking(),this.promptDisableWeightTracking();},2e3)));});}static ɵfac=function(i){return new(i||t)();};static ɵprov=d({token:t,factory:t.ɵfac,providedIn:"root"});}return t;})();function Et(t){return{isTrackWeight:()=>t.get(c).config.trackWeight()};}var ct={providers:[Se(),ge(),tt(),Qe("ngsw-worker.js",{enabled:!q()&&!0,registrationStrategy:"registerImmediately"}),Ye(),b(()=>{s(it).init();}),b(()=>{s(ot).init();}),b(()=>{s(st).init();}),b(()=>{s(lt).init();}),b(()=>{s(at).init();}),{deps:[S],provide:We,useFactory:Et},{provide:O,useClass:ee},ze(),Ge(),{provide:Be,useValue:"cors"}]};Re(Ke,ct).then(()=>fetch("build-info.json")).then(t=>t.json()).then(t=>{let n=window;n.BUILD_TIME=t.buildTime,n.VERSION=t.version,n.COMMITS_SINCE=t.commitsSince,n.GIT_HASH=t.gitHash,n.VERSION_CODE=t.versionCode;}).catch(t=>{console.error(t);});/**i18n:1e46c8204f38df38d095c36b85005d70b26c53f2afa257bd2af7cc57ec9b3308*/