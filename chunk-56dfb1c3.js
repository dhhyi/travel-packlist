import{f as Z,g as ee,h as te,i as ie,q as O}from"./chunk-1cbc437c.js";import{b as V,q as ne}from"./chunk-b22ce02d.js";import{d as J}from"./chunk-c5baa0cd.js";import{$a as p,Aa as c,Ab as b,Eb as K,Fb as x,Gb as C,Ib as q,Ka as f,Pa as _,Tb as F,W as Q,Wa as M,Xa as y,Ya as B,aa as S,ab as z,cb as v,cc as Y,db as D,eb as r,ec as H,fb as l,gb as m,ia as g,ib as P,ja as T,jb as N,kb as $,lb as X,ob as j,pb as A,qb as o,ta as W,xb as u,yb as E,zb as R}from"./chunk-11555493.js";import{a as G,b as U}from"./chunk-fde9b292.js";function _e(t,a){t&1&&m(0,"app-icon-checkmark");}function pe(t,a){if(t&1&&u(0),t&2){let e=o();b(" ",e.count()," / ",e.total(),`
`);}}var oe=(()=>{class t{count=W(0);total=W(0);static ɵfac=function(i){return new(i||t)();};static ɵcmp=f({type:t,selectors:[["app-status"]],inputs:{count:[1,"count"],total:[1,"total"]},decls:2,vars:1,template:function(i,n){i&1&&_(0,_e,1,0,"app-icon-checkmark")(1,pe,1,2),i&2&&p(n.count()===n.total()?0:1);},dependencies:[O],encapsulation:2,changeDetection:0});}return t;})();function ae(t){return`${t.category}-${t.name}`;}var I=(()=>{class t{router=S(J);state=S(ne);checkedItems=this.state.signal("checkedItems");collapsedCategories=this.state.signal("collapsedCategories");isItemChecked(e){return this.checkedItems().includes(ae(e));}isCategoryCollapsed(e){return this.collapsedCategories().includes(e);}toggleCheckedItem(e){let i=ae(e);this.checkedItems().includes(i)?this.checkedItems.update(n=>n.filter(s=>s!==i)):this.checkedItems.update(n=>[...n,i]);}toggleCategoryCollapse(e){this.collapsedCategories().includes(e)?this.collapsedCategories.update(i=>i.filter(n=>n!==e)):this.collapsedCategories.update(i=>[...i,e]);}categoriesOrderBy=F(()=>this.state.signal("categorySorting")()==="definition"?()=>0:(i,n)=>i.localeCompare(n));packlist=F(()=>{let e=this.state.signal("activeItems")(),i=0,n=0,s=0,h=e.reduce((k,d)=>(k[d.category]||(k[d.category]={items:[],checked:0,collapsed:this.isCategoryCollapsed(d.category),totalWeight:0,checkedWeight:0}),k[d.category].items.push(U(G({},d),{checked:this.isItemChecked(d)})),this.isItemChecked(d)&&(i++,k[d.category].checked++,n+=d.weight??0,k[d.category].checkedWeight+=d.weight??0),k[d.category].totalWeight+=d.weight??0,s+=d.weight??0,k),{}),L=Object.entries(h),re=this.categoriesOrderBy();return L.sort((k,d)=>re(k[0],d[0])),{numberOfItems:e.length,categories:L,checked:i,checkedWeight:n,totalWeight:s};});rulesAvailable=F(()=>this.state.signal("numberOfRules")()>0);isAnswersLockActive=this.state.signal("answersLocked");model=this.state.signal("answers");activeQuestions=this.state.signal("activeQuestions");questions=F(()=>this.activeQuestions().filter(e=>!this.isAnswersLockActive()||this.model()[e.variable]));questionsAvailable=F(()=>this.activeQuestions().length>0);toggleQuestion(e){this.isAnswersLockActive()||this.model.update(i=>U(G({},i),{[e.variable]:!i[e.variable]}));}isQuestionActive(e){return this.model()[e.variable];}toggleAnswersLock(){this.isAnswersLockActive.update(e=>!e);}trackWeight=this.state.signal("trackWeight");serializeWeight=V;serializeWeightPartition(e,i){return V(e,void 0,1)+" / "+V(i,void 0,1);}goToRulesEdit(){this.router.navigate(["/rules"]).then(()=>{this.state.set("rulesMode","edit");});}goToConfigImport(){this.router.navigate(["/config"],{fragment:"import"});}static ɵfac=function(i){return new(i||t)();};static ɵprov=Q({token:t,factory:t.ɵfac,providedIn:"root"});}return t;})();var de=(t,a)=>a[0],me=t=>({"text-slate-600 line-through dark:text-slate-400":t});function ue(t,a){t&1&&(r(0,"div",1)(1,"p",3),X(2,0),l()());}function Ce(t,a){t&1&&m(0,"app-icon-key-right",6);}function ge(t,a){t&1&&m(0,"app-icon-key-down",6);}function Te(t,a){if(t&1&&u(0),t&2){o(2);let e=C(1),i=o();R(" (",i.facade.serializeWeight(e.checkedWeight,void 0,1),") ");}}function Se(t,a){if(t&1&&u(0),t&2){o(2);let e=C(1),i=o();R(" (",i.facade.serializeWeightPartition(e.checkedWeight,e.totalWeight),") ");}}function fe(t,a){if(t&1&&(r(0,"span",8),_(1,Te,1,1)(2,Se,1,1),l()),t&2){o();let e=C(1);c(),p(e.checkedWeight===e.totalWeight?1:2);}}function Ae(t,a){if(t&1&&(r(0,"span",13),u(1),l()),t&2){let e=o().$implicit,i=o(3);c(),E(i.facade.serializeWeight(e.weight));}}function ke(t,a){if(t&1){let e=P();r(0,"li",12),A("click",function(){let n=g(e).$implicit,s=o(3);return T(s.facade.toggleCheckedItem(n));})("keypress",function(){let n=g(e).$implicit,s=o(3);return T(s.facade.toggleCheckedItem(n));}),u(1),_(2,Ae,2,1,"span",13),l();}if(t&2){let e=a.$implicit,i=o(3);y("ngClass",q(4,me,e.checked)),M("aria-pressed",e.checked),c(),R(" ",e.name," "),c(),p(e.weight&&i.facade.trackWeight()?2:-1);}}function Pe(t,a){if(t&1&&(r(0,"ul",10),v(1,ke,3,6,"li",11,z),l()),t&2){o();let e=C(1);c(),D(e.items);}}function xe(t,a){if(t&1){let e=P();K(0)(1),r(2,"div",2)(3,"div",4),A("click",function(){g(e);let n=C(0),s=o();return T(s.facade.toggleCategoryCollapse(n));})("keypress",function(){g(e);let n=C(0),s=o();return T(s.facade.toggleCategoryCollapse(n));}),r(4,"div",5),_(5,Ce,1,0,"app-icon-key-right",6)(6,ge,1,0,"app-icon-key-down",6),r(7,"span",7),u(8),l(),_(9,fe,3,1,"span",8),l(),m(10,"app-status",9),l(),_(11,Pe,3,0,"ul",10),l();}if(t&2){let e=a.$implicit,i=o(),n=x(e[0]);c();let s=x(e[1]);c(4),p(s.collapsed?5:6),c(3),E(n),c(),p(i.facade.trackWeight()&&s.totalWeight?9:-1),c(),y("count",s.checked)("total",s.items.length),c(),p(s.collapsed?-1:11);}}var se=(()=>{class t{facade=S(I);static ɵfac=function(i){return new(i||t)();};static ɵcmp=f({type:t,selectors:[["app-display-items"]],decls:3,vars:1,consts:()=>{let e;return e="No items available.",[e,[1,"flex","flex-col","items-center"],[1,"card","mb-1"],[1,"text-center"],["role","button","tabindex","0",1,"flex","justify-between",3,"click","keypress"],[1,"flex","items-center","gap-1"],[1,"h-6","w-6"],[1,"font-bold","italic"],[1,"text-sm"],[3,"count","total"],[1,"pt-2"],["role","button","tabindex","0",1,"flex","justify-between",3,"ngClass"],["role","button","tabindex","0",1,"flex","justify-between",3,"click","keypress","ngClass"],[1,"italic"]];},template:function(i,n){i&1&&(_(0,ue,3,0,"div",1),v(1,xe,12,8,"div",2,de)),i&2&&(p(n.facade.packlist().numberOfItems?-1:0),c(),D(n.facade.packlist().categories));},dependencies:[oe,Y,ie,te],encapsulation:2,changeDetection:0});}return t;})();var Ie=(t,a)=>a.question;function he(t,a){if(t&1){let e=P();r(0,"div",1)(1,"p",2),N(2,0),r(3,"button",3),A("click",function(){g(e);let n=o();return T(n.facade.goToRulesEdit());}),l(),$(),l()();}}function Le(t,a){t&1&&m(0,"app-icon-checkmark");}function Ee(t,a){if(t&1){let e=P();r(0,"div",8),A("click",function(){let n=g(e).$implicit,s=o(2);return T(s.facade.toggleQuestion(n));})("keypress",function(){let n=g(e).$implicit,s=o(2);return T(s.facade.toggleQuestion(n));}),r(1,"span",9),u(2),l(),_(3,Le,1,0,"app-icon-checkmark"),l();}if(t&2){let e=a.$implicit,i=o(2);B("disabled",i.facade.isAnswersLockActive()),M("aria-checked",i.facade.isQuestionActive(e)),c(2),E(e.question),c(),p(i.facade.isQuestionActive(e)?3:-1);}}function ye(t,a){t&1&&m(0,"app-icon-lock",7);}function Fe(t,a){t&1&&m(0,"app-icon-lock-open",7);}function ve(t,a){if(t&1){let e=P();v(0,Ee,4,5,"div",4,Ie),r(2,"div",5)(3,"button",6),A("click",function(){g(e);let n=o();return T(n.facade.toggleAnswersLock());}),_(4,ye,1,0,"app-icon-lock",7)(5,Fe,1,0,"app-icon-lock-open",7),l()();}if(t&2){let e=o();D(e.facade.questions()),c(4),p(e.facade.isAnswersLockActive()?4:5);}}var ce=(()=>{class t{facade=S(I);static ɵfac=function(i){return new(i||t)();};static ɵcmp=f({type:t,selectors:[["app-display-questions"]],decls:2,vars:1,consts:()=>{let e;return e=" No questions available, please "+"\uFFFD#3\uFFFD"+" create "+"\uFFFD/#3\uFFFD"+" some. ",[e,[1,"flex","flex-col","items-center"],[1,"text-center"],["type","button",1,"link","inline","p-0","underline",3,"click"],["role","checkbox","tabindex","0",1,"card","mb-1","flex","flex-row","justify-between",3,"disabled"],[1,"flex","justify-center"],["type","button",1,"link",3,"click"],[1,"h-6","w-6"],["role","checkbox","tabindex","0",1,"card","mb-1","flex","flex-row","justify-between",3,"click","keypress"],[1,"font-bold"]];},template:function(i,n){i&1&&_(0,he,4,0,"div",1)(1,ve,6,1),i&2&&p(n.facade.questionsAvailable()?1:0);},dependencies:[Z,ee,O],encapsulation:2,changeDetection:0});}return t;})();function De(t,a){if(t&1&&(r(0,"div",1),m(1,"progress",2),l(),r(2,"div",3)(3,"span",4),u(4),l(),r(5,"span",5),u(6),l()()),t&2){let e=o(),i=C(1),n=C(2),s=C(3),h=C(4);c(),y("value",s)("max",h),c(3),b("",i," / ",n,""),c(2),E(e.facade.serializeWeightPartition(s,h));}}function be(t,a){if(t&1&&(r(0,"div",1),m(1,"progress",6),l(),r(2,"div",7)(3,"span",8),u(4),l()()),t&2){o();let e=C(1),i=C(2);c(),y("value",e)("max",i),c(3),b("",e," / ",i,"");}}var le=(()=>{class t{facade=S(I);static ɵfac=function(i){return new(i||t)();};static ɵcmp=f({type:t,selectors:[["app-packlist-status"]],decls:7,vars:5,consts:()=>{let e;e="weight packing progress";let i;i="item packing status";let n;n="weight packing status";let s;s="item packing progress";let h;return h="item packing status",[[1,"card","mb-1"],[1,"mb-1","flex"],["role","progressbar","title",e,1,"grow",3,"value","max"],[1,"flex","flex-col","items-center"],["title",i,"aria-live","polite"],["title",n,"aria-live","polite"],["role","progressbar","title",s,1,"grow",3,"value","max"],[1,"flex","justify-center"],["title",h,"aria-live","polite"]];},template:function(i,n){i&1&&(r(0,"div",0),K(1)(2)(3)(4),_(5,De,7,5)(6,be,5,4),l()),i&2&&(c(),x(n.facade.packlist().checked),c(),x(n.facade.packlist().numberOfItems),c(),x(n.facade.packlist().checkedWeight),c(),x(n.facade.packlist().totalWeight),c(),p(n.facade.trackWeight()?5:6));},dependencies:[H],styles:["progress[_ngcontent-%COMP%]::-webkit-progress-bar{border:2px solid #ccc;border-radius:5px;background-color:transparent}progress[_ngcontent-%COMP%]::-webkit-progress-value{background-color:#999;border-radius:3px}"],changeDetection:0});}return t;})();function we(t,a){t&1&&m(0,"app-display-questions")(1,"app-packlist-status")(2,"app-display-items");}function Me(t,a){if(t&1){let e=P();r(0,"div",1)(1,"p",2),N(2,0),r(3,"button",3),A("click",function(){g(e);let n=o();return T(n.facade.goToConfigImport());}),l(),r(4,"button",3),A("click",function(){g(e);let n=o();return T(n.facade.goToRulesEdit());}),l(),$(),l()();}}var At=(()=>{class t{facade=S(I);static ɵfac=function(i){return new(i||t)();};static ɵcmp=f({type:t,selectors:[["app-packlist"]],decls:2,vars:1,consts:()=>{let e;return e=" No rules available, please "+"\uFFFD#3\uFFFD"+" import "+"[\uFFFD/#3\uFFFD|\uFFFD/#4\uFFFD]"+" or "+"\uFFFD#4\uFFFD"+" create "+"[\uFFFD/#3\uFFFD|\uFFFD/#4\uFFFD]"+" some. ",e=j(e),[e,[1,"flex","flex-col","items-center"],[1,"text-center"],["type","button",1,"link","inline","p-0","underline",3,"click"]];},template:function(i,n){i&1&&_(0,we,3,0)(1,Me,5,0,"div",1),i&2&&p(n.facade.rulesAvailable()?0:1);},dependencies:[se,ce,le],encapsulation:2,changeDetection:0});}return t;})();export{At as default};/**i18n:dedd5470af1d8ff9fad383437db3f2db99f1a4dd222b97ea99c2e928bb12df18*/