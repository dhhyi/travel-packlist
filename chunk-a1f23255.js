import{b as h,d as y,i as v,o as b,q as x}from"./chunk-3f226909.js";import{a as V}from"./chunk-b2804bbd.js";import{s as G}from"./chunk-8857bbb6.js";import"./chunk-88d5c091.js";import{k as T}from"./chunk-f5659769.js";import{E as p,Fb as P,Gb as O,Hb as $,Ib as I,Kb as u,Oa as R,P as f,Vb as U,Xb as W,Za as M,ba as A,pb as S,pc as d,qb as E,qc as C,vb as m,wb as l,xb as r,yb as N}from"./chunk-cccbad7d.js";import"./chunk-ecf0d82d.js";function F(e,s){e&1&&(l(0,"div",4),P(1,0),r());}function K(e,s){if(e&1&&(l(0,"div",5),P(1,1),r()),e&2){let _=u().rules;R(),O(_)(_),$(1);}}function X(e,s){if(e&1&&(l(0,"div",6),U(1),r()),e&2){let t=u();R(),W(" ",t.error," ");}}function w(e,s){if(e&1&&S(0,F,2,0,"div",4)(1,K,2,2,"div",5)(2,X,2,1,"div",6),e&2){let t;E((t=s.type)==="pending"?0:t==="success"?1:2);}}var Z=(()=>{class e{state=A(G);fb=A(b).nonNullable;rulesControl=this.fb.control(this.state.rules.raw.value());rulesText=T(this.rulesControl.valueChanges.pipe(f(this.rulesControl.value)));rulesPending=d(()=>this.rulesText()!==this.state.rules.raw.value());parserState=d(()=>this.rulesPending()?{type:"pending"}:this.state.rules.parsed.status()==="error"?{type:"error",error:V(this.state.rules.parsed.error())}:{type:"success",rules:this.state.rules.parsed.value().length});constructor(){let t=T(this.rulesControl.valueChanges.pipe(p(500)));C(()=>{let _=t();typeof _=="string"&&_!==this.state.rules.raw.value()&&this.state.localRules.updateRules(_);}),C(()=>{this.state.rules.mode()==="local"?this.rulesControl.enable():this.rulesControl.disable();});}static ɵfac=function(_){return new(_||e)();};static ɵcmp=M({type:e,selectors:[["app-edit-rules-raw"]],hostAttrs:[1,"flex","grow","flex-col"],decls:3,vars:2,consts:()=>{let t;t="Rules as code";let _;_="Parser state";let o;o="pending";let i;i="success";let L;L="error";let c;c=" Waiting for input. ";let a;a="{VAR_PLURAL, plural, one {1 rule} other {{INTERPOLATION} rules}}",a=I(a,{INTERPOLATION:"\uFFFD1\uFFFD",VAR_PLURAL:"\uFFFD0\uFFFD"});let g;return g=" Parsed "+a+" successfully! ",[c,g,["aria-label",t,1,"grow","resize-none","rounded-sm","border","border-gray-300","bg-gray-100","px-1","py-0","pb-8","font-mono","leading-tight","text-gray-700","focus:outline-hidden","dark:bg-gray-900","dark:text-gray-300",3,"formControl"],["aria-label",_,"aria-live","polite",1,"bg-active","bottom-0","p-2","font-mono"],["aria-label",o,1,"text-yellow-normal"],["aria-label",i,1,"text-green"],["aria-label",L,1,"text-red"]];},template:function(_,o){if(_&1&&(N(0,"textarea",2),l(1,"div",3),S(2,w,3,1),r()),_&2){let i;m("formControl",o.rulesControl),R(2),E((i=o.parserState())?2:-1,i);}},dependencies:[x,h,y,v],encapsulation:2,changeDetection:0});}return e;})();export{Z as EditRulesRawComponent};/**i18n:28a3168b76bee7dffc4b1e816012f24aa421b4da90b9b896cc67ce89fdf6fb94*/