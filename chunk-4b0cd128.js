import{c as E,d as h,e as D,g as d,h as O,i as ct,j as I,k as Y,l as H,m as v,n as g,o as J}from"./chunk-0eb139dd.js";import{a as St,c as gt,d as At}from"./chunk-8a5291fa.js";import{e as _t,g as pt,h as mt,i as ut,q as z,r as dt,s as Ct,u as Tt}from"./chunk-9b6af68e.js";import"./chunk-31c3322d.js";import{C as y,m as $,n as X}from"./chunk-e13ecf9c.js";import"./chunk-5cf77f7c.js";import{Ac as k,Ba as b,Bb as m,Eb as R,Fb as V,Gb as l,Hb as a,Ib as T,Ja as M,Kb as P,Lb as U,Mb as W,Nb as ot,Qb as at,Rb as S,Sb as o,Tc as lt,Za as s,ac as A,bc as w,cc as B,dc as Q,ea as L,kb as x,la as c,ma as _,oc as st,pb as u,rc as rt,wb as f,xb as C,ya as j,yb as G}from"./chunk-47e6c2de.js";import{a as it,b as nt}from"./chunk-243a5d09.js";var Pt={opacity:0,transform:"scale(0.9)",height:0,minHeight:0,padding:0,margin:"-2px"},ft={opacity:1,transform:"scale(1)",height:"*",minHeight:"*",padding:"*",margin:"*"},N=Y([d(Pt),J(50,[h("0.3s ease-in",d(ft))])]),K=Y([d(ft),J(50,[h("0.3s ease-in",d(Pt))])]);function vt(e,r){e&1&&T(0,"app-icon-checkmark");}function Lt(e,r){if(e&1&&A(0),e&2){let t=o();Q(" ",t.count()," / ",t.total(),`
`);}}var ht=(()=>{class e{count=j(0);total=j(0);static ɵfac=function(i){return new(i||e)();};static ɵcmp=x({type:e,selectors:[["app-items-status"]],inputs:{count:[1,"count"],total:[1,"total"]},decls:2,vars:1,template:function(i,n){i&1&&u(0,vt,1,0,"app-icon-checkmark")(1,Lt,1,2),i&2&&m(n.count()===n.total()?0:1);},dependencies:[z],encapsulation:2,changeDetection:0});}return e;})();var xt=(e,r)=>r.name;function bt(e,r){e&1&&(l(0,"div",1)(1,"p",4),ot(2,0),a()());}function yt(e,r){if(e&1&&A(0),e&2){let t=o(2).$implicit,i=o();B(" (",i.serializeWeight(t.checkedWeight,void 0,1),") ");}}function wt(e,r){if(e&1&&A(0),e&2){let t=o(2).$implicit,i=o();B(" (",i.serializeWeightPartition(t.checkedWeight,t.totalWeight),") ");}}function Dt(e,r){if(e&1&&(l(0,"span",9),u(1,yt,1,1)(2,wt,1,1),a()),e&2){let t=o().$implicit;s(),m(t.checkedWeight===t.totalWeight?1:2);}}function Ft(e,r){if(e&1&&(l(0,"span",13),A(1),a()),e&2){let t=o().$implicit,i=o(3);s(),w(i.serializeWeight(t.weight));}}function Mt(e,r){if(e&1){let t=P();l(0,"div",11)(1,"div",12),S("click",function(){let n=c(t).$implicit,p=o(3);return _(p.toggleCheckedItem(n));})("keypress",function(){let n=c(t).$implicit,p=o(3);return _(p.toggleCheckedItem(n));})("dblclick",function(){let n=c(t).$implicit,p=o(3);return _(p.dblclick(n));})("touchstart",function(){let n=c(t).$implicit,p=o(3);return _(p.tapStart(n));})("touchmove",function(){c(t);let n=o(3);return _(n.tapEnd());})("touchend",function(){c(t);let n=o(3);return _(n.tapEnd());}),A(2),u(3,Ft,2,1,"span",13),a()();}if(e&2){let t=r.$implicit,i=o(3);s(),G("text-checked-item",t.checked&&!t.skipped)("text-skipped-item",t.skipped),C("@animateStrikeThrough",t.checked),f("aria-checked",t.checked),s(),B(" ",t.name," "),s(),m(t.weight&&i.trackWeight()?3:-1);}}function $t(e,r){if(e&1&&R(0,Mt,4,8,"div",11,xt),e&2){let t=o().$implicit;V(t.items);}}function Nt(e,r){if(e&1){let t=P();l(0,"div",3)(1,"div",5),S("click",function(){let n=c(t).$implicit,p=o();return _(p.toggleCategoryCollapse(n.name));}),l(2,"div",6),T(3,"app-icon-key-right",7),l(4,"span",8),A(5),a(),u(6,Dt,3,1,"span",9),a(),T(7,"app-items-status",10),a(),u(8,$t,2,0),a();}if(e&2){let t=r.$implicit,i=o();C("@animateItems",t),f("aria-label",t.name),s(3),C("@animateChevron",t.collapsed),s(2),w(t.name),s(),m(i.trackWeight()&&t.totalWeight?6:-1),s(),C("count",t.checkedItems)("total",t.totalItems),s(),m(t.collapsed?-1:8);}}var Kt=E("animateCategory",[I("* <=> *",[D([g('div[role="list"]:enter',v(N),{optional:!0}),g('div[role="list"]:leave',v(K),{optional:!0}),g("@*",[H()],{optional:!0})])])]),Rt=E("animateItems",[I("* <=> *",[D([g('div[role="listitem"]:enter',[d({opacity:0,height:0}),h("0.2s ease-in",d({opacity:1,height:"*"}))],{optional:!0}),g('div[role="listitem"]:leave',[d({opacity:1,height:"*"}),h("0.2s ease-in",d({opacity:0,height:0}))],{optional:!0}),g("@*",[H()],{optional:!0})])])]),Vt=E("animateChevron",[O("true",d({transform:"rotate(0)"})),O("false",d({transform:"rotate(90deg)"})),I("false => true",h("0.5s ease-in-out")),I("true => false",h("0.5s ease-in-out",ct([d({transform:"rotate(0)"}),d({transform:"rotate(100deg)"}),d({transform:"rotate(80deg)"})])))]),Ot=E("animateStrikeThrough",[O("true",d({textDecorationColor:"inherit"})),O("false",d({textDecorationColor:"transparent"})),I("false => true",h("0.2s ease-in-out"))]),kt=(()=>{class e{state=L(y);stats=this.state.packlist.stats;packlist=this.state.packlist.model;trackWeight=this.state.config.trackWeight;toggleCategoryCollapse=this.state.packlist.toggleCategoryCollapse;toggleCheckedItem=this.state.packlist.toggleCheckedItem;serializeWeight=$;serializeWeightPartition=X;animationsDisabled=b(!0);constructor(){M(()=>{this.animationsDisabled.set(!this.state.config.animations());});}dblclick(t){this.state.browser.isMobile()||this.state.packlist.toggleSkippedItem(t);}touchAction;tapStart(t){this.state.browser.isMobile()&&(this.touchAction=setTimeout(()=>{this.state.packlist.toggleSkippedItem(t);},800));}tapEnd(){this.touchAction&&clearTimeout(this.touchAction);}static ɵfac=function(i){return new(i||e)();};static ɵcmp=x({type:e,selectors:[["app-display-items"]],decls:4,vars:3,consts:()=>{let t;return t="Keine Gegenst\xE4nde verf\xFCgbar.",[t,[1,"flex","flex-col","items-center"],[1,"contents"],["role","list",1,"card","mb-1","overflow-hidden"],[1,"text-center"],["aria-hidden","true",1,"accessible-content","flex","items-center","justify-between",3,"click"],[1,"flex","items-center","gap-1"],[1,"h-6","w-6"],[1,"font-bold","italic"],[1,"text-sm"],[3,"count","total"],["role","listitem"],["role","checkbox","tabindex","0",1,"flex","select-none","items-center","justify-between",3,"click","keypress","dblclick","touchstart","touchmove","touchend"],[1,"italic"]];},template:function(i,n){i&1&&(u(0,bt,3,0,"div",1),l(1,"div",2),R(2,Nt,9,8,"div",3,xt),a()),i&2&&(m(n.stats().totalItems?-1:0),s(),C("@animateCategory",n.packlist())("@.disabled",n.animationsDisabled()),s(),V(n.packlist()));},dependencies:[ht,ut],encapsulation:2,data:{animation:[Kt,Rt,Vt,Ot]},changeDetection:0});}return e;})();var Gt=(e,r)=>r.question;function Ut(e,r){if(e&1){let t=P();l(0,"div",1)(1,"p",2),U(2,0),l(3,"button",3),S("click",function(){c(t);let n=o();return _(n.goToRulesEdit());}),a(),W(),a()();}}function Wt(e,r){e&1&&T(0,"app-icon-checkmark");}function Bt(e,r){if(e&1){let t=P();l(0,"div",5),S("click",function(){let n=c(t).$implicit,p=o(2);return _(p.toggleQuestion(n));})("keypress",function(){let n=c(t).$implicit,p=o(2);return _(p.toggleQuestion(n));}),l(1,"span",6),A(2),a(),u(3,Wt,1,0,"app-icon-checkmark"),a();}if(e&2){let t=r.$implicit,i=o(2);G("disabled",i.isAnswersLockActive()),f("aria-checked",i.isQuestionActive(t))("aria-disabled",i.isAnswersLockActive())("aria-label",t.question),s(2),w(t.question),s(),m(i.isQuestionActive(t)?3:-1);}}function Qt(e,r){if(e&1&&(l(0,"div"),R(1,Bt,4,7,"div",4,Gt),a()),e&2){let t=o();C("@.disabled",t.animationsDisabled())("@animateQuestions",t.displayQuestions()),s(),V(t.displayQuestions());}}var zt=E("animateQuestions",[I("* <=> *",[D([g("div.card:enter",v(N),{optional:!0}),g("div.card:leave",v(K),{optional:!0}),g("app-icon-checkmark:enter",[d({transform:"translateX(200%)"}),h("0.3s ease-in",d({transform:"translateX(0)"}))],{optional:!0})])])]),It=(()=>{class e{state=L(y);questions=this.state.active.questions;isQuestionActive=t=>this.state.packlist.answers()[t.variable];isAnswersLockActive=this.state.packlist.answersLocked;displayQuestions=k(()=>this.questions().filter(t=>!this.isAnswersLockActive()||this.isQuestionActive(t)));toggleQuestion=t=>{this.isAnswersLockActive()||this.state.packlist.answers.update(i=>nt(it({},i),{[t.variable]:!i[t.variable]}));};goToRulesEdit(){this.state.router.go("rules->edit");}animationsDisabled=b(!0);constructor(){M(()=>{this.animationsDisabled.set(!this.state.config.animations());});}static ɵfac=function(i){return new(i||e)();};static ɵcmp=x({type:e,selectors:[["app-display-questions"]],decls:2,vars:1,consts:()=>{let t;return t="Keine Fragen verf\xFCgbar, bitte "+"\uFFFD#3\uFFFD"+" erstelle "+"\uFFFD/#3\uFFFD"+" welche.",[t,[1,"flex","flex-col","items-center"],[1,"text-center"],["type","button",1,"link","inline","p-0","underline",3,"click"],["role","checkbox","tabindex","0",1,"card","mb-1","flex","flex-row","items-center","justify-between","overflow-hidden",3,"disabled"],["role","checkbox","tabindex","0",1,"card","mb-1","flex","flex-row","items-center","justify-between","overflow-hidden",3,"click","keypress"],["aria-hidden","true",1,"select-none","font-bold"]];},template:function(i,n){i&1&&u(0,Ut,4,0,"div",1)(1,Qt,3,2,"div"),i&2&&m(n.questions().length?1:0);},dependencies:[z],encapsulation:2,data:{animation:[zt]},changeDetection:0});}return e;})();function Xt(e,r){e&1&&T(0,"app-icon-lock",9);}function qt(e,r){e&1&&T(0,"app-icon-lock-open",9);}function jt(e,r){if(e&1){let t=P();l(0,"button",10),S("click",function(){c(t);let n=o(2);return _(n.toggleStats("distribution"));}),a(),l(1,"button",11),S("click",function(){c(t);let n=o(2);return _(n.toggleStats("heaviestItems"));}),a();}if(e&2){let t=o(2);f("aria-pressed",t.statsVisible()==="distribution"),s(),f("aria-pressed",t.statsVisible()==="heaviestItems");}}function Yt(e,r){if(e&1){let t=P();l(0,"div",0)(1,"button",8),S("click",function(){c(t);let n=o();return _(n.toggleAnswersLock());})("keypress",function(){c(t);let n=o();return _(n.toggleAnswersLock());}),u(2,Xt,1,0,"app-icon-lock",9)(3,qt,1,0,"app-icon-lock-open",9),a(),u(4,jt,2,2),a();}if(e&2){let t=o();s(),f("aria-pressed",t.isAnswersLockActive()),s(),m(t.isAnswersLockActive()?2:3),s(2),m(t.trackWeight()?4:-1);}}function Ht(e,r){if(e&1&&(l(0,"div",2),T(1,"cmp-pie-chart",12),a()),e&2){let t=o();s(),C("segments",t.weightStats());}}function Jt(e,r){if(e&1){let t=P();l(0,"div",3)(1,"div",13)(2,"div",14)(3,"button",15),S("click",function(){c(t);let n=o();return _(n.previousPage());}),a(),l(4,"button",16),S("click",function(){c(t);let n=o();return _(n.nextPage());}),a()(),l(5,"div",17),T(6,"cmp-bar-chart",18),st(7,"slice"),a()()();}if(e&2){let t=o();s(3),C("disabled",t.currentPage()<=0),s(),C("disabled",t.currentPage()>=t.lastPage()),s(2),C("bars",rt(7,3,t.heaviestItems(),t.currentPage()*10,(t.currentPage()+1)*10));}}function Zt(e,r){if(e&1&&T(0,"cmp-progress",5),e&2){let t=o();C("value",t.stats().checkedWeight)("max",t.stats().totalWeight)("animationDuration",t.animationDuration()),f("aria-label",t.statusLabelText());}}function te(e,r){if(e&1&&T(0,"cmp-progress",6),e&2){let t=o();C("value",t.stats().checkedItems)("max",t.stats().totalItems)("animationDuration",t.animationDuration()),f("aria-label",t.statusLabelText());}}function ee(e,r){if(e&1&&(l(0,"span"),A(1),a()),e&2){let t=o();s(),w(t.serializeWeightPartition(t.stats().checkedWeight,t.stats().totalWeight));}}var ie=E("animateDiagram",[I("* <=> *",[D([g("div.card:enter",v(N),{optional:!0}),g("div.card:leave",v(K),{optional:!0})])])]),Et=(()=>{class e{state=L(y);questionsAvailable=k(()=>this.state.active.questions().length>0);isAnswersLockActive=this.state.packlist.answersLocked;trackWeight=this.state.config.trackWeight;stats=this.state.packlist.stats;toggleAnswersLock(){this.state.packlist.answersLocked.update(t=>!t);}serializeWeightPartition=X;statusLabelText=k(()=>{let t=this.stats().totalWeight,i=this.stats().checkedWeight,n=this.stats().checkedItems.toString(),p=this.stats().totalItems.toString();return this.trackWeight()?"Du hast "+$(i,void 0,1)+" von "+$(t,void 0,1)+" gepackt, indem du "+n+" von "+p+" Gegenst\xE4nde gepackt hast.":"Du hast "+n+" von "+p+" Gegenst\xE4nde gepackt.";});animationDuration=b(0);statsVisible=this.state.packlist.statsVisible;toggleStats(t){this.state.packlist.statsVisible.update(i=>{if(i!==t)return t;});}weightStats=k(()=>{let t=this.stats().totalWeight;return this.state.packlist.model().map(i=>({name:i.name,value:i.totalWeight/t})).filter(i=>i.value>0);});heaviestItems=k(()=>this.state.packlist.model().flatMap(t=>t.items).filter(t=>t.weight&&!t.skipped&&t.weight>0).toSorted((t,i)=>i.weight-t.weight).reduce((t,i)=>{let n=(t.max||i.weight)??0,p={name:`${i.name} (${$(i.weight)})`,value:(i.weight??0)/n};return{max:n,items:[...t.items,p]};},{max:NaN,items:[]}).items);currentPage=b(0);lastPage=k(()=>Math.trunc(this.heaviestItems().length/10));previousPage(){this.currentPage.update(t=>Math.max(0,t-1));}nextPage(){this.currentPage.update(t=>Math.min(this.lastPage(),t+1));}animationsDisabled=b(!0);constructor(){M(()=>{this.animationsDisabled.set(!this.state.config.animations()),this.animationDuration.set(this.state.config.animations()?500:0);});}static ɵfac=function(i){return new(i||e)();};static ɵcmp=x({type:e,selectors:[["app-packlist-status"]],decls:12,vars:9,consts:()=>{let t;t="Gewicht-Packfortschritt";let i;i="Gegenstandspackfortschritt";let n;n="Antworten sperren";let p;p="Zeige Gewichtsverteilung an";let Z;Z="Zeige die schwersten Gegenst\xE4nde an";let tt;tt="Vorherige Seite";let et;return et="N\xE4chste Seite",[[1,"flex","justify-center","gap-x-4"],[1,"contents"],[1,"card","mb-1"],[1,"card","mb-1","flex","flex-col","items-center"],[1,"mb-1","flex"],["title",t,"aria-live","polite",1,"grow",3,"value","max","animationDuration"],["title",i,"aria-live","polite",1,"grow",3,"value","max","animationDuration"],["aria-hidden","true",1,"flex","flex-col","items-center"],["type","button","role","button","aria-label",n,1,"link",3,"click","keypress"],[1,"h-6","w-6"],["iconPieChart","","iconClass","h-6 w-6","type","button","role","button","aria-label",p,1,"link",3,"click"],["iconBarChart","","iconClass","h-6 w-6 rotate-90","type","button","role","button","aria-label",Z,1,"link",3,"click"],["chartClass","max-w-[300px]",3,"segments"],[1,"flex","w-full","max-w-[350px]","flex-row","gap-1"],[1,"flex","flex-col","justify-between"],["iconArrowUpward","","iconClass","h-6 w-6","type","button","role","button","aria-label",tt,1,"link","px-1",3,"click","disabled"],["iconArrowDownward","","iconClass","h-6 w-6","type","button","role","button","aria-label",et,1,"link","px-1",3,"click","disabled"],[1,"flex-grow"],[3,"bars"]];},template:function(i,n){i&1&&(u(0,Yt,5,3,"div",0),l(1,"div",1),u(2,Ht,2,1,"div",2)(3,Jt,8,7,"div",3),a(),l(4,"div",2)(5,"div",4),u(6,Zt,1,4,"cmp-progress",5)(7,te,1,4,"cmp-progress",6),a(),l(8,"div",7)(9,"span"),A(10),a(),u(11,ee,2,1,"span"),a()()),i&2&&(m(n.questionsAvailable()?0:-1),s(),C("@animateDiagram",n.statsVisible())("@.disabled",n.animationsDisabled()),s(),m(n.statsVisible()==="distribution"?2:-1),s(),m(n.statsVisible()==="heaviestItems"?3:-1),s(3),m(n.trackWeight()?6:7),s(4),Q("",n.stats().checkedItems," / ",n.stats().totalItems,""),s(),m(n.trackWeight()?11:-1));},dependencies:[St,Tt,Ct,dt,pt,mt,_t,At,gt,lt],encapsulation:2,data:{animation:[ie]},changeDetection:0});}return e;})();function ne(e,r){e&1&&T(0,"app-display-questions")(1,"app-packlist-status")(2,"app-display-items");}function oe(e,r){if(e&1){let t=P();l(0,"div",1)(1,"p",2),U(2,0),l(3,"button",3),S("click",function(){c(t);let n=o();return _(n.goToConfigImport());}),a(),l(4,"button",3),S("click",function(){c(t);let n=o();return _(n.goToRulesEdit());}),a(),W(),a()();}}var je=(()=>{class e{state=L(y);rulesAvailable=k(()=>this.state.rules.parsed().length>0);goToRulesEdit(){this.state.router.go("rules->edit");}goToConfigImport(){this.state.router.go("config#import");}static ɵfac=function(i){return new(i||e)();};static ɵcmp=x({type:e,selectors:[["app-packlist"]],decls:2,vars:1,consts:()=>{let t;return t="Keine Regeln verf\xFCgbar, bitte "+"\uFFFD#3\uFFFD"+" importiere "+"[\uFFFD/#3\uFFFD|\uFFFD/#4\uFFFD]"+" oder "+"\uFFFD#4\uFFFD"+" erstelle "+"[\uFFFD/#3\uFFFD|\uFFFD/#4\uFFFD]"+" welche.",t=at(t),[t,[1,"flex","flex-col","items-center"],[1,"text-center"],["type","button",1,"link","inline","p-0","underline",3,"click"]];},template:function(i,n){i&1&&u(0,ne,3,0)(1,oe,5,0,"div",1),i&2&&m(n.rulesAvailable()?0:1);},dependencies:[kt,It,Et],encapsulation:2,changeDetection:0});}return e;})();export{je as PacklistComponent};/**i18n:15693acdce30f00c919aab2f8515f765f213a298081817f04f3b278c0f34be30*/