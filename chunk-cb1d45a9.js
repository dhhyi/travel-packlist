import{f as ee,g as te,h as ie,i as ne,q as O}from"./chunk-3d95cbb7.js";import{b as V,q as E}from"./chunk-85ab26cf.js";import{d as Z}from"./chunk-b64dc016.js";import{$a as d,Aa as s,Ab as M,Eb as B,Fb as v,Gb as T,Ib as $,Ka as x,Kb as U,Lb as H,Pa as p,Tb as h,W as Y,Wa as z,Xa as A,aa as k,ab as X,cb as F,cc as R,db as D,eb as r,ec as J,fb as c,gb as C,ia as m,ib as P,ja as u,jb as K,kb as W,lb as j,ob as Q,pb as S,qb as o,sa as q,ta as L,xb as g,yb as y,zb as N}from"./chunk-bb37b735.js";import{a as w,b}from"./chunk-fde9b292.js";function re(t,a){t&1&&C(0,"app-icon-checkmark");}function _e(t,a){if(t&1&&g(0),t&2){let e=o();M(" ",e.count()," / ",e.total(),`
`);}}var oe=(()=>{class t{count=L(0);total=L(0);static ɵfac=function(i){return new(i||t)();};static ɵcmp=x({type:t,selectors:[["app-status"]],inputs:{count:[1,"count"],total:[1,"total"]},decls:2,vars:1,template:function(i,n){i&1&&p(0,re,1,0,"app-icon-checkmark")(1,_e,1,2),i&2&&d(n.count()===n.total()?0:1);},dependencies:[O],encapsulation:2,changeDetection:0});}return t;})();function ae(t){return`${t.category}-${t.name}`;}var se=(()=>{class t{state=k(E);checkedItems=this.state.signal("checkedItems");collapsedCategories=this.state.signal("collapsedCategories");isItemChecked(e){return this.checkedItems().includes(ae(e));}isCategoryCollapsed(e){return this.collapsedCategories().includes(e);}toggleCheckedItem(e){let i=ae(e);this.checkedItems().includes(i)?this.checkedItems.update(n=>n.filter(l=>l!==i)):this.checkedItems.update(n=>[...n,i]);}toggleCategoryCollapse(e){this.collapsedCategories().includes(e)?this.collapsedCategories.update(i=>i.filter(n=>n!==e)):this.collapsedCategories.update(i=>[...i,e]);}packlist=h(()=>{let e=this.state.signal("activeItems")(),i=0,n=0,l=0,I=e.reduce((f,_)=>(f[_.category]||(f[_.category]={items:[],checked:0,collapsed:this.isCategoryCollapsed(_.category),totalWeight:0,checkedWeight:0}),f[_.category].items.push(b(w({},_),{checked:this.isItemChecked(_)})),this.isItemChecked(_)&&(i++,f[_.category].checked++,n+=_.weight??0,f[_.category].checkedWeight+=_.weight??0),f[_.category].totalWeight+=_.weight??0,l+=_.weight??0,f),{});return{numberOfItems:e.length,categories:I,checked:i,checkedWeight:n,totalWeight:l};});static ɵfac=function(i){return new(i||t)();};static ɵprov=Y({token:t,factory:t.ɵfac,providedIn:"root"});}return t;})();var pe=(t,a)=>a.key,de=t=>({"text-slate-600 line-through dark:text-slate-400":t});function me(t,a){if(t&1&&(r(0,"div",3),C(1,"progress",4),c(),r(2,"div",2)(3,"span",5),g(4),c(),r(5,"span",6),g(6),c()()),t&2){let e=o(),i=T(1),n=T(2),l=T(3),I=T(4);s(),A("value",l)("max",I),s(3),M("",i," / ",n,""),s(2),y(e.serializeWeightPartition(l,I));}}function ue(t,a){if(t&1&&(r(0,"div",3),C(1,"progress",7),c(),r(2,"div",8)(3,"span",9),g(4),c()()),t&2){o();let e=T(1),i=T(2);s(),A("value",e)("max",i),s(3),M("",e," / ",i,"");}}function Ce(t,a){t&1&&(r(0,"div",2)(1,"p",10),j(2,0),c()());}function ge(t,a){t&1&&C(0,"app-icon-key-right",13);}function Te(t,a){t&1&&C(0,"app-icon-key-down",13);}function Se(t,a){if(t&1&&g(0),t&2){o(2);let e=T(1),i=o();N(" (",i.serializeWeight(e.checkedWeight,void 0,1),") ");}}function fe(t,a){if(t&1&&g(0),t&2){o(2);let e=T(1),i=o();N(" (",i.serializeWeightPartition(e.checkedWeight,e.totalWeight),") ");}}function ke(t,a){if(t&1&&(r(0,"span",15),p(1,Se,1,1)(2,fe,1,1),c()),t&2){o();let e=T(1);s(),d(e.checkedWeight===e.totalWeight?1:2);}}function Pe(t,a){if(t&1&&(r(0,"span",20),g(1),c()),t&2){let e=o().$implicit,i=o(3);s(),y(i.serializeWeight(e.weight));}}function Ie(t,a){if(t&1){let e=P();r(0,"li",19),S("click",function(){let n=m(e).$implicit,l=o(3);return u(l.toggleCheckedItem(n));})("keypress",function(){let n=m(e).$implicit,l=o(3);return u(l.toggleCheckedItem(n));}),g(1),p(2,Pe,2,1,"span",20),c();}if(t&2){let e=a.$implicit,i=o(3);A("ngClass",$(4,de,e.checked)),z("aria-pressed",e.checked),s(),N(" ",e.name," "),s(),d(e.weight&&i.trackWeight()?2:-1);}}function xe(t,a){if(t&1&&(r(0,"ul",17),F(1,Ie,3,6,"li",18,X),c()),t&2){o();let e=T(1);s(),D(e.items);}}function Ae(t,a){if(t&1){let e=P();B(0)(1),r(2,"div",1)(3,"div",11),S("click",function(){m(e);let n=T(0),l=o();return u(l.toggleCategoryCollapse(n));})("keypress",function(){m(e);let n=T(0),l=o();return u(l.toggleCategoryCollapse(n));}),r(4,"div",12),p(5,ge,1,0,"app-icon-key-right",13)(6,Te,1,0,"app-icon-key-down",13),r(7,"span",14),g(8),c(),p(9,ke,3,1,"span",15),c(),C(10,"app-status",16),c(),p(11,xe,3,0,"ul",17),c();}if(t&2){let e=a.$implicit,i=o(),n=v(e.key);s();let l=v(e.value);s(4),d(l.collapsed?5:6),s(3),y(n),s(),d(i.trackWeight()&&l.totalWeight?9:-1),s(),A("count",l.checked)("total",l.items.length),s(),d(l.collapsed?-1:11);}}var le=(()=>{class t{state=k(E);facade=k(se);view=this.facade.packlist;orderBy=h(()=>this.state.signal("categorySorting")()==="definition"?()=>0:void 0);trackWeight=this.state.signal("trackWeight");serializeWeight=V;serializeWeightPartition(e,i){return V(e,void 0,1)+" / "+V(i,void 0,1);}toggleCheckedItem(e){this.facade.toggleCheckedItem(e);}toggleCategoryCollapse(e){this.facade.toggleCategoryCollapse(e);}static ɵfac=function(i){return new(i||t)();};static ɵcmp=x({type:t,selectors:[["app-display-items"]],decls:11,vars:9,consts:()=>{let e;e="weight packing progress";let i;i="item packing status";let n;n="weight packing status";let l;l="item packing progress";let I;I="item packing status";let f;return f="No items available.",[f,[1,"card","mb-1"],[1,"flex","flex-col","items-center"],[1,"mb-1","flex"],["role","progressbar","title",e,1,"grow",3,"value","max"],["title",i,"aria-live","polite"],["title",n,"aria-live","polite"],["role","progressbar","title",l,1,"grow",3,"value","max"],[1,"flex","justify-center"],["title",I,"aria-live","polite"],[1,"text-center"],["role","button","tabindex","0",1,"flex","justify-between",3,"click","keypress"],[1,"flex","items-center","gap-1"],[1,"h-6","w-6"],[1,"font-bold","italic"],[1,"text-sm"],[3,"count","total"],[1,"pt-2"],["role","button","tabindex","0",1,"flex","justify-between",3,"ngClass"],["role","button","tabindex","0",1,"flex","justify-between",3,"click","keypress","ngClass"],[1,"italic"]];},template:function(i,n){i&1&&(r(0,"div",1),B(1)(2)(3)(4),p(5,me,7,5)(6,ue,5,4),c(),p(7,Ce,3,0,"div",2),F(8,Ae,12,8,"div",1,pe),U(10,"keyvalue")),i&2&&(s(),v(n.view().checked),s(),v(n.view().numberOfItems),s(),v(n.view().checkedWeight),s(),v(n.view().totalWeight),s(),d(n.trackWeight()?5:6),s(2),d(n.view().numberOfItems?-1:7),s(),D(H(10,6,n.view().categories,n.orderBy())));},dependencies:[J,oe,R,ne,ie],styles:["progress[_ngcontent-%COMP%]::-webkit-progress-bar{border:2px solid #ccc;border-radius:5px;background-color:transparent}progress[_ngcontent-%COMP%]::-webkit-progress-value{background-color:#999;border-radius:3px}"],changeDetection:0});}return t;})();function he(t,a){t&1&&(r(0,"span"),C(1,"app-icon-checkmark"),c());}function Ee(t,a){if(t&1){let e=P();r(0,"div",1),S("click",function(){m(e);let n=o();return u(n.click());})("keypress",function(){m(e);let n=o();return u(n.click());}),r(1,"span",2),g(2),c(),p(3,he,2,0,"span"),c();}if(t&2){let e=o();s(2),y(a),s(),d(e.value()?3:-1);}}var ce=(()=>{class t{question=L(void 0);value=L(void 0);valueChange=q();state=k(E);click(){this.state.get("answersLocked")||this.valueChange.emit(!this.value());}static ɵfac=function(i){return new(i||t)();};static ɵcmp=x({type:t,selectors:[["app-display-question"]],inputs:{question:[1,"question"],value:[1,"value"]},outputs:{valueChange:"valueChange"},decls:1,vars:1,consts:[["role","button","tabindex","0",1,"flex","flex-row","justify-between"],["role","button","tabindex","0",1,"flex","flex-row","justify-between",3,"click","keypress"],[1,"font-bold"]],template:function(i,n){if(i&1&&p(0,Ee,4,2,"div",0),i&2){let l;d((l=n.question())?0:-1,l);}},dependencies:[O],encapsulation:2,changeDetection:0});}return t;})();var ve=(t,a)=>a.question,Le=t=>({disabled:t});function ye(t,a){if(t&1){let e=P();r(0,"div",2)(1,"p",3),K(2,0),r(3,"button",4),S("click",function(){m(e);let n=o(2);return u(n.goToRulesEdit());}),c(),W(),c()();}}function Fe(t,a){if(t&1){let e=P();r(0,"div",5)(1,"app-display-question",9),S("valueChange",function(n){let l=m(e).$implicit,I=o(3);return u(I.modelChange(l.variable,n));}),c()();}if(t&2){let e=a.$implicit,i=o(3);A("ngClass",$(3,Le,i.isLockActive())),s(),A("question",e.question)("value",i.model()[e.variable]);}}function De(t,a){t&1&&C(0,"app-icon-lock",8);}function Me(t,a){t&1&&C(0,"app-icon-lock-open",8);}function we(t,a){if(t&1){let e=P();F(0,Fe,2,5,"div",5,ve),r(2,"div",6)(3,"button",7),S("click",function(){m(e);let n=o(2);return u(n.toggleLock());}),p(4,De,1,0,"app-icon-lock",8)(5,Me,1,0,"app-icon-lock-open",8),c()(),C(6,"app-display-items");}if(t&2){let e=o(2);D(e.questions()),s(4),d(e.isLockActive()?4:5);}}function be(t,a){if(t&1&&p(0,ye,4,0,"div",2)(1,we,7,1),t&2){let e=o();d(e.questionsAvailable()?1:0);}}function Ne(t,a){if(t&1){let e=P();r(0,"div",2)(1,"p",3),K(2,1),r(3,"button",4),S("click",function(){m(e);let n=o();return u(n.goToConfigImport());}),c(),r(4,"button",4),S("click",function(){m(e);let n=o();return u(n.goToRulesEdit());}),c(),W(),c()();}}var Tt=(()=>{class t{router=k(Z);state=k(E);activeQuestions=this.state.signal("activeQuestions");isLockActive=this.state.signal("answersLocked");model=this.state.signal("answers");rulesAvailable=h(()=>this.state.signal("numberOfRules")()>0);questions=h(()=>this.activeQuestions().filter(e=>!this.isLockActive()||this.model()[e.variable]));questionsAvailable=h(()=>this.activeQuestions().length>0);modelChange(e,i){this.model.update(n=>b(w({},n),{[e]:i}));}toggleLock(){this.isLockActive.update(e=>!e);}goToRulesEdit(){this.router.navigate(["/rules"]).then(()=>{this.state.set("rulesMode","edit");});}goToConfigImport(){this.router.navigate(["/config"],{fragment:"import"});}static ɵfac=function(i){return new(i||t)();};static ɵcmp=x({type:t,selectors:[["app-packlist"]],decls:2,vars:1,consts:()=>{let e;e=" No questions available, please "+"\uFFFD#3\uFFFD"+" create "+"\uFFFD/#3\uFFFD"+" some. ";let i;return i=" No rules available, please "+"\uFFFD#3\uFFFD"+" import "+"[\uFFFD/#3\uFFFD|\uFFFD/#4\uFFFD]"+" or "+"\uFFFD#4\uFFFD"+" create "+"[\uFFFD/#3\uFFFD|\uFFFD/#4\uFFFD]"+" some. ",i=Q(i),[e,i,[1,"flex","flex-col","items-center"],[1,"text-center"],["type","button",1,"link","inline","p-0","underline",3,"click"],[1,"card","mb-1",3,"ngClass"],[1,"flex","justify-center"],["type","button",1,"link",3,"click"],[1,"h-6","w-6"],[3,"valueChange","question","value"]];},template:function(i,n){i&1&&p(0,be,2,1)(1,Ne,5,0,"div",2),i&2&&d(n.rulesAvailable()?0:1);},dependencies:[ce,le,ee,te,R],encapsulation:2,changeDetection:0});}return t;})();export{Tt as default};/**i18n:dedd5470af1d8ff9fad383437db3f2db99f1a4dd222b97ea99c2e928bb12df18*/