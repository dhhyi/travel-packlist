import{m as oe,o as T}from"./chunk-3632S4Y7.js";import{c as Q,e as ie}from"./chunk-FJK5ZZIC.js";import{Ab as D,Bb as r,Ha as s,Ib as C,Jb as V,Kb as j,Lb as E,Pb as J,Qb as L,Rb as h,Sa as m,Tb as Z,Vb as te,W as X,Wb as ne,Ya as g,aa as y,eb as b,ec as W,hb as w,ib as f,ja as k,jb as ee,ka as v,la as x,lb as F,mb as P,nb as a,ob as o,pb as l,rb as q,ua as Y,va as d}from"./chunk-E233IHIW.js";import{a as N,b as z}from"./chunk-7HGKORF3.js";var $=class t{class=d("h-[1rem] w-[1rem]");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-icon-lock-open"]],inputs:{class:[1,"class"]},decls:2,vars:2,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M240-160h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM240-160v-400 400Zm0 80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h280v-80q0-83 58.5-141.5T720-920q83 0 141.5 58.5T920-720h-80q0-50-35-85t-85-35q-50 0-85 35t-35 85v80h120q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Z"]],template:function(e,i){e&1&&(x(),a(0,"svg",0),l(1,"path",1),o()),e&2&&w(i.class())},encapsulation:2,changeDetection:0})};var B=class t{class=d("h-[1rem] w-[1rem]");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-icon-lock"]],inputs:{class:[1,"class"]},decls:2,vars:2,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Zm0-80h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM360-640h240v-80q0-50-35-85t-85-35q-50 0-85 35t-35 85v80ZM240-160v-400 400Z"]],template:function(e,i){e&1&&(x(),a(0,"svg",0),l(1,"path",1),o()),e&2&&w(i.class())},encapsulation:2,changeDetection:0})};var G=class t{class=d("h-[1rem] w-[1rem]");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-icon-key-down"]],inputs:{class:[1,"class"]},decls:2,vars:2,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M480-344 240-584l56-56 184 184 184-184 56 56-240 240Z"]],template:function(e,i){e&1&&(x(),a(0,"svg",0),l(1,"path",1),o()),e&2&&w(i.class())},encapsulation:2,changeDetection:0})};var K=class t{class=d("h-[1rem] w-[1rem]");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-icon-key-right"]],inputs:{class:[1,"class"]},decls:2,vars:2,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z"]],template:function(e,i){e&1&&(x(),a(0,"svg",0),l(1,"path",1),o()),e&2&&w(i.class())},encapsulation:2,changeDetection:0})};var M=class t{class=d("h-[1rem] w-[1rem]");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-icon-checkmark"]],inputs:{class:[1,"class"]},decls:2,vars:2,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","300 -1000 500 800"],["d","M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"]],template:function(e,i){e&1&&(x(),a(0,"svg",0),l(1,"path",1),o()),e&2&&w(i.class())},encapsulation:2,changeDetection:0})};function se(t,n){t&1&&l(0,"app-icon-checkmark")}function ce(t,n){if(t&1&&C(0),t&2){let e=r();E(" ",e.count()," / ",e.total(),`
`)}}var O=class t{count=d(0);total=d(0);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-status"]],inputs:{count:[1,"count"],total:[1,"total"]},decls:2,vars:1,template:function(e,i){e&1&&g(0,se,1,0,"app-icon-checkmark")(1,ce,1,2),e&2&&f(i.count()===i.total()?0:1)},dependencies:[M],encapsulation:2,changeDetection:0})};function ae(t){return`${t.category}-${t.name}`}var R=class t{state=y(T);checkedItems=this.state.signal("checkedItems");collapsedCategories=this.state.signal("collapsedCategories");isItemChecked(n){return this.checkedItems().includes(ae(n))}isCategoryCollapsed(n){return this.collapsedCategories().includes(n)}toggleCheckedItem(n){let e=ae(n);this.checkedItems().includes(e)?this.checkedItems.update(i=>i.filter(c=>c!==e)):this.checkedItems.update(i=>[...i,e])}toggleCategoryCollapse(n){this.collapsedCategories().includes(n)?this.collapsedCategories.update(e=>e.filter(i=>i!==n)):this.collapsedCategories.update(e=>[...e,n])}packlist=W(()=>{let n=this.state.signal("activeItems")(),e=0,i=0,c=0,p=n.reduce((_,u)=>(_[u.category]||(_[u.category]={items:[],checked:0,collapsed:this.isCategoryCollapsed(u.category),totalWeight:0,checkedWeight:0}),_[u.category].items.push(z(N({},u),{checked:this.isItemChecked(u)})),this.isItemChecked(u)&&(e++,_[u.category].checked++,i+=u.weight??0,_[u.category].checkedWeight+=u.weight??0),_[u.category].totalWeight+=u.weight??0,c+=u.weight??0,_),{});return{numberOfItems:n.length,categories:p,checked:e,checkedWeight:i,totalWeight:c}});static \u0275fac=function(e){return new(e||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})};var re=(t,n)=>n.key,le=t=>({"text-slate-500 line-through":t});function pe(t,n){if(t&1&&(a(0,"div",1),l(1,"progress",2),o(),a(2,"div",3)(3,"span"),C(4),o(),a(5,"span"),C(6),o()()),t&2){let e=r(),i=h(1),c=h(2),p=h(3),_=h(4);s(),b("value",p)("max",_),s(3),E("",i," / ",c,""),s(2),V(e.serializeWeightPartition(p,_))}}function me(t,n){if(t&1&&(a(0,"div",1),l(1,"progress",2),o(),a(2,"div",4)(3,"span"),C(4),o()()),t&2){r();let e=h(1),i=h(2);s(),b("value",e)("max",i),s(3),E("",e," / ",i,"")}}function de(t,n){t&1&&l(0,"app-icon-key-right",7)}function ue(t,n){t&1&&l(0,"app-icon-key-down",7)}function ge(t,n){if(t&1&&C(0),t&2){r(2);let e=h(1),i=r();j(" (",i.serializeWeight(e.checkedWeight,void 0,1),") ")}}function fe(t,n){if(t&1&&C(0),t&2){r(2);let e=h(1),i=r();j(" (",i.serializeWeightPartition(e.checkedWeight,e.totalWeight),") ")}}function Ce(t,n){if(t&1&&(a(0,"span",9),g(1,ge,1,1)(2,fe,1,1),o()),t&2){r();let e=h(1);s(),f(e.checkedWeight===e.totalWeight?1:2)}}function he(t,n){if(t&1&&(a(0,"span",14),C(1),o()),t&2){let e=r().$implicit,i=r(3);s(),V(i.serializeWeight(e.weight))}}function _e(t,n){if(t&1){let e=q();a(0,"li",13),D("click",function(){let c=k(e).$implicit,p=r(3);return v(p.toggleCheckedItem(c))})("keypress",function(){let c=k(e).$implicit,p=r(3);return v(p.toggleCheckedItem(c))}),C(1),g(2,he,2,1,"span",14),o()}if(t&2){let e=n.$implicit,i=r(3);b("ngClass",Z(3,le,e.checked)),s(),j(" ",e.name," "),s(),f(e.weight&&i.trackWeight()?2:-1)}}function ye(t,n){if(t&1&&(a(0,"ul",11),F(1,_e,3,5,"li",12,ee),o()),t&2){r();let e=h(1);s(),P(e.items)}}function ke(t,n){if(t&1){let e=q();J(0)(1),a(2,"div",0)(3,"div",5),D("click",function(){k(e);let c=h(0),p=r();return v(p.toggleCategoryCollapse(c))})("keypress",function(){k(e);let c=h(0),p=r();return v(p.toggleCategoryCollapse(c))}),a(4,"div",6),g(5,de,1,0,"app-icon-key-right",7)(6,ue,1,0,"app-icon-key-down",7),a(7,"span",8),C(8),o(),g(9,Ce,3,1,"span",9),o(),l(10,"app-status",10),o(),g(11,ye,3,0,"ul",11),o()}if(t&2){let e=n.$implicit,i=r(),c=L(e.key);s();let p=L(e.value);s(4),f(p.collapsed?5:6),s(3),V(c),s(),f(i.trackWeight()&&p.totalWeight?9:-1),s(),b("count",p.checked)("total",p.items.length),s(),f(p.collapsed?-1:11)}}var A=class t{state=y(T);facade=y(R);view=this.facade.packlist;orderBy=W(()=>this.state.signal("categorySorting")()==="definition"?()=>0:void 0);trackWeight=this.state.signal("trackWeight");serializer=y(oe);serializeWeight=this.serializer.serializeWeight.bind(this.serializer);serializeWeightPartition(n,e){return this.serializer.serializeWeight(n,void 0,1)+" / "+this.serializer.serializeWeight(e,void 0,1)}toggleCheckedItem(n){this.facade.toggleCheckedItem(n)}toggleCategoryCollapse(n){this.facade.toggleCategoryCollapse(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-display-items"]],decls:10,vars:8,consts:[[1,"card","mb-1"],[1,"mb-1","flex"],[1,"grow",3,"value","max"],[1,"flex","flex-col","items-center"],[1,"flex","justify-center"],["role","button","tabindex","0",1,"flex","justify-between",3,"click","keypress"],[1,"flex","items-center","gap-1"],[1,"h-6","w-6"],[1,"font-bold","italic"],[1,"text-sm"],[3,"count","total"],[1,"pt-2"],["role","button","tabindex","0",1,"flex","justify-between",3,"ngClass"],["role","button","tabindex","0",1,"flex","justify-between",3,"click","keypress","ngClass"],[1,"italic"]],template:function(e,i){e&1&&(a(0,"div",0),J(1)(2)(3)(4),g(5,pe,7,5)(6,me,5,4),o(),F(7,ke,12,8,"div",0,re),te(9,"keyvalue")),e&2&&(s(),L(i.view().checked),s(),L(i.view().numberOfItems),s(),L(i.view().checkedWeight),s(),L(i.view().totalWeight),s(),f(i.trackWeight()?5:6),s(2),P(ne(9,5,i.view().categories,i.orderBy())))},dependencies:[ie,O,Q,G,K],styles:["progress[_ngcontent-%COMP%]::-webkit-progress-bar{border:2px solid #ccc;border-radius:5px;background-color:transparent}progress[_ngcontent-%COMP%]::-webkit-progress-value{background-color:#999;border-radius:3px}"],changeDetection:0})};function ve(t,n){t&1&&(a(0,"span"),l(1,"app-icon-checkmark"),o())}function xe(t,n){if(t&1){let e=q();a(0,"div",1),D("click",function(){k(e);let c=r();return v(c.click())})("keypress",function(){k(e);let c=r();return v(c.click())}),a(1,"span",2),C(2),o(),g(3,ve,2,0,"span"),o()}if(t&2){let e=r();s(2),V(n),s(),f(e.value()?3:-1)}}var H=class t{question=d(void 0);value=d(void 0);valueChange=Y();state=y(T);click(){this.state.get("answersLocked")||this.valueChange.emit(!this.value())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-display-question"]],inputs:{question:[1,"question"],value:[1,"value"]},outputs:{valueChange:"valueChange"},decls:1,vars:1,consts:[["role","button","tabindex","0",1,"flex","flex-row","justify-between"],["role","button","tabindex","0",1,"flex","flex-row","justify-between",3,"click","keypress"],[1,"font-bold"]],template:function(e,i){if(e&1&&g(0,xe,4,2,"div",0),e&2){let c;f((c=i.question())?0:-1,c)}},dependencies:[M],encapsulation:2,changeDetection:0})};var we=(t,n)=>n.question,Ie=t=>({disabled:t});function be(t,n){if(t&1){let e=q();a(0,"div",0)(1,"app-display-question",4),D("valueChange",function(c){let p=k(e).$implicit,_=r();return v(_.modelChange(p.variable,c))}),o()()}if(t&2){let e=n.$implicit,i=r();b("ngClass",Z(3,Ie,i.isLockActive())),s(),b("question",e.question)("value",i.model()[e.variable])}}function De(t,n){t&1&&l(0,"app-icon-lock",3)}function Te(t,n){t&1&&l(0,"app-icon-lock-open",3)}var U=class t{state=y(T);activeQuestions=this.state.signal("activeQuestions");isLockActive=this.state.signal("answersLocked");model=this.state.signal("answers");questions=W(()=>this.activeQuestions().filter(n=>!this.isLockActive()||this.model()[n.variable]));modelChange(n,e){this.model.update(i=>z(N({},i),{[n]:e}))}toggleLock(){this.isLockActive.update(n=>!n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-packlist"]],decls:7,vars:1,consts:[[1,"card","mb-1",3,"ngClass"],[1,"flex","justify-center"],["type","button",1,"link",3,"click"],[1,"h-6","w-6"],[3,"valueChange","question","value"]],template:function(e,i){e&1&&(F(0,be,2,5,"div",0,we),a(2,"div",1)(3,"button",2),D("click",function(){return i.toggleLock()}),g(4,De,1,0,"app-icon-lock",3)(5,Te,1,0,"app-icon-lock-open",3),o()(),l(6,"app-display-items")),e&2&&(P(i.questions()),s(4),f(i.isLockActive()?4:5))},dependencies:[H,A,$,B,Q],encapsulation:2,changeDetection:0})};export{U as default};
/**i18n:ce629f7757620cd455841d864165c42e946502d979ab9ef58d04496856a7546b*/
