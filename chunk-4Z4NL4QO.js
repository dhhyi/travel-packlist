import{f as j,n as Y,o as Z,p as ee,q as te}from"./chunk-QM4R6MNX.js";import{m as ie,o as I}from"./chunk-6N4MRW53.js";import{c as z,e as X}from"./chunk-FJK5ZZIC.js";import{Ab as v,Bb as s,Ha as o,Ib as _,Jb as T,Kb as E,Lb as V,Pb as A,Qb as w,Rb as g,Sa as y,Tb as q,Vb as J,W as K,Wb as U,Ya as m,aa as f,eb as k,ec as S,ib as d,ja as h,jb as H,ka as x,lb as W,mb as L,nb as c,ob as r,pb as u,rb as b,ua as R,va as D}from"./chunk-E233IHIW.js";import{a as F,b as P}from"./chunk-7HGKORF3.js";function oe(t,i){t&1&&u(0,"app-icon-checkmark")}function ae(t,i){if(t&1&&_(0),t&2){let e=s();V(" ",e.count()," / ",e.total(),`
`)}}var N=class t{count=D(0);total=D(0);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-status"]],inputs:{count:[1,"count"],total:[1,"total"]},decls:2,vars:1,template:function(e,n){e&1&&m(0,oe,1,0,"app-icon-checkmark")(1,ae,1,2),e&2&&d(n.count()===n.total()?0:1)},dependencies:[j],encapsulation:2,changeDetection:0})};function ne(t){return`${t.category}-${t.name}`}var $=class t{state=f(I);checkedItems=this.state.signal("checkedItems");collapsedCategories=this.state.signal("collapsedCategories");isItemChecked(i){return this.checkedItems().includes(ne(i))}isCategoryCollapsed(i){return this.collapsedCategories().includes(i)}toggleCheckedItem(i){let e=ne(i);this.checkedItems().includes(e)?this.checkedItems.update(n=>n.filter(a=>a!==e)):this.checkedItems.update(n=>[...n,e])}toggleCategoryCollapse(i){this.collapsedCategories().includes(i)?this.collapsedCategories.update(e=>e.filter(n=>n!==i)):this.collapsedCategories.update(e=>[...e,i])}packlist=S(()=>{let i=this.state.signal("activeItems")(),e=0,n=0,a=0,l=i.reduce((C,p)=>(C[p.category]||(C[p.category]={items:[],checked:0,collapsed:this.isCategoryCollapsed(p.category),totalWeight:0,checkedWeight:0}),C[p.category].items.push(P(F({},p),{checked:this.isItemChecked(p)})),this.isItemChecked(p)&&(e++,C[p.category].checked++,n+=p.weight??0,C[p.category].checkedWeight+=p.weight??0),C[p.category].totalWeight+=p.weight??0,a+=p.weight??0,C),{});return{numberOfItems:i.length,categories:l,checked:e,checkedWeight:n,totalWeight:a}});static \u0275fac=function(e){return new(e||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})};var se=(t,i)=>i.key,re=t=>({"text-slate-500 line-through":t});function ce(t,i){if(t&1&&(c(0,"div",1),u(1,"progress",2),r(),c(2,"div",3)(3,"span"),_(4),r(),c(5,"span"),_(6),r()()),t&2){let e=s(),n=g(1),a=g(2),l=g(3),C=g(4);o(),k("value",l)("max",C),o(3),V("",n," / ",a,""),o(2),T(e.serializeWeightPartition(l,C))}}function le(t,i){if(t&1&&(c(0,"div",1),u(1,"progress",2),r(),c(2,"div",4)(3,"span"),_(4),r()()),t&2){s();let e=g(1),n=g(2);o(),k("value",e)("max",n),o(3),V("",e," / ",n,"")}}function pe(t,i){t&1&&u(0,"app-icon-key-right",7)}function me(t,i){t&1&&u(0,"app-icon-key-down",7)}function de(t,i){if(t&1&&_(0),t&2){s(2);let e=g(1),n=s();E(" (",n.serializeWeight(e.checkedWeight,void 0,1),") ")}}function ue(t,i){if(t&1&&_(0),t&2){s(2);let e=g(1),n=s();E(" (",n.serializeWeightPartition(e.checkedWeight,e.totalWeight),") ")}}function _e(t,i){if(t&1&&(c(0,"span",9),m(1,de,1,1)(2,ue,1,1),r()),t&2){s();let e=g(1);o(),d(e.checkedWeight===e.totalWeight?1:2)}}function ge(t,i){if(t&1&&(c(0,"span",14),_(1),r()),t&2){let e=s().$implicit,n=s(3);o(),T(n.serializeWeight(e.weight))}}function Ce(t,i){if(t&1){let e=b();c(0,"li",13),v("click",function(){let a=h(e).$implicit,l=s(3);return x(l.toggleCheckedItem(a))})("keypress",function(){let a=h(e).$implicit,l=s(3);return x(l.toggleCheckedItem(a))}),_(1),m(2,ge,2,1,"span",14),r()}if(t&2){let e=i.$implicit,n=s(3);k("ngClass",q(3,re,e.checked)),o(),E(" ",e.name," "),o(),d(e.weight&&n.trackWeight()?2:-1)}}function fe(t,i){if(t&1&&(c(0,"ul",11),W(1,Ce,3,5,"li",12,H),r()),t&2){s();let e=g(1);o(),L(e.items)}}function he(t,i){if(t&1){let e=b();A(0)(1),c(2,"div",0)(3,"div",5),v("click",function(){h(e);let a=g(0),l=s();return x(l.toggleCategoryCollapse(a))})("keypress",function(){h(e);let a=g(0),l=s();return x(l.toggleCategoryCollapse(a))}),c(4,"div",6),m(5,pe,1,0,"app-icon-key-right",7)(6,me,1,0,"app-icon-key-down",7),c(7,"span",8),_(8),r(),m(9,_e,3,1,"span",9),r(),u(10,"app-status",10),r(),m(11,fe,3,0,"ul",11),r()}if(t&2){let e=i.$implicit,n=s(),a=w(e.key);o();let l=w(e.value);o(4),d(l.collapsed?5:6),o(3),T(a),o(),d(n.trackWeight()&&l.totalWeight?9:-1),o(),k("count",l.checked)("total",l.items.length),o(),d(l.collapsed?-1:11)}}var M=class t{state=f(I);facade=f($);view=this.facade.packlist;orderBy=S(()=>this.state.signal("categorySorting")()==="definition"?()=>0:void 0);trackWeight=this.state.signal("trackWeight");serializer=f(ie);serializeWeight=this.serializer.serializeWeight.bind(this.serializer);serializeWeightPartition(i,e){return this.serializer.serializeWeight(i,void 0,1)+" / "+this.serializer.serializeWeight(e,void 0,1)}toggleCheckedItem(i){this.facade.toggleCheckedItem(i)}toggleCategoryCollapse(i){this.facade.toggleCategoryCollapse(i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-display-items"]],decls:10,vars:8,consts:[[1,"card","mb-1"],[1,"mb-1","flex"],[1,"grow",3,"value","max"],[1,"flex","flex-col","items-center"],[1,"flex","justify-center"],["role","button","tabindex","0",1,"flex","justify-between",3,"click","keypress"],[1,"flex","items-center","gap-1"],[1,"h-6","w-6"],[1,"font-bold","italic"],[1,"text-sm"],[3,"count","total"],[1,"pt-2"],["role","button","tabindex","0",1,"flex","justify-between",3,"ngClass"],["role","button","tabindex","0",1,"flex","justify-between",3,"click","keypress","ngClass"],[1,"italic"]],template:function(e,n){e&1&&(c(0,"div",0),A(1)(2)(3)(4),m(5,ce,7,5)(6,le,5,4),r(),W(7,he,12,8,"div",0,se),J(9,"keyvalue")),e&2&&(o(),w(n.view().checked),o(),w(n.view().numberOfItems),o(),w(n.view().checkedWeight),o(),w(n.view().totalWeight),o(),d(n.trackWeight()?5:6),o(2),L(U(9,5,n.view().categories,n.orderBy())))},dependencies:[X,N,z,Y,Z],styles:["progress[_ngcontent-%COMP%]::-webkit-progress-bar{border:2px solid #ccc;border-radius:5px;background-color:transparent}progress[_ngcontent-%COMP%]::-webkit-progress-value{background-color:#999;border-radius:3px}"],changeDetection:0})};function xe(t,i){t&1&&(c(0,"span"),u(1,"app-icon-checkmark"),r())}function ye(t,i){if(t&1){let e=b();c(0,"div",1),v("click",function(){h(e);let a=s();return x(a.click())})("keypress",function(){h(e);let a=s();return x(a.click())}),c(1,"span",2),_(2),r(),m(3,xe,2,0,"span"),r()}if(t&2){let e=s();o(2),T(i),o(),d(e.value()?3:-1)}}var O=class t{question=D(void 0);value=D(void 0);valueChange=R();state=f(I);click(){this.state.get("answersLocked")||this.valueChange.emit(!this.value())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-display-question"]],inputs:{question:[1,"question"],value:[1,"value"]},outputs:{valueChange:"valueChange"},decls:1,vars:1,consts:[["role","button","tabindex","0",1,"flex","flex-row","justify-between"],["role","button","tabindex","0",1,"flex","flex-row","justify-between",3,"click","keypress"],[1,"font-bold"]],template:function(e,n){if(e&1&&m(0,ye,4,2,"div",0),e&2){let a;d((a=n.question())?0:-1,a)}},dependencies:[j],encapsulation:2,changeDetection:0})};var ke=(t,i)=>i.question,ve=t=>({disabled:t});function Ie(t,i){if(t&1){let e=b();c(0,"div",0)(1,"app-display-question",4),v("valueChange",function(a){let l=h(e).$implicit,C=s();return x(C.modelChange(l.variable,a))}),r()()}if(t&2){let e=i.$implicit,n=s();k("ngClass",q(3,ve,n.isLockActive())),o(),k("question",e.question)("value",n.model()[e.variable])}}function be(t,i){t&1&&u(0,"app-icon-lock",3)}function we(t,i){t&1&&u(0,"app-icon-lock-open",3)}var G=class t{state=f(I);activeQuestions=this.state.signal("activeQuestions");isLockActive=this.state.signal("answersLocked");model=this.state.signal("answers");questions=S(()=>this.activeQuestions().filter(i=>!this.isLockActive()||this.model()[i.variable]));modelChange(i,e){this.model.update(n=>P(F({},n),{[i]:e}))}toggleLock(){this.isLockActive.update(i=>!i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-packlist"]],decls:7,vars:1,consts:[[1,"card","mb-1",3,"ngClass"],[1,"flex","justify-center"],["type","button",1,"link",3,"click"],[1,"h-6","w-6"],[3,"valueChange","question","value"]],template:function(e,n){e&1&&(W(0,Ie,2,5,"div",0,ke),c(2,"div",1)(3,"button",2),v("click",function(){return n.toggleLock()}),m(4,be,1,0,"app-icon-lock",3)(5,we,1,0,"app-icon-lock-open",3),r()(),u(6,"app-display-items")),e&2&&(L(n.questions()),o(4),d(n.isLockActive()?4:5))},dependencies:[O,M,te,ee,z],encapsulation:2,changeDetection:0})};export{G as default};
/**i18n:ce629f7757620cd455841d864165c42e946502d979ab9ef58d04496856a7546b*/
