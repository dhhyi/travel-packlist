import{a as st,b as nt,d as it}from"./chunk-66971f89.js";import{$b as C,B as et,Ga as A,Vb as rt,W as T,Z as q,Zb as S,aa as b,da as tt,p as Xe}from"./chunk-e4f7fe75.js";import{a as x,b as ne}from"./chunk-86437c54.js";function or(s){return s.map(o=>o.toString()).map(o=>o+";").join(`

`);}function me(s,o,e=-1){if(!s)return"0g";let i=(e<0?s/1e3:(s/1e3).toFixed(e)).toString()+"kg",c=(s*1).toString()+"g";return o?o==="kg"?i:c:i.length<=c.length?i:c;}var D=class{condition;questions;items;constructor(o,e=[],i=[]){this.condition=o,this.questions=e,this.items=i;}toString(){let o=[];if(!(this.condition instanceof G)){let i=this.condition.toString();i&&o.push(i," ");}o.push(":-");let e=this.questions.map(i=>i.toString()).concat(this.items.map(i=>i.toString()));if(e.length===1&&o.length===1)o.push(" ",e[0]);else for(let i=0;i<e.length;i++){let c=e[i];i>0&&o.push(","),o.push(`
`,"   ",c);}return o.join("");}},j=class{question;variable;static NEW_QUESTION_NAME="New Question";static NEW_VARIABLE_NAME="new_variable";constructor(o,e){this.question=o,this.variable=e;}toString(){return this.question+" $"+this.variable;}},U=class{category;name;weight;static NEW_ITEM_NAME="New Item";static NEW_CATEGORY_NAME="New";constructor(o,e,i){this.category=o,this.name=e,this.weight=i;}toString(){let o=`[${this.category}] ${this.name}`.trim();return this.weight&&(o+=" "+me(this.weight)),o;}},N=class{variable;constructor(o){this.variable=o;}evaluate(o){return o[this.variable];}toString(){return this.variable;}},yr=(()=>{class s extends N{static string="please_select";constructor(){super(s.string);}}return s;})(),G=(()=>{class s extends N{static string="always";constructor(){super(s.string);}evaluate(){return!0;}}return s;})(),L=class{not;constructor(o){this.not=o;}evaluate(o){return!this.not.evaluate(o);}toString(){return"NOT "+this.not.toString();}},M=class{left;right;constructor(o,e){this.left=o,this.right=e;}evaluate(o){return this.left.evaluate(o)&&this.right.evaluate(o);}toString(){return this.left.toString()+" AND "+this.right.toString();}},z=class{left;right;constructor(o,e){this.left=o,this.right=e;}evaluate(o){return this.left.evaluate(o)||this.right.evaluate(o);}toString(){return this.left.toString()+" OR "+this.right.toString();}};function lr(s,o){let e=o.filter(c=>c instanceof j),i=o.filter(c=>c instanceof U);return new D(s??new G(),e,i);}function at(s){return s.length===1?s[0]:new M(s[0],at(s.slice(1)));}function ot(s){return s.length===1?s[0]:new z(s[0],ot(s.slice(1)));}function cr(s,o){function e(){this.constructor=s;}e.prototype=o.prototype,s.prototype=new e();}function P(s,o,e,i){var c=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(c,P.prototype),c.expected=o,c.found=e,c.location=i,c.name="SyntaxError",c;}cr(P,Error);function $e(s,o,e){return e=e||" ",s.length>o?s:(o-=s.length,e+=e.repeat(o),s+e.slice(0,o));}P.prototype.format=function(s){var o="Error: "+this.message;if(this.location){var e=null,i;for(i=0;i<s.length;i++)if(s[i].source===this.location.source){e=s[i].text.split(/\r\n|\n|\r/g);break;}var c=this.location.start,h=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(c):c,v=this.location.source+":"+h.line+":"+h.column;if(e){var I=this.location.end,V=$e("",h.line.toString().length," "),m=e[c.line-1],d=c.line===I.line?I.column:m.length+1,E=d-c.column||1;o+=`
 --> `+v+`
`+V+` |
`+h.line+" | "+m+`
`+V+" | "+$e("",c.column-1," ")+$e("",E,"^");}else o+=`
 at `+v;}return o;};P.buildMessage=function(s,o){var e={literal:function(m){return'"'+c(m.text)+'"';},class:function(m){var d=m.parts.map(function(E){return Array.isArray(E)?h(E[0])+"-"+h(E[1]):h(E);});return"["+(m.inverted?"^":"")+d.join("")+"]";},any:function(){return"any character";},end:function(){return"end of input";},other:function(m){return m.description;}};function i(m){return m.charCodeAt(0).toString(16).toUpperCase();}function c(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+i(d);}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+i(d);});}function h(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+i(d);}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+i(d);});}function v(m){return e[m.type](m);}function I(m){var d=m.map(v),E,Q;if(d.sort(),d.length>0){for(E=1,Q=1;E<d.length;E++)d[E-1]!==d[E]&&(d[Q]=d[E],Q++);d.length=Q;}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1];}}function V(m){return m?'"'+c(m)+'"':"end of input";}return"Expected "+I(s)+" but "+V(o)+" found.";};function k(s,o){o=o!==void 0?o:{};var e={},i=o.grammarSource,c={Rules:Me,Rule:fe,Condition:qe,Effects:He,Question:pe,Item:de,VariableName:he,QuestionString:Ke,ItemNameAndWeight:Be,CategoryName:_e},h=Me,v=";",I=":-",V="OR",m="AND",d="NOT",E=",",Q="$",gt="[",pt="]",Ae="kg",ht="g",dt=".",Re=/^[^$,;#]/,vt=/^[a-zA-Z]/,Ie=/^[a-zA-Z0-9\-[\](){}_]/,Ce=/^[^\],;#[]/,mt=/^[,;]/,Oe=/^[^ ,;#]/,ee=/^[0-9]/,Te=/^[ \t\n\r]/,$t=R("rule end"),wt=O(";",!1),bt=R("rule"),St=O(":-",!1),te=R("condition"),yt=O("OR",!1),xt=O("AND",!1),ue=O("NOT",!1),Et=O(",",!1),ke=R("question"),At=O("$",!1),We=F(["$",",",";","#"],!0,!1),Rt=R("variable name"),It=F([["a","z"],["A","Z"]],!1,!1),Ne=F([["a","z"],["A","Z"],["0","9"],"-","[","]","(",")","{","}","_"],!1,!1),Ct=R("item"),Ot=R("category"),Tt=O("[",!1),kt=O("]",!1),Wt=R("category name"),Pe=F(["]",",",";","#","["],!0,!1),Nt=R("item name"),Pt=R("word"),jt=F([",",";"],!1,!1),je=F([" ",",",";","#"],!0,!1),Vt=R("weight"),Ft=O("kg",!1),Dt=O("g",!1),Lt=R("number"),re=F([["0","9"]],!1,!1),Mt=O(".",!1),zt=R("whitespace"),Ve=F([" ","	",`
`,"\r"],!1,!1),qt=rr(),Ut=function(t,r){return lr(t,r);},Qt=function(t){return ot(t);},Ht=function(t){return at(t);},Kt=function(t){return new L(t);},_t=function(t){return new N(t);},Bt=function(t,r){return new j(t.trim(),r.trim());},Gt=function(t,r){let{name:a,weight:l}=r;return new U(t.trim(),a,l);},Jt=function(t,r){return o.trackWeight;},Yt=function(t,r){let a=t.trim();return a.length||Fe("item name"),{name:a,weight:r};},Zt=function(t){let r=t.trim();return r.length||Fe("item name"),{name:r,weight:void 0};},Xt=function(t){return t*1e3;},er=function(){return parseFloat(tr());},n=o.peg$currPos|0,y=n,H=[{line:1,column:1}],W=n,se=o.peg$maxFailExpected||[],u=o.peg$silentFails|0,K;if(o.startRule){if(!(o.startRule in c))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');h=c[o.startRule];}function tr(){return s.substring(y,n);}function vr(){return y;}function mr(){return{source:i,start:y,end:n};}function $r(){return _(y,n);}function Fe(t,r){throw r=r!==void 0?r:_(y,n),Le([R(t)],s.substring(y,n),r);}function wr(t,r){throw r=r!==void 0?r:_(y,n),nr(t,r);}function O(t,r){return{type:"literal",text:t,ignoreCase:r};}function F(t,r,a){return{type:"class",parts:t,inverted:r,ignoreCase:a};}function rr(){return{type:"any"};}function sr(){return{type:"end"};}function R(t){return{type:"other",description:t};}function De(t){var r=H[t],a;if(r)return r;if(t>=H.length)a=H.length-1;else for(a=t;!H[--a];);for(r=H[a],r={line:r.line,column:r.column};a<t;)s.charCodeAt(a)===10?(r.line++,r.column=1):r.column++,a++;return H[t]=r,r;}function _(t,r,a){var l=De(t),f=De(r),p={source:i,start:{offset:t,line:l.line,column:l.column},end:{offset:r,line:f.line,column:f.column}};return a&&i&&typeof i.offset=="function"&&(p.start=i.offset(p.start),p.end=i.offset(p.end)),p;}function g(t){n<W||(n>W&&(W=n,se=[]),se.push(t));}function nr(t,r){return new P(t,null,null,r);}function Le(t,r,a){return new P(P.buildMessage(t,r),t,r,a);}function Me(){var t,r,a,l,f,p;for(t=n,r=$(),a=[],l=fe();l!==e;)a.push(l),l=n,f=ze(),f!==e?(f=fe(),f===e?(n=l,l=e):l=f):l=f;return l=ze(),l===e&&(l=null),f=$(),p=Ze(),p!==e?t=a:(n=t,t=e),t;}function ze(){var t,r,a,l;return u++,t=n,r=$(),s.charCodeAt(n)===59?(a=v,n++):(a=e,u===0&&g(wt)),a!==e?(l=$(),r=[r,a,l],t=r):(n=t,t=e),u--,t===e&&(r=e,u===0&&g($t)),t;}function fe(){var t,r,a,l,f,p;return u++,t=n,r=qe(),r===e&&(r=null),a=$(),s.substr(n,2)===I?(l=I,n+=2):(l=e,u===0&&g(St)),l!==e?(f=$(),p=He(),y=t,t=Ut(r,p)):(n=t,t=e),u--,t===e&&(r=e,u===0&&g(bt)),t;}function qe(){var t,r;return u++,t=ir(),u--,t===e&&(r=e,u===0&&g(te)),t;}function ir(){var t,r,a,l,f,p,w,B;for(u++,t=n,r=n,a=[],l=Ue();l!==e;)a.push(l),l=n,f=n,p=$(),s.substr(n,2)===V?(w=V,n+=2):(w=e,u===0&&g(yt)),w!==e?(B=$(),p=[p,w,B],f=p):(n=f,f=e),f!==e?(f=Ue(),f===e?(n=l,l=e):l=f):l=f;return a.length<1?(n=r,r=e):r=a,r!==e&&(y=t,r=Qt(r)),t=r,u--,t===e&&(r=e,u===0&&g(te)),t;}function Ue(){var t,r,a,l,f,p,w,B;for(u++,t=n,r=n,a=[],l=ge();l!==e;)a.push(l),l=n,f=n,p=$(),s.substr(n,3)===m?(w=m,n+=3):(w=e,u===0&&g(xt)),w!==e?(B=$(),p=[p,w,B],f=p):(n=f,f=e),f!==e?(f=ge(),f===e?(n=l,l=e):l=f):l=f;return a.length<1?(n=r,r=e):r=a,r!==e&&(y=t,r=Ht(r)),t=r,u--,t===e&&(r=e,u===0&&g(te)),t;}function ge(){var t,r,a,l,f,p;return u++,t=n,s.substr(n,3)===d?(r=d,n+=3):(r=e,u===0&&g(ue)),r!==e?(a=$(),s.substr(n,3)===d?(l=d,n+=3):(l=e,u===0&&g(ue)),l!==e?(f=$(),p=ge(),p!==e?t=p:(n=t,t=e)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,s.substr(n,3)===d?(r=d,n+=3):(r=e,u===0&&g(ue)),r!==e?(a=$(),l=Qe(),l!==e?(y=t,t=Kt(l)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,r=Qe(),r!==e?t=r:(n=t,t=e))),u--,t===e&&(r=e,u===0&&g(te)),t;}function Qe(){var t,r;return t=n,r=he(),r!==e&&(y=t,r=_t(r)),t=r,t;}function He(){var t,r,a,l,f,p,w;for(t=n,r=[],a=pe(),a===e&&(a=de());a!==e;)r.push(a),a=n,l=n,f=$(),s.charCodeAt(n)===44?(p=E,n++):(p=e,u===0&&g(Et)),p!==e?(w=$(),f=[f,p,w],l=f):(n=l,l=e),l!==e?(l=pe(),l===e&&(l=de()),l===e?(n=a,a=e):a=l):a=l;return t=r,t;}function pe(){var t,r,a,l;return u++,t=n,r=Ke(),r!==e?(s.charCodeAt(n)===36?(a=Q,n++):(a=e,u===0&&g(At)),a!==e?(l=he(),l!==e?(y=t,t=Bt(r,l)):(n=t,t=e)):(n=t,t=e)):(n=t,t=e),u--,t===e&&(r=e,u===0&&g(ke)),t;}function Ke(){var t,r,a;if(u++,t=n,r=[],a=s.charAt(n),Re.test(a)?n++:(a=e,u===0&&g(We)),a!==e)for(;a!==e;)r.push(a),a=s.charAt(n),Re.test(a)?n++:(a=e,u===0&&g(We));else r=e;return r!==e?t=s.substring(t,n):t=r,u--,t===e&&(r=e,u===0&&g(ke)),t;}function he(){var t,r,a,l,f;if(u++,t=n,r=n,a=s.charAt(n),vt.test(a)?n++:(a=e,u===0&&g(It)),a!==e){for(l=[],f=s.charAt(n),Ie.test(f)?n++:(f=e,u===0&&g(Ne));f!==e;)l.push(f),f=s.charAt(n),Ie.test(f)?n++:(f=e,u===0&&g(Ne));a=[a,l],r=a;}else n=r,r=e;return r!==e?t=s.substring(t,n):t=r,u--,t===e&&(r=e,u===0&&g(Rt)),t;}function de(){var t,r,a,l;return u++,t=n,r=ar(),r!==e?(a=$(),l=Be(),l!==e?(y=t,t=Gt(r,l)):(n=t,t=e)):(n=t,t=e),u--,t===e&&(r=e,u===0&&g(Ct)),t;}function ar(){var t,r,a,l,f,p;return u++,t=n,s.charCodeAt(n)===91?(r=gt,n++):(r=e,u===0&&g(Tt)),r!==e?(a=$(),l=_e(),l!==e?(f=$(),s.charCodeAt(n)===93?(p=pt,n++):(p=e,u===0&&g(kt)),p!==e?t=l:(n=t,t=e)):(n=t,t=e)):(n=t,t=e),u--,t===e&&(r=e,u===0&&g(Ot)),t;}function _e(){var t,r,a;if(u++,t=n,r=[],a=s.charAt(n),Ce.test(a)?n++:(a=e,u===0&&g(Pe)),a!==e)for(;a!==e;)r.push(a),a=s.charAt(n),Ce.test(a)?n++:(a=e,u===0&&g(Pe));else r=e;return r!==e?t=s.substring(t,n):t=r,u--,t===e&&(r=e,u===0&&g(Wt)),t;}function Be(){var t,r,a,l,f;for(u++,t=n,r=n,a=[],l=Ge();l!==e;)a.push(l),l=n,f=$(),f=Ge(),f===e?(n=l,l=e):l=f;if(r=s.substring(r,n),a=$(),l=Je(),l!==e?(y=n,f=Jt(r,l),f?f=void 0:f=e,f!==e?(y=t,t=Yt(r,l)):(n=t,t=e)):(n=t,t=e),t===e){for(t=n,r=n,a=[],l=ve();l!==e;)a.push(l),l=n,f=$(),f=ve(),f===e?(n=l,l=e):l=f;r=s.substring(r,n),y=t,r=Zt(r),t=r;}return u--,t===e&&(r=e,u===0&&g(Nt)),t;}function Ge(){var t,r,a,l,f,p;return u++,t=n,r=n,u++,a=n,l=Je(),l!==e?(f=$(),p=Ze(),p===e&&(p=s.charAt(n),mt.test(p)?n++:(p=e,u===0&&g(jt))),p!==e?(l=[l,f,p],a=l):(n=a,a=e)):(n=a,a=e),u--,a===e?r=void 0:(n=r,r=e),r!==e?(a=ve(),a!==e?t=a:(n=t,t=e)):(n=t,t=e),u--,t===e&&(r=e,u===0&&g(Pt)),t;}function ve(){var t,r,a;if(t=n,r=[],a=s.charAt(n),Oe.test(a)?n++:(a=e,u===0&&g(je)),a!==e)for(;a!==e;)r.push(a),a=s.charAt(n),Oe.test(a)?n++:(a=e,u===0&&g(je));else r=e;return r!==e?t=s.substring(t,n):t=r,t;}function Je(){var t,r,a;return u++,t=n,r=Ye(),r!==e?(s.substr(n,2)===Ae?(a=Ae,n+=2):(a=e,u===0&&g(Ft)),a!==e?(y=t,t=Xt(r)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,r=Ye(),r!==e?(s.charCodeAt(n)===103?(a=ht,n++):(a=e,u===0&&g(Dt)),a===e&&(a=null),t=r):(n=t,t=e)),u--,t===e&&(r=e,u===0&&g(Vt)),t;}function Ye(){var t,r,a,l,f,p,w;if(u++,t=n,r=[],a=s.charAt(n),ee.test(a)?n++:(a=e,u===0&&g(re)),a!==e)for(;a!==e;)r.push(a),a=s.charAt(n),ee.test(a)?n++:(a=e,u===0&&g(re));else r=e;if(r!==e){if(a=n,s.charCodeAt(n)===46?(l=dt,n++):(l=e,u===0&&g(Mt)),l!==e){if(f=n,p=[],w=s.charAt(n),ee.test(w)?n++:(w=e,u===0&&g(re)),w!==e)for(;w!==e;)p.push(w),w=s.charAt(n),ee.test(w)?n++:(w=e,u===0&&g(re));else p=e;p!==e?f=s.substring(f,n):f=p,f!==e?(l=[l,f],a=l):(n=a,a=e);}else n=a,a=e;a===e&&(a=null),y=t,t=er();}else n=t,t=e;return u--,t===e&&(r=e,u===0&&g(Lt)),t;}function $(){var t,r;for(u++,t=[],r=s.charAt(n),Te.test(r)?n++:(r=e,u===0&&g(Ve));r!==e;)t.push(r),r=s.charAt(n),Te.test(r)?n++:(r=e,u===0&&g(Ve));return u--,r=e,u===0&&g(zt),t;}function Ze(){var t,r;return t=n,u++,s.length>n?(r=s.charAt(n),n++):(r=e,u===0&&g(qt)),u--,r===e?t=void 0:(n=t,t=e),t;}if(K=h(),o.peg$library)return{peg$result:K,peg$currPos:n,peg$FAILED:e,peg$maxFailExpected:se,peg$maxFailPos:W};if(K!==e&&n===s.length)return K;throw K!==e&&n<s.length&&g(sr()),Le(se,W<s.length?s.charAt(W):null,W<s.length?_(W,W+1):_(W,W));}var ur={isTrackWeight:()=>!1},fr=new q("PARSER_CONFIG_PROVIDER"),ie=(()=>{class s{config=b(fr,{optional:!0})??ur;isTrackWeight(){return this.config.isTrackWeight();}makeOptions(e,i={}){return{startRule:e,trackWeight:i.forceWeightTracking??this.isTrackWeight()};}parseCondition(e){return k(e,this.makeOptions("Condition"));}parseQuestion(e){return k(e,this.makeOptions("Question"));}parseItem(e){return k(e,this.makeOptions("Item"));}parseEffects(e){return k(e,this.makeOptions("Effects"));}parseRule(e){return k(e,this.makeOptions("Rule"));}parseRules(e){let i=e.split(/\r?\n/g).map(c=>c.replace(/#.*/,"")).join(`
`);try{return k(i,this.makeOptions("Rules"));}catch(c){let h=[];if(h.push("Error parsing rules"),c instanceof P){let v=c.location.start.line.toString(),I=c.location.start.column.toString();h.push(" at line ",v," column ",I),h.push(":",`
`,c.message);}else console.error(c);throw new Error(h.join(""));}}validateVariableName(e){k(e,this.makeOptions("VariableName"));}validateQuestionString(e){k(e,this.makeOptions("QuestionString"));}validateItemNameAndWeight(e){k(e,this.makeOptions("ItemNameAndWeight"));}validateCategoryName(e){k(e,this.makeOptions("CategoryName"));}forceParseWeight(e){return k(e,this.makeOptions("ItemNameAndWeight",{forceWeightTracking:!0})).weight??0;}static ɵfac=function(i){return new(i||s)();};static ɵprov=T({token:s,factory:s.ɵfac,providedIn:"root"});}return s;})();var Y=(()=>{class s{parser=b(ie);extractVariables(e){return e.reduce((i,c)=>[...i,...c.questions.map(h=>h.variable)],[]);}extractCategories(e){let i=new Set();for(let c of e)for(let h of c.items)i.add(h.category);return Array.from(i);}renameVariable(e,i,c){if(c instanceof Array)return c.map(v=>this.renameVariable(e,i,v));if(c instanceof j)return c.variable===e?new j(c.question,i):c;if(c instanceof D)return new D(this.renameVariable(e,i,c.condition),c.questions.map(v=>this.renameVariable(e,i,v)),c.items);if(c instanceof N)return c.variable===e?new N(i):c;if(c instanceof L)return new L(this.renameVariable(e,i,c.not));if(c instanceof M)return new M(this.renameVariable(e,i,c.left),this.renameVariable(e,i,c.right));if(c instanceof z)return new z(this.renameVariable(e,i,c.left),this.renameVariable(e,i,c.right));let h=c;throw new Error("Unknown item type: "+h);}filterActive(e){let i=e.rules.filter(h=>h.condition.evaluate(e.model)),c=this.extractVariables(i).reduce((h,v)=>ne(x({},h),{[v]:e.model[v]}),{[G.string]:!0});return i.length===e.rules.length?{model:c,rules:i}:this.filterActive({model:c,rules:i});}contains(e,i){let c=i.toLowerCase();if(e instanceof D)return this.contains(e.condition,i)||e.questions.some(v=>this.contains(v,i))||e.items.some(v=>this.contains(v,i));if(e instanceof j)return e.question.toLowerCase().includes(c)||e.variable.toLowerCase().includes(c);if(e instanceof U)return e.category.toLowerCase().includes(c)||e.name.toLowerCase().includes(c);if(e instanceof N)return e.variable.toLowerCase().includes(c);if(e instanceof L)return this.contains(e.not,i);if(e instanceof M)return this.contains(e.left,i)||this.contains(e.right,i);if(e instanceof z)return this.contains(e.left,i)||this.contains(e.right,i);let h=e;throw new Error("Unknown item type: "+h);}countItemsAndWeights(e){return e.reduce((i,c)=>c.items.reduce((h,v)=>{let I;return this.parser.isTrackWeight()?I=v.weight?1:0:I=this.parser.forceParseWeight(v.name)?1:0,{items:h.items+1,weights:h.weights+I};},i),{items:0,weights:0});}static ɵfac=function(i){return new(i||s)();};static ɵprov=T({token:s,factory:s.ɵfac,providedIn:"root"});}return s;})();var lt=`:-
   [Utility] Paper Tissues,
   [Utility] Backpack;

:- Are you traveling longer than 3 days? $longer;

longer :-
   Do you have a washer or laundry service available? $laundry,
   Do you want to work? $work,
   [Electronics] Phone Charger,
   [Electronics] Tablet;

longer AND NOT laundry :-
   [Clothes] enough Shirts,
   [Clothes] enough Underwear,
   [Clothes] spare Pants;

laundry :-
   [Clothes] 3 Shirts,
   [Clothes] 3 sets of Underwear;

work :-
   [Electronics] Laptop;

:-
   Will it be sunny? $sunny,
   Will it be rainy? $rainy,
   Are you traveling abroad? $abroad;

sunny :-
   Do you expect a high UV index? $uv,
   [Utility] Sunglasses,
   [Clothes] Short Pants;

rainy :-
   [Clothes] Rain Jacket;

NOT rainy :-
   [Clothes] Jacket;

NOT sunny :-
   [Clothes] Long Pants;

uv :-
   [Utility] Sunscreen;

abroad :-
   [Documents] Passport,
   [Documents] Visa;
`;var ct=`:-
   [N\xFCtzliches] Papiertaschent\xFCcher,
   [N\xFCtzliches] Rucksack;

:- Reist du l\xE4nger als 3 Tage? $longer;

longer :-
   Hast du eine Waschmaschine oder einen W\xE4scheservice zur Verf\xFCgung? $laundry,
   Willst du arbeiten? $work,
   [Elektronik] Handy-Ladeger\xE4t,
   [Elektronik] Tablet;

longer AND NOT laundry :-
   [Kleidung] genug Hemden,
   [Kleidung] genug Unterw\xE4sche,
   [Kleidung] Ersatzhosen;

laundry :-
   [Kleidung] 3 Hemden,
   [Kleidung] 3 S\xE4tze Unterw\xE4sche;

work :-
   [Elektronik] Laptop;

:-
   Wird es sonnig sein? $sunny,
   Wird es regnerisch sein? $rainy,
   Reist du ins Ausland? $abroad;

sunny :-
   Erwartest du einen hohen UV-Index? $uv,
   [N\xFCtzliches] Sonnenbrille,
   [Kleidung] Kurze Hosen;

rainy :-
   [Kleidung] Regenjacke;

NOT rainy :-
   [Kleidung] Jacke;

NOT sunny :-
   [Kleidung] Lange Hosen;

uv :-
   [N\xFCtzliches] Sonnencreme;

abroad :-
   [Dokumente] Reisepass,
   [Dokumente] Visum;
`;var we=new q("RULES_TEMPLATE");function gr(s){return s.startsWith("de")?ct:lt;}function _r(){return tt([{provide:we,useFactory:gr,deps:[rt]}]);}function ae(s,o){let e=s.getItem("state"),i;if(e){let c=JSON.parse(e);i=x(x({},o),c);}else i=x({},o);return i;}function ut(s,o){if(typeof s!=typeof o)return!1;if(s&&o&&typeof s=="object"){let e=Object.keys(s),i=Object.keys(o);return e.length===i.length&&e.every(c=>ut(s[c],o[c]));}return s===o;}function pr(s,o){let e=Object.keys(o).filter(i=>!ut(s[i],o[i])).map(i=>[i,s[i]]);return e.length===0?null:Object.fromEntries(e);}function oe(s,o,e){let i=pr(o,e);i===null?s.removeItem("state"):s.setItem("state",JSON.stringify(i));}var ft=["en","de"],Z={answers:{},checkedItems:[],collapsedCategories:[],rules:void 0,fadeOutDisabledRules:!1,highlightVariableStatus:!1,refactorVariables:!0,categorySorting:"alphabetically",trackWeight:!1,answersLocked:!1,theme:"system",fontSize:"normal",accessibility:"accessible",language:"auto",exportReminder:!1,lastExportHash:"",lastExportDate:0},be=(()=>{class s{state=ae(localStorage,Z);persist(){oe(localStorage,this.state,Z);}initialState=Z;triggerReset=A(0);createSignal=e=>{let i=A(this.state[e]);return C(()=>{let c=i();c!==this.state[e]&&(this.state[e]=c,this.persist());},{manualCleanup:!0}),C(()=>{this.triggerReset()&&i.set(Z[e]);}),i;};reset(){this.state=x({},Z),this.persist(),this.triggerReset.set(Date.now());}static ɵfac=function(i){return new(i||s)();};static ɵprov=T({token:s,factory:s.ɵfac,providedIn:"root"});}return s;})();var le={rulesMode:"view",filterRulesQuery:void 0},Se=(()=>{class s{initialState=le;triggerReset=A(0);createSignal(e){let i=b(it),c=b(nt),h=A(void 0);return i.events.pipe(et(v=>v instanceof st),Xe(()=>c.snapshot.queryParams[e]??le[e])).subscribe(v=>{v!==""&&h.set(v);}),C(()=>{let v=h()||void 0;v===le[e]&&(v=void 0),c.snapshot.queryParams[e]!==v&&i.navigate([],{queryParams:{[e]:v},queryParamsHandling:"merge",relativeTo:c,replaceUrl:!0});}),C(()=>{this.triggerReset()&&h.set(le[e]);}),h;}reset(){this.triggerReset.set(Date.now());}static ɵfac=function(i){return new(i||s)();};static ɵprov=T({token:s,factory:s.ɵfac,providedIn:"root"});}return s;})();var X={clipboardItems:[],clipboardQuestions:[]},ye=(()=>{class s{state=ae(sessionStorage,X);initialState=X;triggerReset=A(0);createSignal=e=>{let i=A(this.state[e]);return C(()=>{let c=i();c!==this.state[e]&&(this.state[e]=c,this.persist());},{manualCleanup:!0}),C(()=>{this.triggerReset()&&i.set(X[e]);}),i;};persist(){oe(sessionStorage,this.state,X);}reset(){this.state=x({},X),this.persist(),this.triggerReset();}static ɵfac=function(i){return new(i||s)();};static ɵprov=T({token:s,factory:s.ɵfac,providedIn:"root"});}return s;})();var xe={serviceWorkerStatus:"init"},Ee=(()=>{class s{initialState=xe;triggerReset=A(0);createSignal(e){let i=A(xe[e]);return C(()=>{this.triggerReset()&&i.set(xe[e]);}),i;}reset(){this.triggerReset();}static ɵfac=function(i){return new(i||s)();};static ɵprov=T({token:s,factory:s.ɵfac,providedIn:"root"});}return s;})();var ce=class s{state;constructor(o){this.state=o;}static builder(){return new s({});}extend(o){let e=Object.keys(o.initialState).reduce((i,c)=>ne(x({},i),{[c]:o.createSignal(c)}),{});return new s(x(x({},this.state),e));}derive(o){return new s(x(x({},this.state),o(this.state)));}build(){return this.state;}};var As=new q("GLOBAL_STATE",{providedIn:"root",factory:()=>hr()}),Rs=new q("RESET_SWITCH",{providedIn:"root",factory:()=>{let s=[b(be),b(Se),b(ye),b(Ee)];return()=>{s.forEach(o=>{o.reset();});};}});function hr(){return ce.builder().extend(b(be)).extend(b(Se)).extend(b(ye)).extend(b(Ee)).derive(()=>{let s=A(window.scrollY);return window.addEventListener("scroll",()=>{s.set(window.scrollY);}),{scrollY:s};}).derive(()=>({isMobile:S(()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(navigator.userAgent))})).derive(({language:s})=>({preferredLanguage:S(()=>{let o=s();return o==="auto"?navigator.languages.map(c=>c.split("-")[0]).find(c=>ft.includes(c))??"en":o;})})).derive(({rules:s})=>({rulesContainComments:S(()=>s()?.includes("#"))})).derive(({rules:s})=>{let o=b(we);return{rulesOrTemplate:S(()=>s()??o)};}).derive(({rulesOrTemplate:s})=>{let o=b(ie),e=S(()=>{try{return{parsedRules:o.parseRules(s()),ruleParserError:""};}catch(i){i instanceof Error?console.warn(i.message):console.error(i);let c=i instanceof Error?i.message:"An unknown error occurred";return{parsedRules:[],ruleParserError:c};}});return{parsedRules:S(()=>e().parsedRules),ruleParserError:S(()=>e().ruleParserError),numberOfRules:S(()=>e().parsedRules.length)};}).derive(({parsedRules:s,ruleParserError:o})=>{let e=b(Y);return{percentageOfItemsWithWeights:S(()=>{if(!o()){let{items:i,weights:c}=e.countItemsAndWeights(s());return c/i;}return 0;})};}).derive(({parsedRules:s})=>{let o=b(Y);return{categories:S(()=>o.extractCategories(s())),variables:S(()=>o.extractVariables(s()))};}).derive(({parsedRules:s,answers:o})=>{let e=b(Y),i=S(()=>e.filterActive({rules:s(),model:o()}));return{activeRules:S(()=>i().rules),activeAnswers:S(()=>i().model)};}).derive(({activeRules:s})=>({activeQuestions:S(()=>s().flatMap(o=>o.questions)),activeItems:S(()=>s().flatMap(o=>o.items))})).derive(({rulesOrTemplate:s})=>({rulesHash:S(()=>dr(s()).toString(16))})).derive(({rulesHash:s})=>{let o=A(new Date().getTime());return C(()=>{s(),o.set(new Date().getTime());}),{lastRulesAction:o};}).derive(({lastRulesAction:s,rulesHash:o})=>({exportFileName:S(()=>{let e=new Date(s()).toISOString().replace(/\..*$/,"").replace(/[T:]/g,"-"),i=o();return`travel-packlist-rules-${e}-${i}.txt`;})})).derive(({rulesHash:s,lastExportHash:o,rules:e})=>({exportNeeded:S(()=>!!e()&&s()!==o())})).build();}var dr=function(s,o=0){let e=3735928559^o,i=1103547991^o;for(let c=0,h;c<s.length;c++)h=s.charCodeAt(c),e=Math.imul(e^h,2654435761),i=Math.imul(i^h,1597334677);return e=Math.imul(e^e>>>16,2246822507),e^=Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507),i^=Math.imul(e^e>>>13,3266489909),4294967296*(2097151&i)+(e>>>0);};export{or as a,me as b,D as c,j as d,U as e,N as f,yr as g,G as h,L as i,M as j,z as k,P as l,fr as m,ie as n,Y as o,_r as p,As as q,Rs as r};/**i18n:213e8f5fa9a1aaeed4742f603cb6e2b7bb69275ecdd03bddd6382bb3635f0c75*/