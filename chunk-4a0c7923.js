import{c as v,d as P,e as D,g as u,h as K,i as ot,j as k,k as j,l as H,m as E,n as T,o as J}from"./chunk-279aa8ca.js";import{a as _t,c as mt,d as pt}from"./chunk-fb5177f6.js";import{e as at,g as st,h as rt,i as lt,q,r as ct}from"./chunk-89ce47f4.js";import"./chunk-26010ae4.js";import{C as y,m as $,n as z}from"./chunk-fc578937.js";import"./chunk-f7ef7a07.js";import{Ba as b,Bb as _,Eb as V,Fb as R,Gb as l,Hb as a,Ib as C,Ja as w,Kb as h,Lb as W,Mb as B,Nb as it,Qb as nt,Rb as S,Sb as o,Za as r,ac as f,bc as F,cc as U,dc as Q,ea as L,kb as x,la as m,ma as p,pb as d,wb as A,xb as g,ya as Y,yb as G,zc as I}from"./chunk-f10317e7.js";import{a as tt,b as et}from"./chunk-8bc11e65.js";var dt={opacity:0,transform:"scale(0.9)",height:0,minHeight:0,padding:0,margin:"-2px"},ut={opacity:1,transform:"scale(1)",height:"*",minHeight:"*",padding:"*",margin:"*"},M=j([u(dt),J(50,[P("0.3s ease-in",u(ut))])]),N=j([u(ut),J(50,[P("0.3s ease-in",u(dt))])]);function At(e,s){e&1&&C(0,"app-icon-checkmark");}function ht(e,s){if(e&1&&f(0),e&2){let t=o();Q(" ",t.count()," / ",t.total(),`
`);}}var Ct=(()=>{class e{count=Y(0);total=Y(0);static ɵfac=function(i){return new(i||e)();};static ɵcmp=x({type:e,selectors:[["app-items-status"]],inputs:{count:[1,"count"],total:[1,"total"]},decls:2,vars:1,template:function(i,n){i&1&&d(0,At,1,0,"app-icon-checkmark")(1,ht,1,2),i&2&&_(n.count()===n.total()?0:1);},dependencies:[q],encapsulation:2,changeDetection:0});}return e;})();var gt=(e,s)=>s.name;function Pt(e,s){e&1&&(l(0,"div",1)(1,"p",4),it(2,0),a()());}function xt(e,s){if(e&1&&f(0),e&2){let t=o(2).$implicit,i=o();U(" (",i.serializeWeight(t.checkedWeight,void 0,1),") ");}}function kt(e,s){if(e&1&&f(0),e&2){let t=o(2).$implicit,i=o();U(" (",i.serializeWeightPartition(t.checkedWeight,t.totalWeight),") ");}}function It(e,s){if(e&1&&(l(0,"span",9),d(1,xt,1,1)(2,kt,1,1),a()),e&2){let t=o().$implicit;r(),_(t.checkedWeight===t.totalWeight?1:2);}}function vt(e,s){if(e&1&&(l(0,"span",13),f(1),a()),e&2){let t=o().$implicit,i=o(3);r(),F(i.serializeWeight(t.weight));}}function Et(e,s){if(e&1){let t=h();l(0,"div",11)(1,"div",12),S("click",function(){let n=m(t).$implicit,c=o(3);return p(c.toggleCheckedItem(n));})("keypress",function(){let n=m(t).$implicit,c=o(3);return p(c.toggleCheckedItem(n));})("dblclick",function(){let n=m(t).$implicit,c=o(3);return p(c.dblclick(n));})("touchstart",function(){let n=m(t).$implicit,c=o(3);return p(c.tapStart(n));})("touchmove",function(){m(t);let n=o(3);return p(n.tapEnd());})("touchend",function(){m(t);let n=o(3);return p(n.tapEnd());}),f(2),d(3,vt,2,1,"span",13),a()();}if(e&2){let t=s.$implicit,i=o(3);r(),G("text-checked-item",t.checked&&!t.skipped)("text-skipped-item",t.skipped),g("@animateStrikeThrough",t.checked),A("aria-checked",t.checked),r(),U(" ",t.name," "),r(),_(t.weight&&i.trackWeight()?3:-1);}}function Lt(e,s){if(e&1&&V(0,Et,4,8,"div",11,gt),e&2){let t=o().$implicit;R(t.items);}}function yt(e,s){if(e&1){let t=h();l(0,"div",3)(1,"div",5),S("click",function(){let n=m(t).$implicit,c=o();return p(c.toggleCategoryCollapse(n.name));}),l(2,"div",6),C(3,"app-icon-key-right",7),l(4,"span",8),f(5),a(),d(6,It,3,1,"span",9),a(),C(7,"app-items-status",10),a(),d(8,Lt,2,0),a();}if(e&2){let t=s.$implicit,i=o();g("@animateItems",t),A("aria-label",t.name),r(3),g("@animateChevron",t.collapsed),r(2),F(t.name),r(),_(i.trackWeight()&&t.totalWeight?6:-1),r(),g("count",t.checkedItems)("total",t.totalItems),r(),_(t.collapsed?-1:8);}}var bt=v("animateCategory",[k("* <=> *",[D([T('div[role="list"]:enter',E(M),{optional:!0}),T('div[role="list"]:leave',E(N),{optional:!0}),T("@*",[H()],{optional:!0})])])]),Ft=v("animateItems",[k("* <=> *",[D([T('div[role="listitem"]:enter',[u({opacity:0,height:0}),P("0.2s ease-in",u({opacity:1,height:"*"}))],{optional:!0}),T('div[role="listitem"]:leave',[u({opacity:1,height:"*"}),P("0.2s ease-in",u({opacity:0,height:0}))],{optional:!0}),T("@*",[H()],{optional:!0})])])]),Dt=v("animateChevron",[K("true",u({transform:"rotate(0)"})),K("false",u({transform:"rotate(90deg)"})),k("false => true",P("0.5s ease-in-out")),k("true => false",P("0.5s ease-in-out",ot([u({transform:"rotate(0)"}),u({transform:"rotate(100deg)"}),u({transform:"rotate(80deg)"})])))]),wt=v("animateStrikeThrough",[K("true",u({textDecorationColor:"inherit"})),K("false",u({textDecorationColor:"transparent"})),k("false => true",P("0.2s ease-in-out"))]),Tt=(()=>{class e{state=L(y);stats=this.state.packlist.stats;packlist=this.state.packlist.model;trackWeight=this.state.config.trackWeight;toggleCategoryCollapse=this.state.packlist.toggleCategoryCollapse;toggleCheckedItem=this.state.packlist.toggleCheckedItem;serializeWeight=$;serializeWeightPartition=z;animationsDisabled=b(!0);constructor(){w(()=>{this.animationsDisabled.set(!this.state.config.animations());});}dblclick(t){this.state.browser.isMobile()||this.state.packlist.toggleSkippedItem(t);}touchAction;tapStart(t){this.state.browser.isMobile()&&(this.touchAction=setTimeout(()=>{this.state.packlist.toggleSkippedItem(t);},800));}tapEnd(){this.touchAction&&clearTimeout(this.touchAction);}static ɵfac=function(i){return new(i||e)();};static ɵcmp=x({type:e,selectors:[["app-display-items"]],decls:4,vars:3,consts:()=>{let t;return t="Keine Gegenst\xE4nde verf\xFCgbar.",[t,[1,"flex","flex-col","items-center"],[1,"contents"],["role","list",1,"card","mb-1","overflow-hidden"],[1,"text-center"],["aria-hidden","true",1,"accessible-content","flex","items-center","justify-between",3,"click"],[1,"flex","items-center","gap-1"],[1,"h-6","w-6"],[1,"font-bold","italic"],[1,"text-sm"],[3,"count","total"],["role","listitem"],["role","checkbox","tabindex","0",1,"flex","select-none","items-center","justify-between",3,"click","keypress","dblclick","touchstart","touchmove","touchend"],[1,"italic"]];},template:function(i,n){i&1&&(d(0,Pt,3,0,"div",1),l(1,"div",2),V(2,yt,9,8,"div",3,gt),a()),i&2&&(_(n.stats().totalItems?-1:0),r(),g("@animateCategory",n.packlist())("@.disabled",n.animationsDisabled()),r(),R(n.packlist()));},dependencies:[Ct,lt],encapsulation:2,data:{animation:[bt,Ft,Dt,wt]},changeDetection:0});}return e;})();var $t=(e,s)=>s.question;function Mt(e,s){if(e&1){let t=h();l(0,"div",1)(1,"p",2),W(2,0),l(3,"button",3),S("click",function(){m(t);let n=o();return p(n.goToRulesEdit());}),a(),B(),a()();}}function Nt(e,s){e&1&&C(0,"app-icon-checkmark");}function Vt(e,s){if(e&1){let t=h();l(0,"div",5),S("click",function(){let n=m(t).$implicit,c=o(2);return p(c.toggleQuestion(n));})("keypress",function(){let n=m(t).$implicit,c=o(2);return p(c.toggleQuestion(n));}),l(1,"span",6),f(2),a(),d(3,Nt,1,0,"app-icon-checkmark"),a();}if(e&2){let t=s.$implicit,i=o(2);G("disabled",i.isAnswersLockActive()),A("aria-checked",i.isQuestionActive(t))("aria-disabled",i.isAnswersLockActive())("aria-label",t.question),r(2),F(t.question),r(),_(i.isQuestionActive(t)?3:-1);}}function Rt(e,s){if(e&1&&(l(0,"div"),V(1,Vt,4,7,"div",4,$t),a()),e&2){let t=o();g("@.disabled",t.animationsDisabled())("@animateQuestions",t.displayQuestions()),r(),R(t.displayQuestions());}}var Kt=v("animateQuestions",[k("* <=> *",[D([T("div.card:enter",E(M),{optional:!0}),T("div.card:leave",E(N),{optional:!0}),T("app-icon-checkmark:enter",[u({transform:"translateX(200%)"}),P("0.3s ease-in",u({transform:"translateX(0)"}))],{optional:!0})])])]),St=(()=>{class e{state=L(y);questions=this.state.active.questions;isQuestionActive=t=>this.state.packlist.answers()[t.variable];isAnswersLockActive=this.state.packlist.answersLocked;displayQuestions=I(()=>this.questions().filter(t=>!this.isAnswersLockActive()||this.isQuestionActive(t)));toggleQuestion=t=>{this.isAnswersLockActive()||this.state.packlist.answers.update(i=>et(tt({},i),{[t.variable]:!i[t.variable]}));};goToRulesEdit(){this.state.router.go("rules->edit");}animationsDisabled=b(!0);constructor(){w(()=>{this.animationsDisabled.set(!this.state.config.animations());});}static ɵfac=function(i){return new(i||e)();};static ɵcmp=x({type:e,selectors:[["app-display-questions"]],decls:2,vars:1,consts:()=>{let t;return t="Keine Fragen verf\xFCgbar, bitte "+"\uFFFD#3\uFFFD"+" erstelle "+"\uFFFD/#3\uFFFD"+" welche.",[t,[1,"flex","flex-col","items-center"],[1,"text-center"],["type","button",1,"link","inline","p-0","underline",3,"click"],["role","checkbox","tabindex","0",1,"card","mb-1","flex","flex-row","items-center","justify-between","overflow-hidden",3,"disabled"],["role","checkbox","tabindex","0",1,"card","mb-1","flex","flex-row","items-center","justify-between","overflow-hidden",3,"click","keypress"],["aria-hidden","true",1,"select-none","font-bold"]];},template:function(i,n){i&1&&d(0,Mt,4,0,"div",1)(1,Rt,3,2,"div"),i&2&&_(n.questions().length?1:0);},dependencies:[q],encapsulation:2,data:{animation:[Kt]},changeDetection:0});}return e;})();function Ot(e,s){e&1&&C(0,"app-icon-lock",8);}function Gt(e,s){e&1&&C(0,"app-icon-lock-open",8);}function Wt(e,s){if(e&1){let t=h();l(0,"button",9),S("click",function(){m(t);let n=o(2);return p(n.toggleStats("distribution"));}),a(),l(1,"button",10),S("click",function(){m(t);let n=o(2);return p(n.toggleStats("heaviestItems"));}),a();}if(e&2){let t=o(2);A("aria-pressed",t.statsVisible()==="distribution"),r(),A("aria-pressed",t.statsVisible()==="heaviestItems");}}function Bt(e,s){if(e&1){let t=h();l(0,"div",0)(1,"button",7),S("click",function(){m(t);let n=o();return p(n.toggleAnswersLock());})("keypress",function(){m(t);let n=o();return p(n.toggleAnswersLock());}),d(2,Ot,1,0,"app-icon-lock",8)(3,Gt,1,0,"app-icon-lock-open",8),a(),d(4,Wt,2,2),a();}if(e&2){let t=o();r(),A("aria-pressed",t.isAnswersLockActive()),r(),_(t.isAnswersLockActive()?2:3),r(2),_(t.trackWeight()?4:-1);}}function Ut(e,s){if(e&1&&(l(0,"div",2),C(1,"cmp-pie-chart",11),a()),e&2){let t=o();r(),g("segments",t.weightStats());}}function Qt(e,s){if(e&1&&(l(0,"div",2),C(1,"cmp-bar-chart",12),a()),e&2){let t=o();r(),g("bars",t.heaviestItems());}}function qt(e,s){if(e&1&&C(0,"cmp-progress",4),e&2){let t=o();g("value",t.stats().checkedWeight)("max",t.stats().totalWeight)("animationDuration",t.animationDuration()),A("aria-label",t.statusLabelText());}}function zt(e,s){if(e&1&&C(0,"cmp-progress",5),e&2){let t=o();g("value",t.stats().checkedItems)("max",t.stats().totalItems)("animationDuration",t.animationDuration()),A("aria-label",t.statusLabelText());}}function Xt(e,s){if(e&1&&(l(0,"span"),f(1),a()),e&2){let t=o();r(),F(t.serializeWeightPartition(t.stats().checkedWeight,t.stats().totalWeight));}}var Yt=v("animateDiagram",[k("* <=> *",[D([T("div.card:enter",E(M),{optional:!0}),T("div.card:leave",E(N),{optional:!0})])])]),ft=(()=>{class e{state=L(y);questionsAvailable=I(()=>this.state.active.questions().length>0);isAnswersLockActive=this.state.packlist.answersLocked;trackWeight=this.state.config.trackWeight;stats=this.state.packlist.stats;toggleAnswersLock(){this.state.packlist.answersLocked.update(t=>!t);}serializeWeightPartition=z;statusLabelText=I(()=>{let t=this.stats().totalWeight,i=this.stats().checkedWeight,n=this.stats().checkedItems.toString(),c=this.stats().totalItems.toString();return this.trackWeight()?"Du hast "+$(i,void 0,1)+" von "+$(t,void 0,1)+" gepackt, indem du "+n+" von "+c+" Gegenst\xE4nde gepackt hast.":"Du hast "+n+" von "+c+" Gegenst\xE4nde gepackt.";});animationDuration=b(0);statsVisible=this.state.packlist.statsVisible;toggleStats(t){this.state.packlist.statsVisible.update(i=>{if(i!==t)return t;});}weightStats=I(()=>{let t=this.stats().totalWeight;return this.state.packlist.model().map(i=>({name:i.name,value:i.totalWeight/t})).filter(i=>i.value>0);});heaviestItems=I(()=>this.state.packlist.model().flatMap(t=>t.items).filter(t=>t.weight&&!t.skipped&&t.weight>0).toSorted((t,i)=>i.weight-t.weight).slice(0,10).reduce((t,i)=>{let n=(t.max||i.weight)??0,c={name:`${i.name} (${$(i.weight)})`,value:(i.weight??0)/n};return{max:n,items:[...t.items,c]};},{max:NaN,items:[]}).items);animationsDisabled=b(!0);constructor(){w(()=>{this.animationsDisabled.set(!this.state.config.animations()),this.animationDuration.set(this.state.config.animations()?500:0);});}static ɵfac=function(i){return new(i||e)();};static ɵcmp=x({type:e,selectors:[["app-packlist-status"]],decls:12,vars:9,consts:()=>{let t;t="Gewicht-Packfortschritt";let i;i="Gegenstandspackfortschritt";let n;n="Antworten sperren";let c;c="Statistik anzeigen";let Z;return Z="Zeige die schwersten Gegenst\xE4nde an",[[1,"flex","justify-center","gap-x-4"],[1,"contents"],[1,"card","mb-1"],[1,"mb-1","flex"],["title",t,"aria-live","polite",1,"grow",3,"value","max","animationDuration"],["title",i,"aria-live","polite",1,"grow",3,"value","max","animationDuration"],["aria-hidden","true",1,"flex","flex-col","items-center"],["type","button","role","button","aria-label",n,1,"link",3,"click","keypress"],[1,"h-6","w-6"],["iconPieChart","","iconClass","h-6 w-6","type","button","role","button","aria-label",c,1,"link",3,"click"],["iconBarChart","","iconClass","h-6 w-6 rotate-90","type","button","role","button","aria-label",Z,1,"link",3,"click"],["chartClass","max-w-[300px]",3,"segments"],["chartClass","max-w-[300px]",3,"bars"]];},template:function(i,n){i&1&&(d(0,Bt,5,3,"div",0),l(1,"div",1),d(2,Ut,2,1,"div",2)(3,Qt,2,1,"div",2),a(),l(4,"div",2)(5,"div",3),d(6,qt,1,4,"cmp-progress",4)(7,zt,1,4,"cmp-progress",5),a(),l(8,"div",6)(9,"span"),f(10),a(),d(11,Xt,2,1,"span"),a()()),i&2&&(_(n.questionsAvailable()?0:-1),r(),g("@animateDiagram",n.statsVisible())("@.disabled",n.animationsDisabled()),r(),_(n.statsVisible()==="distribution"?2:-1),r(),_(n.statsVisible()==="heaviestItems"?3:-1),r(3),_(n.trackWeight()?6:7),r(4),Q("",n.stats().checkedItems," / ",n.stats().totalItems,""),r(),_(n.trackWeight()?11:-1));},dependencies:[_t,ct,st,rt,at,pt,mt],encapsulation:2,data:{animation:[Yt]},changeDetection:0});}return e;})();function jt(e,s){e&1&&C(0,"app-display-questions")(1,"app-packlist-status")(2,"app-display-items");}function Ht(e,s){if(e&1){let t=h();l(0,"div",1)(1,"p",2),W(2,0),l(3,"button",3),S("click",function(){m(t);let n=o();return p(n.goToConfigImport());}),a(),l(4,"button",3),S("click",function(){m(t);let n=o();return p(n.goToRulesEdit());}),a(),B(),a()();}}var Ge=(()=>{class e{state=L(y);rulesAvailable=I(()=>this.state.rules.parsed().length>0);goToRulesEdit(){this.state.router.go("rules->edit");}goToConfigImport(){this.state.router.go("config#import");}static ɵfac=function(i){return new(i||e)();};static ɵcmp=x({type:e,selectors:[["app-packlist"]],decls:2,vars:1,consts:()=>{let t;return t="Keine Regeln verf\xFCgbar, bitte "+"\uFFFD#3\uFFFD"+" importiere "+"[\uFFFD/#3\uFFFD|\uFFFD/#4\uFFFD]"+" oder "+"\uFFFD#4\uFFFD"+" erstelle "+"[\uFFFD/#3\uFFFD|\uFFFD/#4\uFFFD]"+" welche.",t=nt(t),[t,[1,"flex","flex-col","items-center"],[1,"text-center"],["type","button",1,"link","inline","p-0","underline",3,"click"]];},template:function(i,n){i&1&&d(0,jt,3,0)(1,Ht,5,0,"div",1),i&2&&_(n.rulesAvailable()?0:1);},dependencies:[Tt,St,ft],encapsulation:2,changeDetection:0});}return e;})();export{Ge as PacklistComponent};/**i18n:3d455370b35d9d0e68747846a36fe6068efab1846f738987d3a7439e238a8fd0*/