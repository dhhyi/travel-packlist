import{b as v,d as b,i as x,o as V,q as F}from"./chunk-de1663fb.js";import{s as h}from"./chunk-f3109656.js";import"./chunk-d17c6b12.js";import{k as T}from"./chunk-3de3e3aa.js";import{$b as W,Eb as l,F as p,Fb as s,Gb as N,Nb as u,Ob as O,Pb as $,Q as f,Qb as I,Sb as P,Xa as R,Zb as U,ca as A,ec as G,ib as M,nb as S,vb as m,wc as d,xc as C,yc as y,zb as E}from"./chunk-8005388a.js";import"./chunk-780e5c0c.js";function K(e,r){e&1&&(l(0,"div",4),u(1,0),s());}function X(e,r){if(e&1&&(G(0),l(1,"div",5),u(2,1),s()),e&2){let t=P().rules;R(2),O(t)(t),$(2);}}function w(e,r){if(e&1&&(l(0,"div",6),U(1),s()),e&2){let _=P();R(),W(" ",_.error," ");}}function D(e,r){if(e&1&&S(0,K,2,0,"div",4)(1,X,3,2,"div",5)(2,w,2,1,"div",6),e&2){let _;E((_=r.type)==="pending"?0:_==="success"?1:2);}}function z(e){return e instanceof Error?e.message:typeof e=="string"?e:"Unknown error";}var ee=(()=>{class e{state=A(h);fb=A(V).nonNullable;rulesControl=this.fb.control(this.state.rules.raw.value());rulesText=T(this.rulesControl.valueChanges.pipe(f(this.rulesControl.value)));rulesPending=d(()=>this.rulesText()!==this.state.rules.raw.value());parserState=d(()=>this.rulesPending()?{type:"pending"}:this.state.rules.parsed.status()===y.Error?{type:"error",error:z(this.state.rules.parsed.error())}:{type:"success",rules:this.state.rules.parsed.value().length});constructor(){let _=T(this.rulesControl.valueChanges.pipe(p(500)));C(()=>{let t=_();typeof t=="string"&&t!==this.state.rules.raw.value()&&this.state.localRules.updateRules(t);}),C(()=>{this.state.rules.mode()==="local"?this.rulesControl.enable():this.rulesControl.disable();});}static ɵfac=function(t){return new(t||e)();};static ɵcmp=M({type:e,selectors:[["app-edit-rules-raw"]],decls:3,vars:2,consts:()=>{let _;_="Rules as code";let t;t="Parser state";let o;o="pending";let i;i="success";let L;L="error";let c;c=" Waiting for input. ";let a;a="{VAR_PLURAL, plural, one {1 rule} other {{INTERPOLATION} rules}}",a=I(a,{INTERPOLATION:"\uFFFD1\uFFFD",VAR_PLURAL:"\uFFFD0\uFFFD"});let g;return g=" Parsed "+a+" successfully! ",[c,g,["aria-label",_,1,"grow","resize-none","rounded","border","border-gray-300","bg-gray-100","px-1","py-0","pb-8","font-mono","leading-tight","text-gray-700","focus:outline-none","dark:bg-gray-900","dark:text-gray-300",3,"formControl"],["aria-label",t,"aria-live","polite",1,"bg-active","bottom-0","p-2","font-mono"],["aria-label",o,1,"text-yellow-normal"],["aria-label",i,1,"text-green"],["aria-label",L,1,"text-red"]];},template:function(t,o){if(t&1&&(N(0,"textarea",2),l(1,"div",3),S(2,D,3,1),s()),t&2){let i;m("formControl",o.rulesControl),R(2),E((i=o.parserState())?2:-1,i);}},dependencies:[F,v,b,x],styles:["[_nghost-%COMP%]{display:flex;flex-grow:1;flex-direction:column}"],changeDetection:0});}return e;})();export{ee as EditRulesRawComponent};/**i18n:dfa52c7a7e16db02da72dd7a9f372f1a5e871fd2da22f4ab798a7539933ec388*/