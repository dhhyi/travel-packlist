import"./chunk-e7d43fc8.js";import"./chunk-48f3d2d7.js";import{c as Se,d as ne,e as Pe,g as R,j as ie,k as Re,m as se,n as k}from"./chunk-5afa1a40.js";import{a as I}from"./chunk-c7f0e9b6.js";import{a as We,b as S}from"./chunk-84b513d3.js";import{l as Fe,q as Ve,v as je,y as Ue}from"./chunk-b44f76a3.js";import{n as $e,q as Ge,r as Be,s as c}from"./chunk-0c400760.js";import{a as q}from"./chunk-5ccfb57d.js";import{a as He}from"./chunk-31f6c64e.js";import{a as Y,g as Te,h as ve,k as ke,l as Ie,n as Me,o as Z,p as Ne,q as Oe,r as Le,s as xe,t as De}from"./chunk-082ead22.js";import{$ as U,A as de,B as b,C as p,Da as he,Eb as f,Fb as g,Ga as fe,Gb as oe,H as w,Ha as ge,Ib as z,Nb as Ee,R as m,Rb as T,Sb as X,U as j,W as ue,Xa as E,Y as u,_a as _e,ba as J,bb as ye,c as x,ca as a,da as $,e as D,h as F,ib as be,ja as G,ka as B,nb as we,oa as A,qa as me,qc as Ce,r as h,rb as C,sc as K,ta as W,tb as te,vb as re,wb as Ae,xc as _,ya as ee,yc as v,z as V,zb as H}from"./chunk-9e62b5d5.js";import{a as pe}from"./chunk-cfe2c86e.js";function st(o,n){if(o&1){let e=z();f(0,"button",12),T("click",function(){G(e);let r=X();return B(r.go("rules-documentation"));}),g();}}function at(o,n){if(o&1){let e=z();f(0,"button",13),T("click",function(){G(e);let r=X();return B(r.go("back"));}),g();}}function lt(o,n){if(o&1){let e=z();f(0,"button",14),T("click",function(){G(e);let r=X();return B(r.go("config"));}),g();}}var ze=Re([k(":enter, :leave",R({position:"fixed",width:`${(Math.min(window.innerWidth,600)-18).toFixed(0)}px`}),{optional:!0}),k(":enter",R({opacity:0,transform:"{{ from }}"}),{optional:!0}),Pe([k(":leave",[ne("{{ duration }}",R({opacity:0,transform:"{{ to }}"}))],{optional:!0}),k(":enter",[ne("{{ duration }}",R({opacity:1,transform:"translateX(0) translateY(0) scale(1)"}))],{optional:!0})])],{params:{duration:"0.3s ease-in-out"}}),ct=Se("routeTransition",[ie(":decrement",[se(ze,{params:{from:"translateX(-100%) scale(1)",to:"translateX(100%) scale(0.9)"}})]),ie(":increment",[se(ze,{params:{from:"translateX(100%) scale(1)",to:"translateX(-100%) scale(0.9)"}})])]),Xe=(()=>{class o{state=a(c);overlayVisible=ee(!1);router=a(Z);routeData=ke(this.router.events.pipe(p(e=>e instanceof Ie),h(()=>this.router.routerState.root.snapshot.firstChild?.data)));hierarchy=_(()=>this.routeData()?.hierarchy);scrollTopVisible=_(()=>this.state.browser.scrollY()>100);disableAnimations=ee(!0);displayRuleHelpLink=_(()=>this.routeData()?.ruleHelp);displayConfigLink=_(()=>this.routeData()?.config);displayHistoryBackLink=_(()=>this.routeData()?.historyBack);constructor(){ge(()=>{this.disableAnimations.set(!this.state.config.animations());});}scrollTop(){window.scrollTo({top:0,behavior:"smooth"});}go=this.state.router.go;static ɵfac=function(t){return new(t||o)();};static ɵcmp=be({type:o,selectors:[["app-root"]],decls:13,vars:9,consts:()=>{let e;e="Gehe zur TravelPacklist";let t;t="Zur Regelformat Hilfe";let r;r="Zur\xFCck";let i;i="Gehe zu Konfiguration";let s;s="Nach oben scrollen";let l;return l="TravelPacklist",[l,["role","navigation",1,"flex","h-[3rem]","min-h-[3rem]","flex-row","items-center","pb-2",3,"inert"],["type","button","aria-label",e,"role","banner","routerLink","/",1,"link","grow","justify-start","pl-0"],["aria-hidden","true","src","icon.svg",1,"h-8"],[1,"text-xl","font-bold"],["iconHelp","","iconClass","h-6 w-6","type","button","role","link","aria-label",t,1,"link","pr-2"],["iconArrowBack","","iconClass","h-6 w-6","type","button","role","link","aria-label",r,1,"link","pr-2"],["iconCog","","iconClass","h-6 w-6","type","button","role","link","aria-label",i,1,"link","pr-2"],[1,"flex","grow","flex-col","pb-[3.5rem]",3,"inert"],[1,"fixed","bottom-2","left-1/2","-translate-x-1/2"],["iconArrowUpward","","iconClass","h-6 w-6","type","button","aria-label",s,1,"flex","w-full","items-center","justify-center","rounded-3xl","border","border-slate-700","shadow-xl","dark:border-slate-300",3,"click"],[3,"overlayVisible"],["iconHelp","","iconClass","h-6 w-6","type","button","role","link","aria-label",t,1,"link","pr-2",3,"click"],["iconArrowBack","","iconClass","h-6 w-6","type","button","role","link","aria-label",r,1,"link","pr-2",3,"click"],["iconCog","","iconClass","h-6 w-6","type","button","role","link","aria-label",i,1,"link","pr-2",3,"click"]];},template:function(t,r){t&1&&(f(0,"nav",1)(1,"button",2),oe(2,"img",3),f(3,"h1",4),Ee(4,0),g()(),we(5,st,1,0,"button",5)(6,at,1,0,"button",6)(7,lt,1,0,"button",7),g(),f(8,"div",8),oe(9,"router-outlet"),f(10,"div",9)(11,"button",10),T("click",function(){return r.scrollTop();}),g()()(),f(12,"app-dialog",11),T("overlayVisible",function(s){return r.overlayVisible.set(s);}),g()),t&2&&(re("inert",r.overlayVisible()),E(5),H(r.displayRuleHelpLink()?5:-1),E(),H(r.displayHistoryBackLink()?6:-1),E(),H(r.displayConfigLink()?7:-1),E(),re("@routeTransition",r.hierarchy())("@.disabled",r.disableAnimations())("inert",r.overlayVisible()),E(2),Ae("hidden",!r.scrollTopVisible()));},dependencies:[De,Me,Ne,Ve,We,je,Ue,Fe],styles:["[_nghost-%COMP%]{display:flex;height:100%;flex-direction:column}"],data:{animation:[ct]},changeDetection:0});}return o;})();var pt="@",dt=(()=>{class o{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=a(A);loadingSchedulerFn=a(ut,{optional:!0});_engine;constructor(e,t,r,i,s){this.doc=e,this.delegate=t,this.zone=r,this.animationType=i,this.moduleImpl=s;}ngOnDestroy(){this._engine?.flush();}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-a8978e3b.js").then(r=>r),t;return this.loadingSchedulerFn?t=this.loadingSchedulerFn(e):t=e(),t.catch(r=>{throw new ue(5300,!1);}).then(({ɵcreateEngine:r,ɵAnimationRendererFactory:i})=>{this._engine=r(this.animationType,this.doc);let s=new i(this.delegate,this._engine,this.zone);return this.delegate=s,s;});}createRenderer(e,t){let r=this.delegate.createRenderer(e,t);if(r.ɵtype===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let i=new ae(r);return t?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(s=>{let l=s.createRenderer(e,t);i.use(l),this.scheduler??=this.injector.get(me,null,{optional:!0}),this.scheduler?.notify(10);}).catch(s=>{i.use(r);}),i;}begin(){this.delegate.begin?.();}end(){this.delegate.end?.();}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve();}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e);}static ɵfac=function(t){ye();};static ɵprov=u({token:o,factory:o.ɵfac});}return o;})(),ae=class{delegate;replay=[];ɵtype=1;constructor(n){this.delegate=n;}use(n){if(this.delegate=n,this.replay!==null){for(let e of this.replay)e(n);this.replay=null;}}get data(){return this.delegate.data;}destroy(){this.replay=null,this.delegate.destroy();}createElement(n,e){return this.delegate.createElement(n,e);}createComment(n){return this.delegate.createComment(n);}createText(n){return this.delegate.createText(n);}get destroyNode(){return this.delegate.destroyNode;}appendChild(n,e){this.delegate.appendChild(n,e);}insertBefore(n,e,t,r){this.delegate.insertBefore(n,e,t,r);}removeChild(n,e,t){this.delegate.removeChild(n,e,t);}selectRootElement(n,e){return this.delegate.selectRootElement(n,e);}parentNode(n){return this.delegate.parentNode(n);}nextSibling(n){return this.delegate.nextSibling(n);}setAttribute(n,e,t,r){this.delegate.setAttribute(n,e,t,r);}removeAttribute(n,e,t){this.delegate.removeAttribute(n,e,t);}addClass(n,e){this.delegate.addClass(n,e);}removeClass(n,e){this.delegate.removeClass(n,e);}setStyle(n,e,t,r){this.delegate.setStyle(n,e,t,r);}removeStyle(n,e,t){this.delegate.removeStyle(n,e,t);}setProperty(n,e,t){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(n,e,t)),this.delegate.setProperty(n,e,t);}setValue(n,e){this.delegate.setValue(n,e);}listen(n,e,t,r){return this.shouldReplay(e)&&this.replay.push(i=>i.listen(n,e,t,r)),this.delegate.listen(n,e,t,r);}shouldReplay(n){return this.replay!==null&&n.startsWith(pt);}},ut=new U("");function Ke(o="animations"){return fe("NgAsyncAnimations"),$([{provide:_e,useFactory:(n,e,t)=>new dt(n,e,t,o),deps:[Y,Te,W]},{provide:he,useValue:o==="noop"?"NoopAnimations":"BrowserAnimations"}]);}var N="Service workers are disabled or not supported by this browser",P=class{serviceWorker;worker;registration;events;constructor(n,e){if(this.serviceWorker=n,!n)this.worker=this.events=this.registration=new D(t=>t.error(new Error(N)));else{let t=null,r=new F();this.worker=new D(y=>(t!==null&&y.next(t),r.subscribe(L=>y.next(L))));let i=()=>{let{controller:y}=n;y!==null&&(t=y,r.next(t));};n.addEventListener("controllerchange",i),i(),this.registration=this.worker.pipe(m(()=>n.getRegistration()));let s=new F();this.events=s.asObservable();let l=y=>{let{data:L}=y;L?.type&&s.next(L);};n.addEventListener("message",l),e?.get(te,null,{optional:!0})?.onDestroy(()=>{n.removeEventListener("controllerchange",i),n.removeEventListener("message",l);});}}postMessage(n,e){return new Promise(t=>{this.worker.pipe(w(1)).subscribe(r=>{r.postMessage(pe({action:n},e)),t();});});}postMessageWithOperation(n,e,t){let r=this.waitForOperationCompleted(t),i=this.postMessage(n,e);return Promise.all([i,r]).then(([,s])=>s);}generateNonce(){return Math.round(Math.random()*1e7);}eventsOfType(n){let e;return typeof n=="string"?e=t=>t.type===n:e=t=>n.includes(t.type),this.events.pipe(p(e));}nextEventOfType(n){return this.eventsOfType(n).pipe(w(1));}waitForOperationCompleted(n){return new Promise((e,t)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(p(r=>r.nonce===n),w(1),h(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error);})).subscribe({next:e,error:t});});}get isEnabled(){return!!this.serviceWorker;}},mt=(()=>{class o{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled;}pushManager=null;subscriptionChanges=new F();constructor(e){if(this.sw=e,!e.isEnabled){this.messages=b,this.notificationClicks=b,this.subscription=b;return;}this.messages=this.sw.eventsOfType("PUSH").pipe(h(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(h(r=>r.data)),this.pushManager=this.sw.registration.pipe(h(r=>r.pushManager));let t=this.pushManager.pipe(m(r=>r.getSubscription()));this.subscription=new D(r=>{let i=t.subscribe(r),s=this.subscriptionChanges.subscribe(r);return()=>{i.unsubscribe(),s.unsubscribe();};});}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(N));let t={userVisibleOnly:!0},r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),i=new Uint8Array(new ArrayBuffer(r.length));for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return t.applicationServerKey=i,new Promise((s,l)=>{this.pushManager.pipe(m(d=>d.subscribe(t)),w(1)).subscribe({next:d=>{this.subscriptionChanges.next(d),s(d);},error:l});});}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(N));let e=t=>{if(t===null)throw new Error("Not subscribed to push notifications.");return t.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null);});};return new Promise((t,r)=>{this.subscription.pipe(w(1),m(e)).subscribe({next:t,error:r});});}decodeBase64(e){return atob(e);}static ɵfac=function(t){return new(t||o)(J(P));};static ɵprov=u({token:o,factory:o.ɵfac});}return o;})(),le=(()=>{class o{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled;}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=b,this.unrecoverable=b;return;}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE");}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(N));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e);}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(N));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e);}static ɵfac=function(t){return new(t||o)(J(P));};static ɵprov=u({token:o,factory:o.ɵfac});}return o;})();var Ze=new U("");function ht(){let o=a(O);if(!("serviceWorker"in navigator&&o.enabled!==!1))return;let n=a(Ze),e=a(W),t=a(te);e.runOutsideAngular(()=>{let r=navigator.serviceWorker,i=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",i),t.onDestroy(()=>{r.removeEventListener("controllerchange",i);});}),e.runOutsideAngular(()=>{let r,{registrationStrategy:i}=o;if(typeof i=="function")r=new Promise(s=>i().subscribe(()=>s()));else{let[s,...l]=(i||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=Ye(+l[0]||0);break;case"registerWhenStable":r=Promise.race([t.whenStable(),Ye(+l[0])]);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${o.registrationStrategy}`);}}r.then(()=>navigator.serviceWorker.register(n,{scope:o.scope}).catch(s=>console.error("Service worker registration failed with:",s)));});}function Ye(o){return new Promise(n=>setTimeout(n,o));}function ft(o,n){return new P(o.enabled!==!1?navigator.serviceWorker:void 0,n);}var O=class{enabled;scope;registrationStrategy;};function qe(o,n={}){return $([mt,le,{provide:Ze,useValue:o},{provide:O,useValue:n},{provide:P,useFactory:ft,deps:[O,A]},C(ht)]);}var Qe=!1,Je=async()=>{let o=a(c).rules.raw(),n=_(()=>o.includes("#"));if(!Qe&&n()){let e=await S("Die aktuellen Regeln enthalten Kommentare. Wenn du sie mit dem grafischen Editor bearbeitest, werden diese Kommentare verworfen. M\xF6chtest du fortfahren?");return e&&(Qe=!0),e;}return!0;};var ce=()=>{let o=a(c),n=a(Z),e=o.rules.parserError();if(e){let t=n.getCurrentNavigation()?.finalUrl;return n.navigate(["/rules-error"],{queryParams:{error:e},browserUrl:t});}else return!0;};var et=[{path:"",redirectTo:"/packlist",pathMatch:"full"},{path:"packlist",loadComponent:()=>import("./chunk-148f5238.js").then(o=>o.PacklistComponent),canActivate:[ce],data:{hierarchy:0,config:!0}},{path:"config",loadComponent:()=>import("./chunk-133b61e9.js").then(o=>o.ConfigComponent),data:{hierarchy:1}},{path:"rules",loadComponent:()=>import("./chunk-2e9a704c.js").then(o=>o.RulesComponent),canActivate:[ce,Je],data:{hierarchy:2,config:!0}},{path:"rules-raw",loadComponent:()=>import("./chunk-d7d4bf65.js").then(o=>o.EditRulesRawComponent),data:{hierarchy:2,config:!0,ruleHelp:!0}},{path:"rules-error",loadComponent:()=>import("./chunk-ee20f5e0.js").then(o=>o.RulesErrorComponent),data:{hierarchy:2,config:!0}},{path:"documentation/:topic",loadComponent:()=>import("./chunk-ff60e407.js").then(o=>o.DocumentationComponent),data:{hierarchy:3,historyBack:!0}},{path:"**",redirectTo:"/packlist"}];var tt=(()=>{class o{state=a(c);document=a(Y);init(){v(()=>{this.applyTheme(this.state.config.theme());}),v(()=>{this.applyLanguage(this.state.config.preferredLanguage());}),v(()=>{this.applyFontSize(this.state.config.fontSize());}),v(()=>{this.applyAccessibilityClass(this.state.config.accessibility());}),v(()=>{this.applyAnimationClass(this.state.config.animations());});}applyTheme(e){let t=window.matchMedia("(prefers-color-scheme: dark)").matches;e==="system"&&t||e==="dark"?this.document.documentElement.classList.add("dark"):this.document.documentElement.classList.remove("dark");}applyLanguage(e){if(e&&this.document.documentElement.lang!==e){if(K()){console.warn("Language switching is disabled in dev mode");return;}let t=window.location.href,r=window.location.hash,i=`index${e==="en"?"":`.${e}`}.html`,l=t.substring(0,t.indexOf(r))+i+window.location.hash;setTimeout(()=>{window.location.href=l;},0);}}applyFontSize(e){document.documentElement.style.setProperty("--html-font-size",e==="small"?"16px":e==="normal"?"18px":"20px");}applyAccessibilityClass(e){document.documentElement.classList.remove("accessible","compact"),document.documentElement.classList.add(e);}applyAnimationClass(e){document.documentElement.classList.toggle("animations",e);}static ɵfac=function(t){return new(t||o)();};static ɵprov=u({token:o,factory:o.ɵfac,providedIn:"root"});}return o;})();var rt=(()=>{class o{swUpdate=a(le);status=a(c).serviceWorker.status;init(){de(this.swUpdate.versionUpdates,this.swUpdate.unrecoverable).pipe(j(e=>{if(e.type==="VERSION_INSTALLATION_FAILED")this.status.set("error"),console.error(`Version installation failed
`,e.error);else if(e.type==="NO_NEW_VERSION_DETECTED")this.status.set("ok");else if(e.type==="VERSION_READY"||e.type==="VERSION_DETECTED")this.status.set("update-available");else{let t=e;this.status.set("unrecoverable"),console.error(`Unrecoverable state
`,t.reason);}}),p(e=>e.type==="VERSION_READY"),m(()=>S("Eine neue Version der App ist verf\xFCgbar. M\xF6chtest du neu laden?")),p(x)).subscribe(()=>{window.location.reload();}),this.swUpdate.isEnabled?V(6e4).pipe(m(()=>this.swUpdate.checkForUpdate())).subscribe(e=>{e&&console.log("Update available");}):(this.status.set("disabled"),console.warn("Service worker updates are disabled/unavailable"));}static ɵfac=function(t){return new(t||o)();};static ɵprov=u({token:o,factory:o.ɵfac,providedIn:"root"});}return o;})();var gt=q("Filesystem",{web:()=>import("./chunk-ba4e59e2.js").then(o=>new o.FilesystemWeb())});var _t=q("Share",{web:()=>import("./chunk-bccdfc5f.js").then(o=>new o.ShareWeb())});var Q=class extends I{async webShareRules(){let n=this.state.rules.raw();if(!n){console.error("No rules available");return;}let e=this.exportFileName();await navigator.share({title:e,files:[new File([n],e,{type:"text/plain"})]});}downloadRules(){let n=this.state.rules.raw();if(!n){console.error("No rules available");return;}let e=new Blob([n],{type:"text/plain"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=this.exportFileName(),r.click();}async exportRules(){this.state.browser.isMobile()&&"share"in navigator?await this.webShareRules():this.downloadRules();}};var nt=(()=>{class o{state=a(c);exportNeeded=this.state.rules.exportNeeded;reminderActive=this.state.config.exportReminder;lastAskedHash=[];init(){V(3e4).pipe(p(()=>this.reminderActive()&&this.exportNeeded()&&this.exportOverdue()&&this.enoughTimeSinceLastEditPassed()),h(()=>this.state.rules.hash()),p(e=>!this.lastAskedHash.includes(e)),j(e=>{this.lastAskedHash.push(e);}),m(()=>S("Die aktuellen Regeln wurden seit einiger Zeit nicht mehr exportiert. M\xF6chtest du sie jetzt exportieren?")),p(x)).subscribe(()=>{this.state.router.go("config#export");});}exportOverdue(){let e=this.state.export.lastDate();return new Date().getTime()-e>ot(10);}enoughTimeSinceLastEditPassed(){let e=this.state.rules.lastAction();return new Date().getTime()-e>ot(2);}static ɵfac=function(t){return new(t||o)();};static ɵprov=u({token:o,factory:o.ɵfac,providedIn:"root"});}return o;})();function ot(o){return o*60*1e3;}function yt(o){return{isTrackWeight:()=>o.get(c).config.trackWeight()};}var it={providers:[Ce(),Oe(et,Le(),xe()),qe("ngsw-worker.js",{enabled:!K()&&!0,registrationStrategy:"registerImmediately"}),Ke(),C(()=>{a(tt).init();}),C(()=>{a(rt).init();}),C(()=>{a(nt).init();}),{deps:[A],provide:$e,useFactory:yt},{provide:I,useClass:Q},He(),Ge(),{provide:Be,useValue:"cors"}]};ve(Xe,it).catch(o=>{console.error(o);});/**i18n:dceda2222b78a7d36ce594824fbf7b515d927444d0f7723e201921c9765a2e5b*/