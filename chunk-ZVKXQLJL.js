import{U as a,_a as b,aa as l,bc as p,cc as f,dc as g,ha as d,i as v,oa as y,pa as i}from"./chunk-3LKDF7HW.js";function m(s,e){!e?.injector&&d(m);let n=e?.injector??l(y),o=new v(1),u=g(()=>{let t;try{t=s()}catch(c){f(()=>o.error(c));return}f(()=>o.next(t))},{injector:n,manualCleanup:!0});return n.get(i).onDestroy(()=>{u.destroy(),o.complete()}),o.asObservable()}function w(s,e){let n=!e?.manualCleanup;n&&!e?.injector&&d(w);let o=n?e?.injector?.get(i)??l(i):null,u=h(e?.equal),t;e?.requireSync?t=b({kind:0},{equal:u}):t=b({kind:1,value:e?.initialValue},{equal:u});let c=s.subscribe({next:r=>t.set({kind:1,value:r}),error:r=>{if(e?.rejectErrors)throw r;t.set({kind:2,error:r})}});if(e?.requireSync&&t().kind===0)throw new a(601,!1);return o?.onDestroy(c.unsubscribe.bind(c)),p(()=>{let r=t();switch(r.kind){case 1:return r.value;case 2:throw r.error;case 0:throw new a(601,!1)}},{equal:e?.equal})}function h(s=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&s(e.value,n.value)}export{m as a,w as b};
