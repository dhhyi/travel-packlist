import{a as nt,b as at,d as ot}from"./chunk-96e3562a.js";import{B as rt,Ga as W,Pb as it,Tb as y,Vb as V,W as A,Z as ie,aa as x,da as st,p as tt}from"./chunk-0b36a61d.js";import{a as N,b as et}from"./chunk-be8120ea.js";function fr(i){return i.map(c=>c.toString()).map(c=>c+";").join(`

`);}function me(i,c,e=-1){if(!i)return"0g";let n=(e<0?i/1e3:(i/1e3).toFixed(e)).toString()+"kg",l=(i*1).toString()+"g";return c?c==="kg"?n:l:n.length<=l.length?n:l;}var z=class{condition;questions;items;constructor(c,e=[],n=[]){this.condition=c,this.questions=e,this.items=n;}toString(){let c=[];if(!(this.condition instanceof Z)){let n=this.condition.toString();n&&c.push(n," ");}c.push(":-");let e=this.questions.map(n=>n.toString()).concat(this.items.map(n=>n.toString()));if(e.length===1&&c.length===1)c.push(" ",e[0]);else for(let n=0;n<e.length;n++){let l=e[n];n>0&&c.push(","),c.push(`
`,"   ",l);}return c.join("");}},j=class{question;variable;static NEW_QUESTION_NAME="New Question";static NEW_VARIABLE_NAME="new_variable";constructor(c,e){this.question=c,this.variable=e;}toString(){return this.question+" $"+this.variable;}},U=class{category;name;weight;static NEW_ITEM_NAME="New Item";static NEW_CATEGORY_NAME="New";constructor(c,e,n){this.category=c,this.name=e,this.weight=n;}toString(){let c=`[${this.category}] ${this.name}`.trim();return this.weight&&(c+=" "+me(this.weight)),c;}},T=class{variable;constructor(c){this.variable=c;}evaluate(c){return c[this.variable];}toString(){return this.variable;}},Ar=(()=>{class i extends T{static string="please_select";constructor(){super(i.string);}}return i;})(),Z=(()=>{class i extends T{static string="always";constructor(){super(i.string);}evaluate(){return!0;}}return i;})(),L=class{not;constructor(c){this.not=c;}evaluate(c){return!this.not.evaluate(c);}toString(){return"NOT "+this.not.toString();}},q=class{left;right;constructor(c,e){this.left=c,this.right=e;}evaluate(c){return this.left.evaluate(c)&&this.right.evaluate(c);}toString(){return this.left.toString()+" AND "+this.right.toString();}},K=class{left;right;constructor(c,e){this.left=c,this.right=e;}evaluate(c){return this.left.evaluate(c)||this.right.evaluate(c);}toString(){return this.left.toString()+" OR "+this.right.toString();}};function gr(i,c){let e=c.filter(l=>l instanceof j),n=c.filter(l=>l instanceof U);return new z(i??new Z(),e,n);}function lt(i){return i.length===1?i[0]:new q(i[0],lt(i.slice(1)));}function ct(i){return i.length===1?i[0]:new K(i[0],ct(i.slice(1)));}function hr(i,c){function e(){this.constructor=i;}e.prototype=c.prototype,i.prototype=new e();}function P(i,c,e,n){var l=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(l,P.prototype),l.expected=c,l.found=e,l.location=n,l.name="SyntaxError",l;}hr(P,Error);function ve(i,c,e){return e=e||" ",i.length>c?i:(c-=i.length,e+=e.repeat(c),i+e.slice(0,c));}P.prototype.format=function(i){var c="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<i.length;n++)if(i[n].source===this.location.source){e=i[n].text.split(/\r\n|\n|\r/g);break;}var l=this.location.start,m=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(l):l,$=this.location.source+":"+m.line+":"+m.column;if(e){var E=this.location.end,O=ve("",m.line.toString().length," "),v=e[l.line-1],d=l.line===E.line?E.column:v.length+1,p=d-l.column||1;c+=`
 --> `+$+`
`+O+` |
`+m.line+" | "+v+`
`+O+" | "+ve("",l.column-1," ")+ve("",p,"^");}else c+=`
 at `+$;}return c;};P.buildMessage=function(i,c){var e={literal:function(v){return'"'+l(v.text)+'"';},class:function(v){var d=v.parts.map(function(p){return Array.isArray(p)?m(p[0])+"-"+m(p[1]):m(p);});return"["+(v.inverted?"^":"")+d.join("")+"]";},any:function(){return"any character";},end:function(){return"end of input";},other:function(v){return v.description;}};function n(v){return v.charCodeAt(0).toString(16).toUpperCase();}function l(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d);}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+n(d);});}function m(v){return v.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d);}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+n(d);});}function $(v){return e[v.type](v);}function E(v){var d=v.map($),p,I;if(d.sort(),d.length>0){for(p=1,I=1;p<d.length;p++)d[p-1]!==d[p]&&(d[I]=d[p],I++);d.length=I;}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1];}}function O(v){return v?'"'+l(v)+'"':"end of input";}return"Expected "+E(i)+" but "+O(c)+" found.";};function M(i,c){c=c!==void 0?c:{};var e={},n=c.grammarSource,l={Rules:Le,Rule:ue,Condition:Ke,Effects:He,Question:ge,Item:pe,VariableName:he,QuestionString:Je,ItemNameAndWeight:Ye,CategoryName:Be},m=Le,$=";",E=":-",O="OR",v="AND",d="NOT",p=",",I="$",H="[",F="]",Ie="kg",$t="g",wt=".",Re=/^[^$,;#]/,St=/^[a-zA-Z]/,Oe=/^[a-zA-Z0-9\-[\](){}_]/,Ce=/^[^\],;#[]/,bt=/^[,;]/,Me=/^[^ ,;#]/,ee=/^[0-9]/,ke=/^[ \t\n\r]/,yt=R("rule end"),xt=C(";",!1),Et=R("rule"),At=C(":-",!1),te=R("condition"),It=C("OR",!1),Rt=C("AND",!1),ce=C("NOT",!1),Ot=C(",",!1),We=R("question"),Ct=C("$",!1),Ne=D(["$",",",";","#"],!0,!1),Mt=R("variable name"),kt=D([["a","z"],["A","Z"]],!1,!1),Te=D([["a","z"],["A","Z"],["0","9"],"-","[","]","(",")","{","}","_"],!1,!1),Wt=R("item"),Nt=R("category"),Tt=C("[",!1),Pt=C("]",!1),jt=R("category name"),Pe=D(["]",",",";","#","["],!0,!1),Ft=R("item name"),Dt=R("word"),Vt=D([",",";"],!1,!1),je=D([" ",",",";","#"],!0,!1),zt=R("weight"),Lt=C("kg",!1),qt=C("g",!1),Kt=R("number"),re=D([["0","9"]],!1,!1),Ut=C(".",!1),Qt=R("whitespace"),Fe=D([" ","	",`
`,"\r"],!1,!1),Ht=ar(),Jt=function(t,r){return gr(t,r);},Bt=function(t){return ct(t);},Yt=function(t){return lt(t);},Gt=function(t){return new L(t);},Zt=function(t){return new T(t);},_t=function(t,r){return new j(t.trim(),r.trim());},Xt=function(t,r){let{name:a,weight:o}=r;return new U(t.trim(),a,o);},er=function(t,r){return c.trackWeight;},tr=function(t,r){let a=t.trim();return a.length||De("item name"),{name:a,weight:r};},rr=function(t){let r=t.trim();return r.length||De("item name"),{name:r,weight:void 0};},sr=function(t){return t*1e3;},ir=function(){return parseFloat(nr());},s=c.peg$currPos|0,b=s,J=[{line:1,column:1}],k=s,se=c.peg$maxFailExpected||[],u=c.peg$silentFails|0,B;if(c.startRule){if(!(c.startRule in l))throw new Error(`Can't start parsing from rule "`+c.startRule+'".');m=l[c.startRule];}function nr(){return i.substring(b,s);}function wr(){return b;}function Sr(){return{source:n,start:b,end:s};}function br(){return Y(b,s);}function De(t,r){throw r=r!==void 0?r:Y(b,s),ze([R(t)],i.substring(b,s),r);}function yr(t,r){throw r=r!==void 0?r:Y(b,s),lr(t,r);}function C(t,r){return{type:"literal",text:t,ignoreCase:r};}function D(t,r,a){return{type:"class",parts:t,inverted:r,ignoreCase:a};}function ar(){return{type:"any"};}function or(){return{type:"end"};}function R(t){return{type:"other",description:t};}function Ve(t){var r=J[t],a;if(r)return r;if(t>=J.length)a=J.length-1;else for(a=t;!J[--a];);for(r=J[a],r={line:r.line,column:r.column};a<t;)i.charCodeAt(a)===10?(r.line++,r.column=1):r.column++,a++;return J[t]=r,r;}function Y(t,r,a){var o=Ve(t),f=Ve(r),h={source:n,start:{offset:t,line:o.line,column:o.column},end:{offset:r,line:f.line,column:f.column}};return a&&n&&typeof n.offset=="function"&&(h.start=n.offset(h.start),h.end=n.offset(h.end)),h;}function g(t){s<k||(s>k&&(k=s,se=[]),se.push(t));}function lr(t,r){return new P(t,null,null,r);}function ze(t,r,a){return new P(P.buildMessage(t,r),t,r,a);}function Le(){var t,r,a,o,f,h;for(t=s,r=w(),a=[],o=ue();o!==e;)a.push(o),o=s,f=qe(),f!==e?(f=ue(),f===e?(s=o,o=e):o=f):o=f;return o=qe(),o===e&&(o=null),f=w(),h=Xe(),h!==e?t=a:(s=t,t=e),t;}function qe(){var t,r,a,o;return u++,t=s,r=w(),i.charCodeAt(s)===59?(a=$,s++):(a=e,u===0&&g(xt)),a!==e?(o=w(),r=[r,a,o],t=r):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(yt)),t;}function ue(){var t,r,a,o,f,h;return u++,t=s,r=Ke(),r===e&&(r=null),a=w(),i.substr(s,2)===E?(o=E,s+=2):(o=e,u===0&&g(At)),o!==e?(f=w(),h=He(),b=t,t=Jt(r,h)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(Et)),t;}function Ke(){var t,r;return u++,t=cr(),u--,t===e&&(r=e,u===0&&g(te)),t;}function cr(){var t,r,a,o,f,h,S,G;for(u++,t=s,r=s,a=[],o=Ue();o!==e;)a.push(o),o=s,f=s,h=w(),i.substr(s,2)===O?(S=O,s+=2):(S=e,u===0&&g(It)),S!==e?(G=w(),h=[h,S,G],f=h):(s=f,f=e),f!==e?(f=Ue(),f===e?(s=o,o=e):o=f):o=f;return a.length<1?(s=r,r=e):r=a,r!==e&&(b=t,r=Bt(r)),t=r,u--,t===e&&(r=e,u===0&&g(te)),t;}function Ue(){var t,r,a,o,f,h,S,G;for(u++,t=s,r=s,a=[],o=fe();o!==e;)a.push(o),o=s,f=s,h=w(),i.substr(s,3)===v?(S=v,s+=3):(S=e,u===0&&g(Rt)),S!==e?(G=w(),h=[h,S,G],f=h):(s=f,f=e),f!==e?(f=fe(),f===e?(s=o,o=e):o=f):o=f;return a.length<1?(s=r,r=e):r=a,r!==e&&(b=t,r=Yt(r)),t=r,u--,t===e&&(r=e,u===0&&g(te)),t;}function fe(){var t,r,a,o,f,h;return u++,t=s,i.substr(s,3)===d?(r=d,s+=3):(r=e,u===0&&g(ce)),r!==e?(a=w(),i.substr(s,3)===d?(o=d,s+=3):(o=e,u===0&&g(ce)),o!==e?(f=w(),h=fe(),h!==e?t=h:(s=t,t=e)):(s=t,t=e)):(s=t,t=e),t===e&&(t=s,i.substr(s,3)===d?(r=d,s+=3):(r=e,u===0&&g(ce)),r!==e?(a=w(),o=Qe(),o!==e?(b=t,t=Gt(o)):(s=t,t=e)):(s=t,t=e),t===e&&(t=s,r=Qe(),r!==e?t=r:(s=t,t=e))),u--,t===e&&(r=e,u===0&&g(te)),t;}function Qe(){var t,r;return t=s,r=he(),r!==e&&(b=t,r=Zt(r)),t=r,t;}function He(){var t,r,a,o,f,h,S;for(t=s,r=[],a=ge(),a===e&&(a=pe());a!==e;)r.push(a),a=s,o=s,f=w(),i.charCodeAt(s)===44?(h=p,s++):(h=e,u===0&&g(Ot)),h!==e?(S=w(),f=[f,h,S],o=f):(s=o,o=e),o!==e?(o=ge(),o===e&&(o=pe()),o===e?(s=a,a=e):a=o):a=o;return t=r,t;}function ge(){var t,r,a,o;return u++,t=s,r=Je(),r!==e?(i.charCodeAt(s)===36?(a=I,s++):(a=e,u===0&&g(Ct)),a!==e?(o=he(),o!==e?(b=t,t=_t(r,o)):(s=t,t=e)):(s=t,t=e)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(We)),t;}function Je(){var t,r,a;if(u++,t=s,r=[],a=i.charAt(s),Re.test(a)?s++:(a=e,u===0&&g(Ne)),a!==e)for(;a!==e;)r.push(a),a=i.charAt(s),Re.test(a)?s++:(a=e,u===0&&g(Ne));else r=e;return r!==e?t=i.substring(t,s):t=r,u--,t===e&&(r=e,u===0&&g(We)),t;}function he(){var t,r,a,o,f;if(u++,t=s,r=s,a=i.charAt(s),St.test(a)?s++:(a=e,u===0&&g(kt)),a!==e){for(o=[],f=i.charAt(s),Oe.test(f)?s++:(f=e,u===0&&g(Te));f!==e;)o.push(f),f=i.charAt(s),Oe.test(f)?s++:(f=e,u===0&&g(Te));a=[a,o],r=a;}else s=r,r=e;return r!==e?t=i.substring(t,s):t=r,u--,t===e&&(r=e,u===0&&g(Mt)),t;}function pe(){var t,r,a,o;return u++,t=s,r=ur(),r!==e?(a=w(),o=Ye(),o!==e?(b=t,t=Xt(r,o)):(s=t,t=e)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(Wt)),t;}function ur(){var t,r,a,o,f,h;return u++,t=s,i.charCodeAt(s)===91?(r=H,s++):(r=e,u===0&&g(Tt)),r!==e?(a=w(),o=Be(),o!==e?(f=w(),i.charCodeAt(s)===93?(h=F,s++):(h=e,u===0&&g(Pt)),h!==e?t=o:(s=t,t=e)):(s=t,t=e)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(Nt)),t;}function Be(){var t,r,a;if(u++,t=s,r=[],a=i.charAt(s),Ce.test(a)?s++:(a=e,u===0&&g(Pe)),a!==e)for(;a!==e;)r.push(a),a=i.charAt(s),Ce.test(a)?s++:(a=e,u===0&&g(Pe));else r=e;return r!==e?t=i.substring(t,s):t=r,u--,t===e&&(r=e,u===0&&g(jt)),t;}function Ye(){var t,r,a,o,f;for(u++,t=s,r=s,a=[],o=Ge();o!==e;)a.push(o),o=s,f=w(),f=Ge(),f===e?(s=o,o=e):o=f;if(r=i.substring(r,s),a=w(),o=Ze(),o!==e?(b=s,f=er(r,o),f?f=void 0:f=e,f!==e?(b=t,t=tr(r,o)):(s=t,t=e)):(s=t,t=e),t===e){for(t=s,r=s,a=[],o=de();o!==e;)a.push(o),o=s,f=w(),f=de(),f===e?(s=o,o=e):o=f;r=i.substring(r,s),b=t,r=rr(r),t=r;}return u--,t===e&&(r=e,u===0&&g(Ft)),t;}function Ge(){var t,r,a,o,f,h;return u++,t=s,r=s,u++,a=s,o=Ze(),o!==e?(f=w(),h=Xe(),h===e&&(h=i.charAt(s),bt.test(h)?s++:(h=e,u===0&&g(Vt))),h!==e?(o=[o,f,h],a=o):(s=a,a=e)):(s=a,a=e),u--,a===e?r=void 0:(s=r,r=e),r!==e?(a=de(),a!==e?t=a:(s=t,t=e)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(Dt)),t;}function de(){var t,r,a;if(t=s,r=[],a=i.charAt(s),Me.test(a)?s++:(a=e,u===0&&g(je)),a!==e)for(;a!==e;)r.push(a),a=i.charAt(s),Me.test(a)?s++:(a=e,u===0&&g(je));else r=e;return r!==e?t=i.substring(t,s):t=r,t;}function Ze(){var t,r,a;return u++,t=s,r=_e(),r!==e?(i.substr(s,2)===Ie?(a=Ie,s+=2):(a=e,u===0&&g(Lt)),a!==e?(b=t,t=sr(r)):(s=t,t=e)):(s=t,t=e),t===e&&(t=s,r=_e(),r!==e?(i.charCodeAt(s)===103?(a=$t,s++):(a=e,u===0&&g(qt)),a===e&&(a=null),t=r):(s=t,t=e)),u--,t===e&&(r=e,u===0&&g(zt)),t;}function _e(){var t,r,a,o,f,h,S;if(u++,t=s,r=[],a=i.charAt(s),ee.test(a)?s++:(a=e,u===0&&g(re)),a!==e)for(;a!==e;)r.push(a),a=i.charAt(s),ee.test(a)?s++:(a=e,u===0&&g(re));else r=e;if(r!==e){if(a=s,i.charCodeAt(s)===46?(o=wt,s++):(o=e,u===0&&g(Ut)),o!==e){if(f=s,h=[],S=i.charAt(s),ee.test(S)?s++:(S=e,u===0&&g(re)),S!==e)for(;S!==e;)h.push(S),S=i.charAt(s),ee.test(S)?s++:(S=e,u===0&&g(re));else h=e;h!==e?f=i.substring(f,s):f=h,f!==e?(o=[o,f],a=o):(s=a,a=e);}else s=a,a=e;a===e&&(a=null),b=t,t=ir();}else s=t,t=e;return u--,t===e&&(r=e,u===0&&g(Kt)),t;}function w(){var t,r;for(u++,t=[],r=i.charAt(s),ke.test(r)?s++:(r=e,u===0&&g(Fe));r!==e;)t.push(r),r=i.charAt(s),ke.test(r)?s++:(r=e,u===0&&g(Fe));return u--,r=e,u===0&&g(Qt),t;}function Xe(){var t,r;return t=s,u++,i.length>s?(r=i.charAt(s),s++):(r=e,u===0&&g(Ht)),u--,r===e?t=void 0:(s=t,t=e),t;}if(B=m(),c.peg$library)return{peg$result:B,peg$currPos:s,peg$FAILED:e,peg$maxFailExpected:se,peg$maxFailPos:k};if(B!==e&&s===i.length)return B;throw B!==e&&s<i.length&&g(or()),ze(se,k<i.length?i.charAt(k):null,k<i.length?Y(k,k+1):Y(k,k));}var pr={isTrackWeight:()=>!1},dr=new ie("PARSER_CONFIG_PROVIDER"),ne=(()=>{class i{config=x(dr,{optional:!0})??pr;isTrackWeight(){return this.config.isTrackWeight();}makeOptions(e,n={}){return{startRule:e,trackWeight:n.forceWeightTracking??this.isTrackWeight()};}parseCondition(e){return M(e,this.makeOptions("Condition"));}parseQuestion(e){return M(e,this.makeOptions("Question"));}parseItem(e){return M(e,this.makeOptions("Item"));}parseEffects(e){return M(e,this.makeOptions("Effects"));}parseRule(e){return M(e,this.makeOptions("Rule"));}parseRules(e){let n=e.split(/\r?\n/g).map(l=>l.replace(/#.*/,"")).join(`
`);try{return M(n,this.makeOptions("Rules"));}catch(l){let m=[];if(m.push("Error parsing rules"),l instanceof P){let $=l.location.start.line.toString(),E=l.location.start.column.toString();m.push(" at line ",$," column ",E),m.push(":",`
`,l.message);}else console.error(l);throw new Error(m.join(""));}}validateVariableName(e){M(e,this.makeOptions("VariableName"));}validateQuestionString(e){M(e,this.makeOptions("QuestionString"));}validateItemNameAndWeight(e){M(e,this.makeOptions("ItemNameAndWeight"));}validateCategoryName(e){M(e,this.makeOptions("CategoryName"));}forceParseWeight(e){return M(e,this.makeOptions("ItemNameAndWeight",{forceWeightTracking:!0})).weight??0;}static ɵfac=function(n){return new(n||i)();};static ɵprov=A({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})();var $e=(()=>{class i{parser=x(ne);extractVariables(e){return e.reduce((n,l)=>[...n,...l.questions.map(m=>m.variable)],[]);}extractCategories(e){let n=new Set();for(let l of e)for(let m of l.items)n.add(m.category);return Array.from(n);}renameVariable(e,n,l){if(l instanceof Array)return l.map($=>this.renameVariable(e,n,$));if(l instanceof j)return l.variable===e?new j(l.question,n):l;if(l instanceof z)return new z(this.renameVariable(e,n,l.condition),l.questions.map($=>this.renameVariable(e,n,$)),l.items);if(l instanceof T)return l.variable===e?new T(n):l;if(l instanceof L)return new L(this.renameVariable(e,n,l.not));if(l instanceof q)return new q(this.renameVariable(e,n,l.left),this.renameVariable(e,n,l.right));if(l instanceof K)return new K(this.renameVariable(e,n,l.left),this.renameVariable(e,n,l.right));let m=l;throw new Error("Unknown item type: "+m);}filterActive(e){let n=e.rules.filter(m=>m.condition.evaluate(e.model)),l=this.extractVariables(n).reduce((m,$)=>et(N({},m),{[$]:e.model[$]}),{[Z.string]:!0});return n.length===e.rules.length?{model:l,rules:n}:this.filterActive({model:l,rules:n});}contains(e,n){let l=n.toLowerCase();if(e instanceof z)return this.contains(e.condition,n)||e.questions.some($=>this.contains($,n))||e.items.some($=>this.contains($,n));if(e instanceof j)return e.question.toLowerCase().includes(l)||e.variable.toLowerCase().includes(l);if(e instanceof U)return e.category.toLowerCase().includes(l)||e.name.toLowerCase().includes(l);if(e instanceof T)return e.variable.toLowerCase().includes(l);if(e instanceof L)return this.contains(e.not,n);if(e instanceof q)return this.contains(e.left,n)||this.contains(e.right,n);if(e instanceof K)return this.contains(e.left,n)||this.contains(e.right,n);let m=e;throw new Error("Unknown item type: "+m);}countItemsAndWeights(e){return e.reduce((n,l)=>l.items.reduce((m,$)=>{let E;return this.parser.isTrackWeight()?E=$.weight?1:0:E=this.parser.forceParseWeight($.name)?1:0,{items:m.items+1,weights:m.weights+E};},n),{items:0,weights:0});}static ɵfac=function(n){return new(n||i)();};static ɵprov=A({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})();var ut=`:-
   [Utility] Paper Tissues,
   [Utility] Backpack;

:- Are you traveling longer than 3 days? $longer;

longer :-
   Do you have a washer or laundry service available? $laundry,
   Do you want to work? $work,
   [Electronics] Phone Charger,
   [Electronics] Tablet;

longer AND NOT laundry :-
   [Clothes] enough Shirts,
   [Clothes] enough Underwear,
   [Clothes] spare Pants;

laundry :-
   [Clothes] 3 Shirts,
   [Clothes] 3 sets of Underwear;

work :-
   [Electronics] Laptop;

:-
   Will it be sunny? $sunny,
   Will it be rainy? $rainy,
   Are you traveling abroad? $abroad;

sunny :-
   Do you expect a high UV index? $uv,
   [Utility] Sunglasses,
   [Clothes] Short Pants;

rainy :-
   [Clothes] Rain Jacket;

NOT rainy :-
   [Clothes] Jacket;

NOT sunny :-
   [Clothes] Long Pants;

uv :-
   [Utility] Sunscreen;

abroad :-
   [Documents] Passport,
   [Documents] Visa;
`;var ft=`:-
   [N\xFCtzliches] Papiertaschent\xFCcher,
   [N\xFCtzliches] Rucksack;

:- Reist du l\xE4nger als 3 Tage? $longer;

longer :-
   Hast du eine Waschmaschine oder einen W\xE4scheservice zur Verf\xFCgung? $laundry,
   Willst du arbeiten? $work,
   [Elektronik] Handy-Ladeger\xE4t,
   [Elektronik] Tablet;

longer AND NOT laundry :-
   [Kleidung] genug Hemden,
   [Kleidung] genug Unterw\xE4sche,
   [Kleidung] Ersatzhosen;

laundry :-
   [Kleidung] 3 Hemden,
   [Kleidung] 3 S\xE4tze Unterw\xE4sche;

work :-
   [Elektronik] Laptop;

:-
   Wird es sonnig sein? $sunny,
   Wird es regnerisch sein? $rainy,
   Reist du ins Ausland? $abroad;

sunny :-
   Erwartest du einen hohen UV-Index? $uv,
   [N\xFCtzliches] Sonnenbrille,
   [Kleidung] Kurze Hosen;

rainy :-
   [Kleidung] Regenjacke;

NOT rainy :-
   [Kleidung] Jacke;

NOT sunny :-
   [Kleidung] Lange Hosen;

uv :-
   [N\xFCtzliches] Sonnencreme;

abroad :-
   [Dokumente] Reisepass,
   [Dokumente] Visum;
`;var we=new ie("RULES_TEMPLATE");function mr(i){return i.startsWith("de")?ft:ut;}function Gr(){return st([{provide:we,useFactory:mr,deps:[it]}]);}function ae(i,c){let e=i.getItem("state"),n;if(e){let l=JSON.parse(e);n=N(N({},c),l);}else n=N({},c);return n;}function gt(i,c){if(typeof i!=typeof c)return!1;if(i&&c&&typeof i=="object"){let e=Object.keys(i),n=Object.keys(c);return e.length===n.length&&e.every(l=>gt(i[l],c[l]));}return i===c;}function vr(i,c){let e=Object.keys(c).filter(n=>!gt(i[n],c[n])).map(n=>[n,i[n]]);return e.length===0?null:Object.fromEntries(e);}function oe(i,c,e){let n=vr(c,e);n===null?i.removeItem("state"):i.setItem("state",JSON.stringify(n));}var ht=["en","de"],_={answers:{},checkedItems:[],collapsedCategories:[],rules:void 0,fadeOutDisabledRules:!1,highlightVariableStatus:!1,refactorVariables:!0,categorySorting:"alphabetically",trackWeight:!1,answersLocked:!1,theme:"system",fontSize:"normal",language:"auto",exportReminder:!1,lastExportHash:"",lastExportDate:0},Se=Object.keys(_),le=(()=>{class i{state=ae(localStorage,_);signalMap=new Map();constructor(){this.loadLegacyState(),this.initializeSignals();}initializeSignals(){for(let e of Se){let n=W(this.state[e]);V(()=>{let l=n();l!==this.state[e]&&(this.state[e]=l,this.persist());},{manualCleanup:!0}),this.signalMap.set(e,n);}}loadLegacyState(){if(localStorage.getItem("answers")&&(this.state.answers=JSON.parse(localStorage.getItem("answers")),localStorage.removeItem("answers")),localStorage.getItem("checkedItems")&&(this.state.checkedItems=JSON.parse(localStorage.getItem("checkedItems")),localStorage.removeItem("checkedItems")),localStorage.getItem("collapsedCategories")&&(this.state.collapsedCategories=JSON.parse(localStorage.getItem("collapsedCategories")),localStorage.removeItem("collapsedCategories")),localStorage.getItem("rules")&&(this.state.rules=localStorage.getItem("rules"),localStorage.removeItem("rules")),localStorage.getItem("config")){let e=JSON.parse(localStorage.getItem("config"));this.state.fadeOutDisabledRules=e.fadeOutDisabledRules,this.state.trackWeight=e.trackWeight,this.state.answersLocked=e.answersLocked,this.state.theme=e.theme,this.state.language=e.language,localStorage.removeItem("config");}this.persist();}persist(){oe(localStorage,this.state,_);}handles(e){return Se.includes(e);}signal(e){return this.signalMap.get(e);}set(e,n){this.signal(e).set(n);}get(e){return this.signal(e)();}reset(){this.state=N({},_),this.persist(),Se.forEach(e=>{this.signal(e).set(_[e]);});}static ɵfac=function(n){return new(n||i)();};static ɵprov=A({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})();var pt=(()=>{class i{state=x(le);parser=x(ne);refactor=x($e);rulesTemplate=x(we);signalMap=new Map();constructor(){this.initializeSignals();}initializeSignals(){this.signalMap.set("isMobile",y(()=>{let p=navigator.userAgent;return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(p);}));let e=W(window.scrollY);window.addEventListener("scroll",()=>{e.set(window.scrollY);}),this.signalMap.set("scrollY",e.asReadonly()),this.signalMap.set("preferredLanguage",y(()=>{let p=this.state.signal("language")();return p==="auto"?navigator.languages.map(F=>F.split("-")[0]).find(F=>ht.includes(F))??"en":p;})),this.signalMap.set("rulesContainComments",y(()=>{let p=this.state.signal("rules")();return!!p&&p.includes("#");}));let n=y(()=>{let p=this.state.signal("rules")();return p||this.rulesTemplate;});this.signalMap.set("rulesOrTemplate",n);let l=y(()=>{try{return{parsedRules:this.parser.parseRules(n()),ruleParserError:""};}catch(p){p instanceof Error?console.warn(p.message):console.error(p);let I=p instanceof Error?p.message:"An unknown error occurred";return{parsedRules:[],ruleParserError:I};}}),m=y(()=>{let{ruleParserError:p,parsedRules:I}=l();if(!p){let{items:H,weights:F}=this.refactor.countItemsAndWeights(I);return F/H;}return 0;});this.signalMap.set("percentageOfItemsWithWeights",m);let $=y(()=>l().parsedRules);this.signalMap.set("parsedRules",$),this.signalMap.set("ruleParserError",y(()=>l().ruleParserError)),this.signalMap.set("categories",y(()=>this.refactor.extractCategories($()))),this.signalMap.set("variables",y(()=>this.refactor.extractVariables($())));let E=y(()=>this.refactor.filterActive({rules:$(),model:this.state.signal("answers")()})),O=y(()=>E().rules);this.signalMap.set("activeRules",O),this.signalMap.set("activeAnswers",y(()=>E().model)),this.signalMap.set("activeQuestions",y(()=>O().flatMap(p=>p.questions))),this.signalMap.set("activeItems",y(()=>O().flatMap(p=>p.items)));let v=y(()=>$r(n()).toString(16));this.signalMap.set("rulesHash",v);let d=W(new Date().getTime());this.signalMap.set("lastRulesAction",d.asReadonly()),V(()=>{n(),d.set(new Date().getTime());}),this.signalMap.set("exportFileName",y(()=>{let p=new Date(d()).toISOString().replace(/\..*$/,"").replace(/[T:]/g,"-"),I=v();return`travel-packlist-rules-${p}-${I}.txt`;})),this.signalMap.set("exportNeeded",y(()=>{let p=this.signal("rulesHash")(),I=this.state.signal("lastExportHash")(),H=p!==I;return!!this.state.signal("rules")()&&H;}));}handles(e){return this.signalMap.has(e);}signal(e){return this.signalMap.get(e);}get(e){return this.signal(e)();}static ɵfac=function(n){return new(n||i)();};static ɵprov=A({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})(),$r=function(i,c=0){let e=3735928559^c,n=1103547991^c;for(let l=0,m;l<i.length;l++)m=i.charCodeAt(l),e=Math.imul(e^m,2654435761),n=Math.imul(n^m,1597334677);return e=Math.imul(e^e>>>16,2246822507),e^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(e^e>>>13,3266489909),4294967296*(2097151&n)+(e>>>0);};var ye={rulesMode:"view",filterRulesQuery:void 0},be=Object.keys(ye),dt=(()=>{class i{route=x(at);router=x(ot);signalMap=new Map();constructor(){for(let e of be)this.signalMap.set(e,this.createSignal(e));}createSignal(e){let n=W(void 0);return this.router.events.pipe(rt(l=>l instanceof nt),tt(()=>this.route.snapshot.queryParams[e]??ye[e])).subscribe(l=>{l!==""&&n.set(l);}),V(()=>{let l=n()||void 0;l===ye[e]&&(l=void 0),this.route.snapshot.queryParams[e]!==l&&this.router.navigate([],{queryParams:{[e]:l},queryParamsHandling:"merge",relativeTo:this.route,replaceUrl:!0});}),n;}handles(e){return be.includes(e);}signal(e){return this.signalMap.get(e);}get(e){return this.signal(e)();}set(e,n){this.signal(e).set(n);}reset(){for(let e of be)this.signal(e).set(void 0);}static ɵfac=function(n){return new(n||i)();};static ɵprov=A({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})();var X={clipboardItems:[],clipboardQuestions:[]},xe=Object.keys(X),mt=(()=>{class i{state=ae(sessionStorage,X);signalMap=new Map();constructor(){this.initializeSignals();}initializeSignals(){for(let e of xe){let n=W(this.state[e]);V(()=>{let l=n();l!==this.state[e]&&(this.state[e]=l,this.persist());},{manualCleanup:!0}),this.signalMap.set(e,n);}}persist(){oe(sessionStorage,this.state,X);}handles(e){return xe.includes(e);}signal(e){return this.signalMap.get(e);}set(e,n){this.signal(e).set(n);}get(e){return this.signal(e)();}reset(){this.state=N({},X),this.persist(),xe.forEach(e=>{this.signal(e).set(X[e]);});}static ɵfac=function(n){return new(n||i)();};static ɵprov=A({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})();var Ae={serviceWorkerStatus:"init"},Ee=Object.keys(Ae),vt=(()=>{class i{signalMap=new Map();constructor(){this.initializeSignals();}initializeSignals(){for(let e of Ee){let n=W(Ae[e]);this.signalMap.set(e,n);}}handles(e){return Ee.includes(e);}signal(e){return this.signalMap.get(e);}get(e){return this.signal(e)();}set(e,n){this.signal(e).set(n);}reset(){for(let e of Ee)this.signal(e).set(Ae[e]);}static ɵfac=function(n){return new(n||i)();};static ɵprov=A({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})();var ks=(()=>{class i{persistent=x(le);router=x(dt);session=x(mt);transient=x(vt);derived=x(pt);get(e){if(this.persistent.handles(e))return this.persistent.get(e);if(this.router.handles(e))return this.router.get(e);if(this.session.handles(e))return this.session.get(e);if(this.transient.handles(e))return this.transient.get(e);if(this.derived.handles(e))return this.derived.get(e);throw new Error(`Key ${e} not handled in state`);}signal(e){if(this.persistent.handles(e))return this.persistent.signal(e);if(this.router.handles(e))return this.router.signal(e);if(this.session.handles(e))return this.session.signal(e);if(this.transient.handles(e))return this.transient.signal(e);if(this.derived.handles(e))return this.derived.signal(e);throw new Error(`Key ${e} not handled in state`);}set(e,n){if(this.persistent.handles(e))this.persistent.signal(e).set(n);else if(this.router.handles(e))this.router.set(e,n);else if(this.session.handles(e))this.session.set(e,n);else if(this.transient.handles(e))this.transient.set(e,n);else throw this.derived.handles(e)?new Error("Key is derived and cannot be set"):new Error(`Key ${e} not handled in state`);}reset(){this.persistent.reset(),this.session.reset(),this.router.reset();}static ɵfac=function(n){return new(n||i)();};static ɵprov=A({token:i,factory:i.ɵfac,providedIn:"root"});}return i;})();export{fr as a,me as b,z as c,j as d,U as e,T as f,Ar as g,Z as h,L as i,q as j,K as k,P as l,dr as m,ne as n,$e as o,Gr as p,ks as q};/**i18n:cbcf01d4640d52ad6821130aa8bde718125de417ff622aa7dfac4aa297a95122*/