import{a as it,b as at,d as ot}from"./chunk-43426cf1.js";import{B as rt,Ga as W,Nb as nt,Rb as y,Tb as z,W as A,Z as ne,aa as x,da as st,p as tt}from"./chunk-36b36bcf.js";import{a as P,b as et}from"./chunk-5742b79d.js";function fr(n){return n.map(c=>c.toString()).map(c=>c+";").join(`

`);}function me(n,c,e=-1){if(!n)return"0g";let i=(e<0?n/1e3:(n/1e3).toFixed(e)).toString()+"kg",l=(n*1).toString()+"g";return c?c==="kg"?i:l:i.length<=l.length?i:l;}var D=class{condition;questions;items;constructor(c,e=[],i=[]){this.condition=c,this.questions=e,this.items=i;}toString(){let c=[];if(!(this.condition instanceof Z)){let i=this.condition.toString();i&&c.push(i," ");}c.push(":-");let e=this.questions.map(i=>i.toString()).concat(this.items.map(i=>i.toString()));if(e.length===1&&c.length===1)c.push(" ",e[0]);else for(let i=0;i<e.length;i++){let l=e[i];i>0&&c.push(","),c.push(`
`,"   ",l);}return c.join("");}},k=class{question;variable;static NEW_QUESTION_NAME="New Question";static NEW_VARIABLE_NAME="new_variable";constructor(c,e){this.question=c,this.variable=e;}toString(){return this.question+" $"+this.variable;}},U=class{category;name;weight;static NEW_ITEM_NAME="New Item";static NEW_CATEGORY_NAME="New";constructor(c,e,i){this.category=c,this.name=e,this.weight=i;}toString(){let c=`[${this.category}] ${this.name}`.trim();return this.weight&&(c+=" "+me(this.weight)),c;}},N=class{variable;constructor(c){this.variable=c;}evaluate(c){return c[this.variable];}toString(){return this.variable;}},Ar=(()=>{class n extends N{static string="please_select";constructor(){super(n.string);}}return n;})(),Z=(()=>{class n extends N{static string="always";constructor(){super(n.string);}evaluate(){return!0;}}return n;})(),L=class{not;constructor(c){this.not=c;}evaluate(c){return!this.not.evaluate(c);}toString(){return"NOT "+this.not.toString();}},q=class{left;right;constructor(c,e){this.left=c,this.right=e;}evaluate(c){return this.left.evaluate(c)&&this.right.evaluate(c);}toString(){return this.left.toString()+" AND "+this.right.toString();}},K=class{left;right;constructor(c,e){this.left=c,this.right=e;}evaluate(c){return this.left.evaluate(c)||this.right.evaluate(c);}toString(){return this.left.toString()+" OR "+this.right.toString();}};function gr(n,c){let e=c.filter(l=>l instanceof k),i=c.filter(l=>l instanceof U);return new D(n??new Z(),e,i);}function lt(n){return n.length===1?n[0]:new q(n[0],lt(n.slice(1)));}function ct(n){return n.length===1?n[0]:new K(n[0],ct(n.slice(1)));}function hr(n,c){function e(){this.constructor=n;}e.prototype=c.prototype,n.prototype=new e();}function j(n,c,e,i){var l=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(l,j.prototype),l.expected=c,l.found=e,l.location=i,l.name="SyntaxError",l;}hr(j,Error);function ve(n,c,e){return e=e||" ",n.length>c?n:(c-=n.length,e+=e.repeat(c),n+e.slice(0,c));}j.prototype.format=function(n){var c="Error: "+this.message;if(this.location){var e=null,i;for(i=0;i<n.length;i++)if(n[i].source===this.location.source){e=n[i].text.split(/\r\n|\n|\r/g);break;}var l=this.location.start,m=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(l):l,$=this.location.source+":"+m.line+":"+m.column;if(e){var E=this.location.end,M=ve("",m.line.toString().length," "),v=e[l.line-1],d=l.line===E.line?E.column:v.length+1,p=d-l.column||1;c+=`
 --> `+$+`
`+M+` |
`+m.line+" | "+v+`
`+M+" | "+ve("",l.column-1," ")+ve("",p,"^");}else c+=`
 at `+$;}return c;};j.buildMessage=function(n,c){var e={literal:function(v){return'"'+l(v.text)+'"';},class:function(v){var d=v.parts.map(function(p){return Array.isArray(p)?m(p[0])+"-"+m(p[1]):m(p);});return"["+(v.inverted?"^":"")+d.join("")+"]";},any:function(){return"any character";},end:function(){return"end of input";},other:function(v){return v.description;}};function i(v){return v.charCodeAt(0).toString(16).toUpperCase();}function l(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+i(d);}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+i(d);});}function m(v){return v.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+i(d);}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+i(d);});}function $(v){return e[v.type](v);}function E(v){var d=v.map($),p,R;if(d.sort(),d.length>0){for(p=1,R=1;p<d.length;p++)d[p-1]!==d[p]&&(d[R]=d[p],R++);d.length=R;}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1];}}function M(v){return v?'"'+l(v)+'"':"end of input";}return"Expected "+E(n)+" but "+M(c)+" found.";};function C(n,c){c=c!==void 0?c:{};var e={},i=c.grammarSource,l={Rules:Le,Rule:ue,Condition:Ke,Effects:He,Question:ge,Item:pe,VariableName:he,QuestionString:Be,ItemNameAndWeight:Ye,CategoryName:Je},m=Le,$=";",E=":-",M="OR",v="AND",d="NOT",p=",",R="$",H="[",F="]",Re="kg",$t="g",wt=".",Ie=/^[^$,;#]/,bt=/^[a-zA-Z]/,Me=/^[a-zA-Z0-9\-[\](){}_]/,Oe=/^[^\],;#[]/,yt=/^[,;]/,Ce=/^[^ ,;#]/,ee=/^[0-9]/,Te=/^[ \t\n\r]/,St=I("rule end"),xt=O(";",!1),Et=I("rule"),At=O(":-",!1),te=I("condition"),Rt=O("OR",!1),It=O("AND",!1),ce=O("NOT",!1),Mt=O(",",!1),We=I("question"),Ot=O("$",!1),Pe=V(["$",",",";","#"],!0,!1),Ct=I("variable name"),Tt=V([["a","z"],["A","Z"]],!1,!1),Ne=V([["a","z"],["A","Z"],["0","9"],"-","[","]","(",")","{","}","_"],!1,!1),Wt=I("item"),Pt=I("category"),Nt=O("[",!1),jt=O("]",!1),kt=I("category name"),je=V(["]",",",";","#","["],!0,!1),Ft=I("item name"),Vt=I("word"),zt=V([",",";"],!1,!1),ke=V([" ",",",";","#"],!0,!1),Dt=I("weight"),Lt=O("kg",!1),qt=O("g",!1),Kt=I("number"),re=V([["0","9"]],!1,!1),Ut=O(".",!1),Qt=I("whitespace"),Fe=V([" ","	",`
`,"\r"],!1,!1),Ht=ar(),Bt=function(t,r){return gr(t,r);},Jt=function(t){return ct(t);},Yt=function(t){return lt(t);},Gt=function(t){return new L(t);},Zt=function(t){return new N(t);},_t=function(t,r){return new k(t.trim(),r.trim());},Xt=function(t,r){let{name:a,weight:o}=r;return new U(t.trim(),a,o);},er=function(t,r){return c.trackWeight;},tr=function(t,r){let a=t.trim();return a.length||Ve("item name"),{name:a,weight:r};},rr=function(t){let r=t.trim();return r.length||Ve("item name"),{name:r,weight:void 0};},sr=function(t){return t*1e3;},nr=function(){return parseFloat(ir());},s=c.peg$currPos|0,S=s,B=[{line:1,column:1}],T=s,se=c.peg$maxFailExpected||[],u=c.peg$silentFails|0,J;if(c.startRule){if(!(c.startRule in l))throw new Error(`Can't start parsing from rule "`+c.startRule+'".');m=l[c.startRule];}function ir(){return n.substring(S,s);}function wr(){return S;}function br(){return{source:i,start:S,end:s};}function yr(){return Y(S,s);}function Ve(t,r){throw r=r!==void 0?r:Y(S,s),De([I(t)],n.substring(S,s),r);}function Sr(t,r){throw r=r!==void 0?r:Y(S,s),lr(t,r);}function O(t,r){return{type:"literal",text:t,ignoreCase:r};}function V(t,r,a){return{type:"class",parts:t,inverted:r,ignoreCase:a};}function ar(){return{type:"any"};}function or(){return{type:"end"};}function I(t){return{type:"other",description:t};}function ze(t){var r=B[t],a;if(r)return r;if(t>=B.length)a=B.length-1;else for(a=t;!B[--a];);for(r=B[a],r={line:r.line,column:r.column};a<t;)n.charCodeAt(a)===10?(r.line++,r.column=1):r.column++,a++;return B[t]=r,r;}function Y(t,r,a){var o=ze(t),f=ze(r),h={source:i,start:{offset:t,line:o.line,column:o.column},end:{offset:r,line:f.line,column:f.column}};return a&&i&&typeof i.offset=="function"&&(h.start=i.offset(h.start),h.end=i.offset(h.end)),h;}function g(t){s<T||(s>T&&(T=s,se=[]),se.push(t));}function lr(t,r){return new j(t,null,null,r);}function De(t,r,a){return new j(j.buildMessage(t,r),t,r,a);}function Le(){var t,r,a,o,f,h;for(t=s,r=w(),a=[],o=ue();o!==e;)a.push(o),o=s,f=qe(),f!==e?(f=ue(),f===e?(s=o,o=e):o=f):o=f;return o=qe(),o===e&&(o=null),f=w(),h=Xe(),h!==e?t=a:(s=t,t=e),t;}function qe(){var t,r,a,o;return u++,t=s,r=w(),n.charCodeAt(s)===59?(a=$,s++):(a=e,u===0&&g(xt)),a!==e?(o=w(),r=[r,a,o],t=r):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(St)),t;}function ue(){var t,r,a,o,f,h;return u++,t=s,r=Ke(),r===e&&(r=null),a=w(),n.substr(s,2)===E?(o=E,s+=2):(o=e,u===0&&g(At)),o!==e?(f=w(),h=He(),S=t,t=Bt(r,h)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(Et)),t;}function Ke(){var t,r;return u++,t=cr(),u--,t===e&&(r=e,u===0&&g(te)),t;}function cr(){var t,r,a,o,f,h,b,G;for(u++,t=s,r=s,a=[],o=Ue();o!==e;)a.push(o),o=s,f=s,h=w(),n.substr(s,2)===M?(b=M,s+=2):(b=e,u===0&&g(Rt)),b!==e?(G=w(),h=[h,b,G],f=h):(s=f,f=e),f!==e?(f=Ue(),f===e?(s=o,o=e):o=f):o=f;return a.length<1?(s=r,r=e):r=a,r!==e&&(S=t,r=Jt(r)),t=r,u--,t===e&&(r=e,u===0&&g(te)),t;}function Ue(){var t,r,a,o,f,h,b,G;for(u++,t=s,r=s,a=[],o=fe();o!==e;)a.push(o),o=s,f=s,h=w(),n.substr(s,3)===v?(b=v,s+=3):(b=e,u===0&&g(It)),b!==e?(G=w(),h=[h,b,G],f=h):(s=f,f=e),f!==e?(f=fe(),f===e?(s=o,o=e):o=f):o=f;return a.length<1?(s=r,r=e):r=a,r!==e&&(S=t,r=Yt(r)),t=r,u--,t===e&&(r=e,u===0&&g(te)),t;}function fe(){var t,r,a,o,f,h;return u++,t=s,n.substr(s,3)===d?(r=d,s+=3):(r=e,u===0&&g(ce)),r!==e?(a=w(),n.substr(s,3)===d?(o=d,s+=3):(o=e,u===0&&g(ce)),o!==e?(f=w(),h=fe(),h!==e?t=h:(s=t,t=e)):(s=t,t=e)):(s=t,t=e),t===e&&(t=s,n.substr(s,3)===d?(r=d,s+=3):(r=e,u===0&&g(ce)),r!==e?(a=w(),o=Qe(),o!==e?(S=t,t=Gt(o)):(s=t,t=e)):(s=t,t=e),t===e&&(t=s,r=Qe(),r!==e?t=r:(s=t,t=e))),u--,t===e&&(r=e,u===0&&g(te)),t;}function Qe(){var t,r;return t=s,r=he(),r!==e&&(S=t,r=Zt(r)),t=r,t;}function He(){var t,r,a,o,f,h,b;for(t=s,r=[],a=ge(),a===e&&(a=pe());a!==e;)r.push(a),a=s,o=s,f=w(),n.charCodeAt(s)===44?(h=p,s++):(h=e,u===0&&g(Mt)),h!==e?(b=w(),f=[f,h,b],o=f):(s=o,o=e),o!==e?(o=ge(),o===e&&(o=pe()),o===e?(s=a,a=e):a=o):a=o;return t=r,t;}function ge(){var t,r,a,o;return u++,t=s,r=Be(),r!==e?(n.charCodeAt(s)===36?(a=R,s++):(a=e,u===0&&g(Ot)),a!==e?(o=he(),o!==e?(S=t,t=_t(r,o)):(s=t,t=e)):(s=t,t=e)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(We)),t;}function Be(){var t,r,a;if(u++,t=s,r=[],a=n.charAt(s),Ie.test(a)?s++:(a=e,u===0&&g(Pe)),a!==e)for(;a!==e;)r.push(a),a=n.charAt(s),Ie.test(a)?s++:(a=e,u===0&&g(Pe));else r=e;return r!==e?t=n.substring(t,s):t=r,u--,t===e&&(r=e,u===0&&g(We)),t;}function he(){var t,r,a,o,f;if(u++,t=s,r=s,a=n.charAt(s),bt.test(a)?s++:(a=e,u===0&&g(Tt)),a!==e){for(o=[],f=n.charAt(s),Me.test(f)?s++:(f=e,u===0&&g(Ne));f!==e;)o.push(f),f=n.charAt(s),Me.test(f)?s++:(f=e,u===0&&g(Ne));a=[a,o],r=a;}else s=r,r=e;return r!==e?t=n.substring(t,s):t=r,u--,t===e&&(r=e,u===0&&g(Ct)),t;}function pe(){var t,r,a,o;return u++,t=s,r=ur(),r!==e?(a=w(),o=Ye(),o!==e?(S=t,t=Xt(r,o)):(s=t,t=e)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(Wt)),t;}function ur(){var t,r,a,o,f,h;return u++,t=s,n.charCodeAt(s)===91?(r=H,s++):(r=e,u===0&&g(Nt)),r!==e?(a=w(),o=Je(),o!==e?(f=w(),n.charCodeAt(s)===93?(h=F,s++):(h=e,u===0&&g(jt)),h!==e?t=o:(s=t,t=e)):(s=t,t=e)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(Pt)),t;}function Je(){var t,r,a;if(u++,t=s,r=[],a=n.charAt(s),Oe.test(a)?s++:(a=e,u===0&&g(je)),a!==e)for(;a!==e;)r.push(a),a=n.charAt(s),Oe.test(a)?s++:(a=e,u===0&&g(je));else r=e;return r!==e?t=n.substring(t,s):t=r,u--,t===e&&(r=e,u===0&&g(kt)),t;}function Ye(){var t,r,a,o,f;for(u++,t=s,r=s,a=[],o=Ge();o!==e;)a.push(o),o=s,f=w(),f=Ge(),f===e?(s=o,o=e):o=f;if(r=n.substring(r,s),a=w(),o=Ze(),o!==e?(S=s,f=er(r,o),f?f=void 0:f=e,f!==e?(S=t,t=tr(r,o)):(s=t,t=e)):(s=t,t=e),t===e){for(t=s,r=s,a=[],o=de();o!==e;)a.push(o),o=s,f=w(),f=de(),f===e?(s=o,o=e):o=f;r=n.substring(r,s),S=t,r=rr(r),t=r;}return u--,t===e&&(r=e,u===0&&g(Ft)),t;}function Ge(){var t,r,a,o,f,h;return u++,t=s,r=s,u++,a=s,o=Ze(),o!==e?(f=w(),h=Xe(),h===e&&(h=n.charAt(s),yt.test(h)?s++:(h=e,u===0&&g(zt))),h!==e?(o=[o,f,h],a=o):(s=a,a=e)):(s=a,a=e),u--,a===e?r=void 0:(s=r,r=e),r!==e?(a=de(),a!==e?t=a:(s=t,t=e)):(s=t,t=e),u--,t===e&&(r=e,u===0&&g(Vt)),t;}function de(){var t,r,a;if(t=s,r=[],a=n.charAt(s),Ce.test(a)?s++:(a=e,u===0&&g(ke)),a!==e)for(;a!==e;)r.push(a),a=n.charAt(s),Ce.test(a)?s++:(a=e,u===0&&g(ke));else r=e;return r!==e?t=n.substring(t,s):t=r,t;}function Ze(){var t,r,a;return u++,t=s,r=_e(),r!==e?(n.substr(s,2)===Re?(a=Re,s+=2):(a=e,u===0&&g(Lt)),a!==e?(S=t,t=sr(r)):(s=t,t=e)):(s=t,t=e),t===e&&(t=s,r=_e(),r!==e?(n.charCodeAt(s)===103?(a=$t,s++):(a=e,u===0&&g(qt)),a===e&&(a=null),t=r):(s=t,t=e)),u--,t===e&&(r=e,u===0&&g(Dt)),t;}function _e(){var t,r,a,o,f,h,b;if(u++,t=s,r=[],a=n.charAt(s),ee.test(a)?s++:(a=e,u===0&&g(re)),a!==e)for(;a!==e;)r.push(a),a=n.charAt(s),ee.test(a)?s++:(a=e,u===0&&g(re));else r=e;if(r!==e){if(a=s,n.charCodeAt(s)===46?(o=wt,s++):(o=e,u===0&&g(Ut)),o!==e){if(f=s,h=[],b=n.charAt(s),ee.test(b)?s++:(b=e,u===0&&g(re)),b!==e)for(;b!==e;)h.push(b),b=n.charAt(s),ee.test(b)?s++:(b=e,u===0&&g(re));else h=e;h!==e?f=n.substring(f,s):f=h,f!==e?(o=[o,f],a=o):(s=a,a=e);}else s=a,a=e;a===e&&(a=null),S=t,t=nr();}else s=t,t=e;return u--,t===e&&(r=e,u===0&&g(Kt)),t;}function w(){var t,r;for(u++,t=[],r=n.charAt(s),Te.test(r)?s++:(r=e,u===0&&g(Fe));r!==e;)t.push(r),r=n.charAt(s),Te.test(r)?s++:(r=e,u===0&&g(Fe));return u--,r=e,u===0&&g(Qt),t;}function Xe(){var t,r;return t=s,u++,n.length>s?(r=n.charAt(s),s++):(r=e,u===0&&g(Ht)),u--,r===e?t=void 0:(s=t,t=e),t;}if(J=m(),c.peg$library)return{peg$result:J,peg$currPos:s,peg$FAILED:e,peg$maxFailExpected:se,peg$maxFailPos:T};if(J!==e&&s===n.length)return J;throw J!==e&&s<n.length&&g(or()),De(se,T<n.length?n.charAt(T):null,T<n.length?Y(T,T+1):Y(T,T));}var pr={isTrackWeight:()=>!1},dr=new ne("PARSER_CONFIG_PROVIDER"),ie=(()=>{class n{config=x(dr,{optional:!0})??pr;isTrackWeight(){return this.config.isTrackWeight();}makeOptions(e,i={}){return{startRule:e,trackWeight:i.forceWeightTracking??this.isTrackWeight()};}parseCondition(e){return C(e,this.makeOptions("Condition"));}parseQuestion(e){return C(e,this.makeOptions("Question"));}parseItem(e){return C(e,this.makeOptions("Item"));}parseEffects(e){return C(e,this.makeOptions("Effects"));}parseRule(e){return C(e,this.makeOptions("Rule"));}parseRules(e){let i=e.split(/\r?\n/g).map(l=>l.replace(/#.*/,"")).join(`
`);try{return C(i,this.makeOptions("Rules"));}catch(l){let m=[];if(m.push("Error parsing rules"),l instanceof j){let $=l.location.start.line.toString(),E=l.location.start.column.toString();m.push(" at line ",$," column ",E),m.push(":",`
`,l.message);}else console.error(l);throw new Error(m.join(""));}}validateVariableName(e){C(e,this.makeOptions("VariableName"));}validateQuestionString(e){C(e,this.makeOptions("QuestionString"));}validateItemNameAndWeight(e){C(e,this.makeOptions("ItemNameAndWeight"));}validateCategoryName(e){C(e,this.makeOptions("CategoryName"));}forceParseWeight(e){return C(e,this.makeOptions("ItemNameAndWeight",{forceWeightTracking:!0})).weight??0;}static ɵfac=function(i){return new(i||n)();};static ɵprov=A({token:n,factory:n.ɵfac,providedIn:"root"});}return n;})();var $e=(()=>{class n{parser=x(ie);extractVariables(e){return e.reduce((i,l)=>[...i,...l.questions.map(m=>m.variable)],[]);}extractCategories(e){let i=new Set();for(let l of e)for(let m of l.items)i.add(m.category);return Array.from(i);}renameVariable(e,i,l){if(l instanceof Array)return l.map($=>this.renameVariable(e,i,$));if(l instanceof k)return l.variable===e?new k(l.question,i):l;if(l instanceof D)return new D(this.renameVariable(e,i,l.condition),l.questions.map($=>this.renameVariable(e,i,$)),l.items);if(l instanceof N)return l.variable===e?new N(i):l;if(l instanceof L)return new L(this.renameVariable(e,i,l.not));if(l instanceof q)return new q(this.renameVariable(e,i,l.left),this.renameVariable(e,i,l.right));if(l instanceof K)return new K(this.renameVariable(e,i,l.left),this.renameVariable(e,i,l.right));let m=l;throw new Error("Unknown item type: "+m);}filterActive(e){let i=e.rules.filter(m=>m.condition.evaluate(e.model)),l=this.extractVariables(i).reduce((m,$)=>et(P({},m),{[$]:e.model[$]}),{[Z.string]:!0});return i.length===e.rules.length?{model:l,rules:i}:this.filterActive({model:l,rules:i});}contains(e,i){let l=i.toLowerCase();if(e instanceof D)return this.contains(e.condition,i)||e.questions.some($=>this.contains($,i))||e.items.some($=>this.contains($,i));if(e instanceof k)return e.question.toLowerCase().includes(l)||e.variable.toLowerCase().includes(l);if(e instanceof U)return e.category.toLowerCase().includes(l)||e.name.toLowerCase().includes(l);if(e instanceof N)return e.variable.toLowerCase().includes(l);if(e instanceof L)return this.contains(e.not,i);if(e instanceof q)return this.contains(e.left,i)||this.contains(e.right,i);if(e instanceof K)return this.contains(e.left,i)||this.contains(e.right,i);let m=e;throw new Error("Unknown item type: "+m);}countItemsAndWeights(e){return e.reduce((i,l)=>l.items.reduce((m,$)=>{let E;return this.parser.isTrackWeight()?E=$.weight?1:0:E=this.parser.forceParseWeight($.name)?1:0,{items:m.items+1,weights:m.weights+E};},i),{items:0,weights:0});}static ɵfac=function(i){return new(i||n)();};static ɵprov=A({token:n,factory:n.ɵfac,providedIn:"root"});}return n;})();var ut=`:-
   [Utility] Paper Tissues,
   [Utility] Backpack;

:- Are you traveling longer than 3 days? $longer;

longer :-
   Do you have a washer or laundry service available? $laundry,
   Do you want to work? $work,
   [Electronics] Phone Charger,
   [Electronics] Tablet;

longer AND NOT laundry :-
   [Clothes] enough Shirts,
   [Clothes] enough Underwear,
   [Clothes] spare Pants;

laundry :-
   [Clothes] 3 Shirts,
   [Clothes] 3 sets of Underwear;

work :-
   [Electronics] Laptop;

:-
   Will it be sunny? $sunny,
   Will it be rainy? $rainy,
   Are you traveling abroad? $abroad;

sunny :-
   Do you expect a high UV index? $uv,
   [Utility] Sunglasses,
   [Clothes] Short Pants;

rainy :-
   [Clothes] Rain Jacket;

NOT rainy :-
   [Clothes] Jacket;

NOT sunny :-
   [Clothes] Long Pants;

uv :-
   [Utility] Sunscreen;

abroad :-
   [Documents] Passport,
   [Documents] Visa;
`;var ft=`:-
   [N\xFCtzliches] Papiertaschent\xFCcher,
   [N\xFCtzliches] Rucksack;

:- Reist du l\xE4nger als 3 Tage? $longer;

longer :-
   Hast du eine Waschmaschine oder einen W\xE4scheservice zur Verf\xFCgung? $laundry,
   Willst du arbeiten? $work,
   [Elektronik] Handy-Ladeger\xE4t,
   [Elektronik] Tablet;

longer AND NOT laundry :-
   [Kleidung] genug Hemden,
   [Kleidung] genug Unterw\xE4sche,
   [Kleidung] Ersatzhosen;

laundry :-
   [Kleidung] 3 Hemden,
   [Kleidung] 3 S\xE4tze Unterw\xE4sche;

work :-
   [Elektronik] Laptop;

:-
   Wird es sonnig sein? $sunny,
   Wird es regnerisch sein? $rainy,
   Reist du ins Ausland? $abroad;

sunny :-
   Erwartest du einen hohen UV-Index? $uv,
   [N\xFCtzliches] Sonnenbrille,
   [Kleidung] Kurze Hosen;

rainy :-
   [Kleidung] Regenjacke;

NOT rainy :-
   [Kleidung] Jacke;

NOT sunny :-
   [Kleidung] Lange Hosen;

uv :-
   [N\xFCtzliches] Sonnencreme;

abroad :-
   [Dokumente] Reisepass,
   [Dokumente] Visum;
`;var we=new ne("RULES_TEMPLATE");function mr(n){return n.startsWith("de")?ft:ut;}function Gr(){return st([{provide:we,useFactory:mr,deps:[nt]}]);}function ae(n,c){let e=n.getItem("state"),i;if(e){let l=JSON.parse(e);i=P(P({},c),l);}else i=P({},c);return i;}function gt(n,c){if(typeof n!=typeof c)return!1;if(n&&c&&typeof n=="object"){let e=Object.keys(n),i=Object.keys(c);return e.length===i.length&&e.every(l=>gt(n[l],c[l]));}return n===c;}function vr(n,c){let e=Object.keys(c).filter(i=>!gt(n[i],c[i])).map(i=>[i,n[i]]);return e.length===0?null:Object.fromEntries(e);}function oe(n,c,e){let i=vr(c,e);i===null?n.removeItem("state"):n.setItem("state",JSON.stringify(i));}var ht=["en","de"],_={answers:{},checkedItems:[],collapsedCategories:[],rules:void 0,fadeOutDisabledRules:!1,highlightVariableStatus:!1,refactorVariables:!0,categorySorting:"alphabetically",trackWeight:!1,answersLocked:!1,theme:"system",fontSize:"normal",accessibility:"accessible",language:"auto",exportReminder:!1,lastExportHash:"",lastExportDate:0},be=Object.keys(_),le=(()=>{class n{state=ae(localStorage,_);signalMap=new Map();constructor(){this.initializeSignals();}initializeSignals(){for(let e of be){let i=W(this.state[e]);z(()=>{let l=i();l!==this.state[e]&&(this.state[e]=l,this.persist());},{manualCleanup:!0}),this.signalMap.set(e,i);}}persist(){oe(localStorage,this.state,_);}handles(e){return be.includes(e);}signal(e){return this.signalMap.get(e);}set(e,i){this.signal(e).set(i);}get(e){return this.signal(e)();}reset(){this.state=P({},_),this.persist(),be.forEach(e=>{this.signal(e).set(_[e]);});}static ɵfac=function(i){return new(i||n)();};static ɵprov=A({token:n,factory:n.ɵfac,providedIn:"root"});}return n;})();var pt=(()=>{class n{state=x(le);parser=x(ie);refactor=x($e);rulesTemplate=x(we);signalMap=new Map();constructor(){this.initializeSignals();}initializeSignals(){this.signalMap.set("isMobile",y(()=>{let p=navigator.userAgent;return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(p);}));let e=W(window.scrollY);window.addEventListener("scroll",()=>{e.set(window.scrollY);}),this.signalMap.set("scrollY",e.asReadonly()),this.signalMap.set("preferredLanguage",y(()=>{let p=this.state.signal("language")();return p==="auto"?navigator.languages.map(F=>F.split("-")[0]).find(F=>ht.includes(F))??"en":p;})),this.signalMap.set("rulesContainComments",y(()=>{let p=this.state.signal("rules")();return!!p&&p.includes("#");}));let i=y(()=>{let p=this.state.signal("rules")();return p===void 0?this.rulesTemplate:p;});this.signalMap.set("rulesOrTemplate",i);let l=y(()=>{try{return{parsedRules:this.parser.parseRules(i()),ruleParserError:""};}catch(p){p instanceof Error?console.warn(p.message):console.error(p);let R=p instanceof Error?p.message:"An unknown error occurred";return{parsedRules:[],ruleParserError:R};}});this.signalMap.set("numberOfRules",y(()=>l().parsedRules.length));let m=y(()=>{let{ruleParserError:p,parsedRules:R}=l();if(!p){let{items:H,weights:F}=this.refactor.countItemsAndWeights(R);return F/H;}return 0;});this.signalMap.set("percentageOfItemsWithWeights",m);let $=y(()=>l().parsedRules);this.signalMap.set("parsedRules",$),this.signalMap.set("ruleParserError",y(()=>l().ruleParserError)),this.signalMap.set("categories",y(()=>this.refactor.extractCategories($()))),this.signalMap.set("variables",y(()=>this.refactor.extractVariables($())));let E=y(()=>this.refactor.filterActive({rules:$(),model:this.state.signal("answers")()})),M=y(()=>E().rules);this.signalMap.set("activeRules",M),this.signalMap.set("activeAnswers",y(()=>E().model)),this.signalMap.set("activeQuestions",y(()=>M().flatMap(p=>p.questions))),this.signalMap.set("activeItems",y(()=>M().flatMap(p=>p.items)));let v=y(()=>$r(i()).toString(16));this.signalMap.set("rulesHash",v);let d=W(new Date().getTime());this.signalMap.set("lastRulesAction",d.asReadonly()),z(()=>{i(),d.set(new Date().getTime());}),this.signalMap.set("exportFileName",y(()=>{let p=new Date(d()).toISOString().replace(/\..*$/,"").replace(/[T:]/g,"-"),R=v();return`travel-packlist-rules-${p}-${R}.txt`;})),this.signalMap.set("exportNeeded",y(()=>{let p=this.signal("rulesHash")(),R=this.state.signal("lastExportHash")(),H=p!==R;return!!this.state.signal("rules")()&&H;}));}handles(e){return this.signalMap.has(e);}signal(e){return this.signalMap.get(e);}get(e){return this.signal(e)();}static ɵfac=function(i){return new(i||n)();};static ɵprov=A({token:n,factory:n.ɵfac,providedIn:"root"});}return n;})(),$r=function(n,c=0){let e=3735928559^c,i=1103547991^c;for(let l=0,m;l<n.length;l++)m=n.charCodeAt(l),e=Math.imul(e^m,2654435761),i=Math.imul(i^m,1597334677);return e=Math.imul(e^e>>>16,2246822507),e^=Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507),i^=Math.imul(e^e>>>13,3266489909),4294967296*(2097151&i)+(e>>>0);};var Se={rulesMode:"view",filterRulesQuery:void 0},ye=Object.keys(Se),dt=(()=>{class n{route=x(at);router=x(ot);signalMap=new Map();constructor(){for(let e of ye)this.signalMap.set(e,this.createSignal(e));}createSignal(e){let i=W(void 0);return this.router.events.pipe(rt(l=>l instanceof it),tt(()=>this.route.snapshot.queryParams[e]??Se[e])).subscribe(l=>{l!==""&&i.set(l);}),z(()=>{let l=i()||void 0;l===Se[e]&&(l=void 0),this.route.snapshot.queryParams[e]!==l&&this.router.navigate([],{queryParams:{[e]:l},queryParamsHandling:"merge",relativeTo:this.route,replaceUrl:!0});}),i;}handles(e){return ye.includes(e);}signal(e){return this.signalMap.get(e);}get(e){return this.signal(e)();}set(e,i){this.signal(e).set(i);}reset(){for(let e of ye)this.signal(e).set(void 0);}static ɵfac=function(i){return new(i||n)();};static ɵprov=A({token:n,factory:n.ɵfac,providedIn:"root"});}return n;})();var X={clipboardItems:[],clipboardQuestions:[]},xe=Object.keys(X),mt=(()=>{class n{state=ae(sessionStorage,X);signalMap=new Map();constructor(){this.initializeSignals();}initializeSignals(){for(let e of xe){let i=W(this.state[e]);z(()=>{let l=i();l!==this.state[e]&&(this.state[e]=l,this.persist());},{manualCleanup:!0}),this.signalMap.set(e,i);}}persist(){oe(sessionStorage,this.state,X);}handles(e){return xe.includes(e);}signal(e){return this.signalMap.get(e);}set(e,i){this.signal(e).set(i);}get(e){return this.signal(e)();}reset(){this.state=P({},X),this.persist(),xe.forEach(e=>{this.signal(e).set(X[e]);});}static ɵfac=function(i){return new(i||n)();};static ɵprov=A({token:n,factory:n.ɵfac,providedIn:"root"});}return n;})();var Ae={serviceWorkerStatus:"init"},Ee=Object.keys(Ae),vt=(()=>{class n{signalMap=new Map();constructor(){this.initializeSignals();}initializeSignals(){for(let e of Ee){let i=W(Ae[e]);this.signalMap.set(e,i);}}handles(e){return Ee.includes(e);}signal(e){return this.signalMap.get(e);}get(e){return this.signal(e)();}set(e,i){this.signal(e).set(i);}reset(){for(let e of Ee)this.signal(e).set(Ae[e]);}static ɵfac=function(i){return new(i||n)();};static ɵprov=A({token:n,factory:n.ɵfac,providedIn:"root"});}return n;})();var Ts=(()=>{class n{persistent=x(le);router=x(dt);session=x(mt);transient=x(vt);derived=x(pt);get(e){if(this.persistent.handles(e))return this.persistent.get(e);if(this.router.handles(e))return this.router.get(e);if(this.session.handles(e))return this.session.get(e);if(this.transient.handles(e))return this.transient.get(e);if(this.derived.handles(e))return this.derived.get(e);throw new Error(`Key ${e} not handled in state`);}signal(e){if(this.persistent.handles(e))return this.persistent.signal(e);if(this.router.handles(e))return this.router.signal(e);if(this.session.handles(e))return this.session.signal(e);if(this.transient.handles(e))return this.transient.signal(e);if(this.derived.handles(e))return this.derived.signal(e);throw new Error(`Key ${e} not handled in state`);}set(e,i){if(this.persistent.handles(e))this.persistent.signal(e).set(i);else if(this.router.handles(e))this.router.set(e,i);else if(this.session.handles(e))this.session.set(e,i);else if(this.transient.handles(e))this.transient.set(e,i);else throw this.derived.handles(e)?new Error("Key is derived and cannot be set"):new Error(`Key ${e} not handled in state`);}reset(){this.persistent.reset(),this.session.reset(),this.router.reset();}static ɵfac=function(i){return new(i||n)();};static ɵprov=A({token:n,factory:n.ɵfac,providedIn:"root"});}return n;})();export{fr as a,me as b,D as c,k as d,U as e,N as f,Ar as g,Z as h,L as i,q as j,K as k,j as l,dr as m,ie as n,$e as o,Gr as p,Ts as q};/**i18n:9552fa0fbb6d334e0be38fbfc53a03a3c04e4f027352c7a86b85f26c3861fe82*/