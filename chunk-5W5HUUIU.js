import{b as c,d as h,f as x,k as M,q as b,s as F}from"./chunk-34EXOXZE.js";import{n as T}from"./chunk-5NIIFDZZ.js";import"./chunk-C4UQJ6CT.js";import{Bb as p,E as g,Fb as v,Gb as w,Ha as s,P as R,Pa as C,aa as a,bc as d,cb as l,dc as A,eb as E,ib as u,nb as i,ob as r,pb as S,wb as _,xb as y,yb as P}from"./chunk-3LKDF7HW.js";import"./chunk-2NFLSA4Y.js";function N(n,t){n&1&&(i(0,"div",4),_(1,0),r())}function O(n,t){if(n&1&&(i(0,"div",5),_(1,1),r()),n&2){let e=p();s(),y(e.rules),P(1)}}function L(n,t){if(n&1&&(i(0,"div",6),v(1),r()),n&2){let e=p();s(),w(e.error)}}function U(n,t){if(n&1&&l(0,N,2,0,"div",4)(1,O,2,1,"div",5)(2,L,2,1,"div",6),n&2){let e;u((e=t.type)==="pending"?0:e==="success"?1:2)}}var m=class n{state=a(T);fb=a(b).nonNullable;rulesControl=this.fb.control(this.state.get("rulesOrTemplate"));rulesText=c(this.rulesControl.valueChanges.pipe(R(this.rulesControl.value)));rulesPending=d(()=>this.rulesText()!==this.state.signal("rulesOrTemplate")());parserState=d(()=>{if(this.rulesPending())return{type:"pending"};{let t=this.state.signal("ruleParserError");return t()?{type:"error",error:t()}:{type:"success",rules:this.state.signal("parsedRules")().length}}});constructor(){let t=c(this.rulesControl.valueChanges.pipe(g(500)));A(()=>{let e=t();e&&this.state.set("rules",e)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-edit-rules-raw"]],decls:3,vars:2,consts:()=>{let t;t=$localize`:@@edit-raw.waiting: Waiting for input. `;let e;return e=$localize`:@@edit-raw.parsed-success: Parsed ${"\uFFFD0\uFFFD"}:NUMBER_OF_RULES: rules successfully! `,[t,e,[1,"w-full","grow","resize-none","rounded","border","border-gray-300","bg-gray-100","px-1","py-0","pb-10","font-mono","leading-tight","text-gray-700","focus:outline-none","dark:bg-gray-800","dark:text-gray-300",3,"formControl"],[1,"bg-active","bottom-0","p-2","font-mono"],[1,"text-yellow-600"],[1,"text-green-700"],[1,"text-red-700"]]},template:function(e,o){if(e&1&&(S(0,"textarea",2),i(1,"div",3),l(2,U,3,1),r()),e&2){let f;E("formControl",o.rulesControl),s(2),u((f=o.parserState())?2:-1,f)}},dependencies:[F,h,x,M],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}"],changeDetection:0})};export{m as default};
